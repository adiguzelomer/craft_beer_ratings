
{% extends "base.html" %}
<!--
	Editorial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
{% block content %}
<!-- Content -->
<section>
	<header class="main">
		<h1>Descriptive Statistics</h1>
	</header>

	<!-- Beers per Brewery -->
	<div>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-widgets-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-tables-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-gl-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://code.jquery.com/jquery-2.1.4.min.js" type="text/javascript"></script>
			<script src="https://code.jquery.com/ui/1.10.4/jquery-ui.min.js" type="text/javascript"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.20/require.min.js" type="text/javascript"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js" type="text/javascript"></script>
			<script type="text/javascript">function HoloViewsWidget() {
			}

			HoloViewsWidget.prototype.init_slider = function(init_val){
			  if(this.load_json) {
				this.from_json()
			  } else {
				this.update_cache();
			  }
			}

			HoloViewsWidget.prototype.populate_cache = function(idx){
			  this.cache[idx].innerHTML = this.frames[idx];
			  if (this.embed) {
				delete this.frames[idx];
			  }
			}

			HoloViewsWidget.prototype.process_error = function(msg){
			}

			HoloViewsWidget.prototype.from_json = function() {
			  var data_url = this.json_path + this.id + '.json';
			  $.getJSON(data_url, $.proxy(function(json_data) {
				this.frames = json_data;
				this.update_cache();
				this.update(0);
			  }, this));
			}

			HoloViewsWidget.prototype.dynamic_update = function(current){
			  if (current === undefined) {
				return
			  }
			  this.current = current;
			  if (this.comm) {
				var msg = {comm_id: this.id+'_client', content: current}
				this.comm.send(msg);
			  }
			}

			HoloViewsWidget.prototype.update_cache = function(force){
			  var frame_len = Object.keys(this.frames).length;
			  for (var i=0; i<frame_len; i++) {
				if(!this.load_json || this.dynamic)  {
				  var frame = Object.keys(this.frames)[i];
				} else {
				  var frame = i;
				}
				if(!(frame in this.cache) || force) {
				  if ((frame in this.cache) && force) { this.cache[frame].remove() }
				  var div = document.createElement("div");
				  var parent = document.getElementById("_anim_img"+this.id);
				  div.style.display = "none";
				  parent.appendChild(div)
				  this.cache[frame] = div;
				  var cache_id = "_anim_img"+this.id+"_"+frame;
				  this.populate_cache(frame);
				}
			  }
			}

			HoloViewsWidget.prototype.update = function(current){
			  if(current in this.cache) {
				for (var index in this.cache) {
				  this.cache[index].style.display = "none";
				}
				this.cache[current].style.display = "";
				this.wait = false;
			  }
			}

			HoloViewsWidget.prototype.init_comms = function() {
			  var that = this
			  HoloViews.comm_manager.register_target(this.plot_id, this.id, function (msg) { that.msg_handler(msg) })
			  if (!this.cached || this.dynamic) {
				function ack_callback(msg) {
				  var msg = msg.metadata;
				  var comm_id = msg.comm_id;
				  var comm_status = HoloViews.comm_status[comm_id];
				  if (that.queue.length > 0) {
					that.time = Date.now();
					that.dynamic_update(that.queue[that.queue.length-1]);
					that.queue = [];
				  } else {
					that.wait = false;
				  }
				  if ((msg.msg_type == "Ready") && msg.content) {
					console.log("Python callback returned following output:", msg.content);
				  } else if (msg.msg_type == "Error") {
					console.log("Python failed with the following traceback:", msg.traceback)
				  }
				}
				var comm = HoloViews.comm_manager.get_client_comm(this.plot_id, this.id+'_client', ack_callback);
				return comm
			  }
			}

			HoloViewsWidget.prototype.msg_handler = function(msg) {
			  var metadata = msg.metadata;
			  if ((metadata.msg_type == "Ready")) {
				if (metadata.content) {
				  console.log("Python callback returned following output:", metadata.content);
				}
			  return;
			  } else if (metadata.msg_type == "Error") {
				console.log("Python failed with the following traceback:", metadata.traceback)
				return
			  }
			  this.process_msg(msg)
			}

			HoloViewsWidget.prototype.process_msg = function(msg) {
			}

			function SelectionWidget(frames, id, slider_ids, keyMap, dim_vals, notFound, load_json, mode, cached, json_path, dynamic, plot_id){
			  this.frames = frames;
			  this.id = id;
			  this.plot_id = plot_id;
			  this.slider_ids = slider_ids;
			  this.keyMap = keyMap
			  this.current_frame = 0;
			  this.current_vals = dim_vals;
			  this.load_json = load_json;
			  this.mode = mode;
			  this.notFound = notFound;
			  this.cached = cached;
			  this.dynamic = dynamic;
			  this.cache = {};
			  this.json_path = json_path;
			  this.init_slider(this.current_vals[0]);
			  this.queue = [];
			  this.wait = false;
			  if (!this.cached || this.dynamic) {
				this.comm = this.init_comms();
			  }
			}

			SelectionWidget.prototype = new HoloViewsWidget;


			SelectionWidget.prototype.get_key = function(current_vals) {
			  var key = "(";
			  for (var i=0; i<this.slider_ids.length; i++)
			  {
				var val = this.current_vals[i];
				if (!(typeof val === 'string')) {
				  if (val % 1 === 0) { val = val.toFixed(1); }
				  else { val = val.toFixed(10); val = val.slice(0, val.length-1);}
				}
				key += "'" + val + "'";
				if(i != this.slider_ids.length-1) { key += ', ';}
				else if(this.slider_ids.length == 1) { key += ',';}
			  }
			  key += ")";
			  return this.keyMap[key];
			}

			SelectionWidget.prototype.set_frame = function(dim_val, dim_idx){
			  this.current_vals[dim_idx] = dim_val;
			  var key = this.current_vals;
			  if (!this.dynamic) {
				key = this.get_key(key)
			  }
			  if (this.dynamic || !this.cached) {
				if ((this.time !== undefined) && ((this.wait) && ((this.time + 10000) > Date.now()))) {
				  this.queue.push(key);
				  return
				}
				this.queue = [];
				this.time = Date.now();
				this.current_frame = key;
				this.wait = true;
				this.dynamic_update(key)
			  } else if (key !== undefined) {
				this.update(key)
			  }
			}


			/* Define the ScrubberWidget class */
			function ScrubberWidget(frames, num_frames, id, interval, load_json, mode, cached, json_path, dynamic, plot_id){
			  this.slider_id = "_anim_slider" + id;
			  this.loop_select_id = "_anim_loop_select" + id;
			  this.id = id;
			  this.plot_id = plot_id;
			  this.interval = interval;
			  this.current_frame = 0;
			  this.direction = 0;
			  this.dynamic = dynamic;
			  this.timer = null;
			  this.load_json = load_json;
			  this.mode = mode;
			  this.cached = cached;
			  this.frames = frames;
			  this.cache = {};
			  this.length = num_frames;
			  this.json_path = json_path;
			  document.getElementById(this.slider_id).max = this.length - 1;
			  this.init_slider(0);
			  this.wait = false;
			  this.queue = [];
			  if (!this.cached || this.dynamic) {
				this.comm = this.init_comms()
			  }
			}

			ScrubberWidget.prototype = new HoloViewsWidget;

			ScrubberWidget.prototype.set_frame = function(frame){
			  this.current_frame = frame;
			  var widget = document.getElementById(this.slider_id);
			  if (widget === null) {
				this.pause_animation();
				return
			  }
			  widget.value = this.current_frame;
			  if (this.dynamic || !this.cached) {
				if ((this.time !== undefined) && ((this.wait) && ((this.time + 10000) > Date.now()))) {
				  this.queue.push(frame);
				  return
				}
				this.queue = [];
				this.time = Date.now();
				this.wait = true;
				this.dynamic_update(frame)
			  } else {
				this.update(frame)
			  }
			}

			ScrubberWidget.prototype.get_loop_state = function(){
			  var button_group = document[this.loop_select_id].state;
			  for (var i = 0; i < button_group.length; i++) {
				var button = button_group[i];
				if (button.checked) {
				  return button.value;
				}
			  }
			  return undefined;
			}


			ScrubberWidget.prototype.next_frame = function() {
			  this.set_frame(Math.min(this.length - 1, this.current_frame + 1));
			}

			ScrubberWidget.prototype.previous_frame = function() {
			  this.set_frame(Math.max(0, this.current_frame - 1));
			}

			ScrubberWidget.prototype.first_frame = function() {
			  this.set_frame(0);
			}

			ScrubberWidget.prototype.last_frame = function() {
			  this.set_frame(this.length - 1);
			}

			ScrubberWidget.prototype.slower = function() {
			  this.interval /= 0.7;
			  if(this.direction > 0){this.play_animation();}
			  else if(this.direction < 0){this.reverse_animation();}
			}

			ScrubberWidget.prototype.faster = function() {
			  this.interval *= 0.7;
			  if(this.direction > 0){this.play_animation();}
			  else if(this.direction < 0){this.reverse_animation();}
			}

			ScrubberWidget.prototype.anim_step_forward = function() {
			  if(this.current_frame < this.length - 1){
				this.next_frame();
			  }else{
				var loop_state = this.get_loop_state();
				if(loop_state == "loop"){
				  this.first_frame();
				}else if(loop_state == "reflect"){
				  this.last_frame();
				  this.reverse_animation();
				}else{
				  this.pause_animation();
				  this.last_frame();
				}
			  }
			}

			ScrubberWidget.prototype.anim_step_reverse = function() {
			  if(this.current_frame > 0){
				this.previous_frame();
			  } else {
				var loop_state = this.get_loop_state();
				if(loop_state == "loop"){
				  this.last_frame();
				}else if(loop_state == "reflect"){
				  this.first_frame();
				  this.play_animation();
				}else{
				  this.pause_animation();
				  this.first_frame();
				}
			  }
			}

			ScrubberWidget.prototype.pause_animation = function() {
			  this.direction = 0;
			  if (this.timer){
				clearInterval(this.timer);
				this.timer = null;
			  }
			}

			ScrubberWidget.prototype.play_animation = function() {
			  this.pause_animation();
			  this.direction = 1;
			  var t = this;
			  if (!this.timer) this.timer = setInterval(function(){t.anim_step_forward();}, this.interval);
			}

			ScrubberWidget.prototype.reverse_animation = function() {
			  this.pause_animation();
			  this.direction = -1;
			  var t = this;
			  if (!this.timer) this.timer = setInterval(function(){t.anim_step_reverse();}, this.interval);
			}

			function extend(destination, source) {
			  for (var k in source) {
				if (source.hasOwnProperty(k)) {
				  destination[k] = source[k];
				}
			  }
			  return destination;
			}

			function update_widget(widget, values) {
			  if (widget.hasClass("ui-slider")) {
				widget.slider('option', {
				  min: 0,
				  max: values.length-1,
				  dim_vals: values,
				  value: 0,
				  dim_labels: values
				})
				widget.slider('option', 'slide').call(widget, event, {value: 0})
			  } else {
				widget.empty();
				for (var i=0; i<values.length; i++){
				  widget.append($("<option>", {
					value: i,
					text: values[i]
				  }))
				};
				widget.data('values', values);
				widget.data('value', 0);
				widget.trigger("change");
			  };
			}

			function init_slider(id, plot_id, dim, values, next_vals, labels, dynamic, step, value, next_dim,
								dim_idx, delay, jQueryUI_CDN, UNDERSCORE_CDN) {
			  // Slider JS Block START
			  function loadcssfile(filename){
				var fileref=document.createElement("link")
				fileref.setAttribute("rel", "stylesheet")
				fileref.setAttribute("type", "text/css")
				fileref.setAttribute("href", filename)
				document.getElementsByTagName("head")[0].appendChild(fileref)
			  }
			  loadcssfile("https://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css");
			  /* Check if jQuery and jQueryUI have been loaded
				otherwise load with require.js */
			  var jQuery = window.jQuery,
				// check for old versions of jQuery
				oldjQuery = jQuery && !!jQuery.fn.jquery.match(/^1\.[0-4](\.|$)/),
				jquery_path = '',
				paths = {},
				noConflict;
			  var jQueryUI = jQuery.ui;
			  // check for jQuery
			  if (!jQuery || oldjQuery) {
				// load if it's not available or doesn't meet min standards
				paths.jQuery = jQuery;
				noConflict = !!oldjQuery;
			  } else {
				// register the current jQuery
				define('jquery', [], function() { return jQuery; });
			  }
			  if (!jQueryUI) {
				paths.jQueryUI = jQueryUI_CDN.slice(null, -3);
			  } else {
				define('jQueryUI', [], function() { return jQuery.ui; });
			  }
			  paths.underscore = UNDERSCORE_CDN.slice(null, -3);
			  var jquery_require = {
				paths: paths,
				shim: {
				  "jQueryUI": {
					exports:"$",
					deps: ['jquery']
				  },
				  "underscore": {
					exports: '_'
				  }
				}
			  }
			  require.config(jquery_require);
			  require(["jQueryUI", "underscore"], function(jUI, _){
				if (noConflict) $.noConflict(true);
				var vals = values;
				if (dynamic && vals.constructor === Array) {
				  var default_value = parseFloat(value);
				  var min = parseFloat(vals[0]);
				  var max = parseFloat(vals[vals.length-1]);
				  var wstep = step;
				  var wlabels = [default_value];
				  var init_label = default_value;
				} else {
				  var min = 0;
				  if (dynamic) {
					var max = Object.keys(vals).length - 1;
					var init_label = labels[value];
					var default_value = values[value];
				  } else {
					var max = vals.length - 1;
					var init_label = labels[value];
					var default_value = value;
				  }
				  var wstep = 1;
				  var wlabels = labels;
				}
				function adjustFontSize(text) {
				  var width_ratio = (text.parent().width()/8)/text.val().length;
				  var size = Math.min(0.9, Math.max(0.6, width_ratio))+'em';
				  text.css('font-size', size);
				}
				var slider = $('#_anim_widget'+id+'_'+dim);
				slider.slider({
				  animate: "fast",
				  min: min,
				  max: max,
				  step: wstep,
				  value: default_value,
				  dim_vals: vals,
				  dim_labels: wlabels,
				  next_vals: next_vals,
				  slide: function(event, ui) {
					var vals = slider.slider("option", "dim_vals");
					var next_vals = slider.slider("option", "next_vals");
					var dlabels = slider.slider("option", "dim_labels");
					if (dynamic) {
					  var dim_val = ui.value;
					  if (vals.constructor === Array) {
						var label = ui.value;
					  } else {
						var label = dlabels[ui.value];
					  }
					} else {
					  var dim_val = vals[ui.value];
					  var label = dlabels[ui.value];
					}
					var text = $('#textInput'+id+'_'+dim);
					text.val(label);
					adjustFontSize(text);
					HoloViews.index[plot_id].set_frame(dim_val, dim_idx);
					if (Object.keys(next_vals).length > 0) {
					  var new_vals = next_vals[dim_val];
					  var next_widget = $('#_anim_widget'+id+'_'+next_dim);
					  update_widget(next_widget, new_vals);
					}
				  }
				});
				slider.keypress(function(event) {
				  if (event.which == 80 || event.which == 112) {
					var start = slider.slider("option", "value");
					var stop =  slider.slider("option", "max");
					for (var i=start; i<=stop; i++) {
					  var delay = i*delay;
					  $.proxy(function doSetTimeout(i) { setTimeout($.proxy(function() {
						var val = {value:i};
						slider.slider('value',i);
						slider.slider("option", "slide")(null, val);
					  }, slider), delay);}, slider)(i);
					}
				  }
				  if (event.which == 82 || event.which == 114) {
					var start = slider.slider("option", "value");
					var stop =  slider.slider("option", "min");
					var count = 0;
					for (var i=start; i>=stop; i--) {
					  var delay = count*delay;
					  count = count + 1;
					  $.proxy(function doSetTimeout(i) { setTimeout($.proxy(function() {
						var val = {value:i};
						slider.slider('value',i);
						slider.slider("option", "slide")(null, val);
					  }, slider), delay);}, slider)(i);
					}
				  }
				});
				var textInput = $('#textInput'+id+'_'+dim)
				textInput.val(init_label);
				adjustFontSize(textInput);
			  });
			}

			function init_dropdown(id, plot_id, dim, vals, value, next_vals, labels, next_dim, dim_idx, dynamic) {
			  var widget = $("#_anim_widget"+id+'_'+dim);
			  widget.data('values', vals)
			  for (var i=0; i<vals.length; i++){
				if (dynamic) {
				  var val = vals[i];
				} else {
				  var val = i;
				}
				widget.append($("<option>", {
				  value: val,
				  text: labels[i]
				}));
			  };
			  widget.data("next_vals", next_vals);
			  widget.val(value);
			  widget.on('change', function(event, ui) {
				if (dynamic) {
				  var dim_val = parseInt(this.value);
				} else {
				  var dim_val = $.data(this, 'values')[this.value];
				}
				var next_vals = $.data(this, "next_vals");
				if (Object.keys(next_vals).length > 0) {
				  var new_vals = next_vals[dim_val];
				  var next_widget = $('#_anim_widget'+id+'_'+next_dim);
				  update_widget(next_widget, new_vals);
				}
				var widgets = HoloViews.index[plot_id]
				if (widgets) {
				  widgets.set_frame(dim_val, dim_idx);
				}
			  });
			}


			if (window.HoloViews === undefined) {
			  window.HoloViews = {}
			  window.PyViz = window.HoloViews
			} else if (window.PyViz === undefined) {
			  window.PyViz = window.HoloViews
			}


			var _namespace = {
			  init_slider: init_slider,
			  init_dropdown: init_dropdown,
			  comms: {},
			  comm_status: {},
			  index: {},
			  plot_index: {},
			  kernels: {},
			  receivers: {}
			}

			for (var k in _namespace) {
			  if (!(k in window.HoloViews)) {
				window.HoloViews[k] = _namespace[k];
			  }
			}

			// Define Bokeh specific subclasses
			function BokehSelectionWidget() {
			  SelectionWidget.apply(this, arguments);
			}

			function BokehScrubberWidget() {
			  ScrubberWidget.apply(this, arguments);
			}

			// Let them inherit from the baseclasses
			BokehSelectionWidget.prototype = Object.create(SelectionWidget.prototype);
			BokehScrubberWidget.prototype = Object.create(ScrubberWidget.prototype);

			// Define methods to override on widgets
			var BokehMethods = {
			  update_cache : function(){
				for (var index in this.frames) {
				  this.frames[index] = JSON.parse(this.frames[index]);
				}
			  },
			  update : function(current){
				if (current === undefined) {
				  return;
				}
				var data = this.frames[current];
				if (data !== undefined) {
				  if (data.root in HoloViews.plot_index) {
					var doc = HoloViews.plot_index[data.root].model.document;
				  } else {
					var doc = Bokeh.index[data.root].model.document;
				  }
				  doc.apply_json_patch(data.content);
				}
			  },
			  init_comms: function() {
				if (Bokeh.protocol !== undefined) {
				  this.receiver = new Bokeh.protocol.Receiver()
				} else {
				  this.receiver = null;
				}
				return HoloViewsWidget.prototype.init_comms.call(this);
			  },
			  process_msg : function(msg) {
				if (this.plot_id in HoloViews.plot_index) {
				  var doc = HoloViews.plot_index[this.plot_id].model.document;
				} else {
				  var doc = Bokeh.index[this.plot_id].model.document;
				}
				if (this.receiver === null) { return }
				var receiver = this.receiver;
				if (msg.buffers.length > 0) {
				  receiver.consume(msg.buffers[0].buffer)
				} else {
				  receiver.consume(msg.content.data)
				}
				const comm_msg = receiver.message;
				if ((comm_msg != null) && (doc != null)) {
				  doc.apply_json_patch(comm_msg.content, comm_msg.buffers)
				}
			  }
			}

			// Extend Bokeh widgets with backend specific methods
			extend(BokehSelectionWidget.prototype, BokehMethods);
			extend(BokehScrubberWidget.prototype, BokehMethods);

			window.HoloViews.BokehSelectionWidget = BokehSelectionWidget
			window.HoloViews.BokehScrubberWidget = BokehScrubberWidget

			// Define MPL specific subclasses
			function MPLSelectionWidget() {
			  SelectionWidget.apply(this, arguments);
			}

			function MPLScrubberWidget() {
			  ScrubberWidget.apply(this, arguments);
			}

			// Let them inherit from the baseclasses
			MPLSelectionWidget.prototype = Object.create(SelectionWidget.prototype);
			MPLScrubberWidget.prototype = Object.create(ScrubberWidget.prototype);

			// Define methods to override on widgets
			var MPLMethods = {
			  init_slider : function(init_val){
				if(this.load_json) {
				  this.from_json()
				} else {
				  this.update_cache();
				}
				if (this.dynamic | !this.cached | (this.current_vals === undefined)) {
				  this.update(0)
				} else {
				  this.set_frame(this.current_vals[0], 0)
				}
			  },
			  process_msg : function(msg) {
				var data = msg.content.data;
				this.frames[this.current] = data;
				this.update_cache(true);
				this.update(this.current);
			  }
			}
			// Extend MPL widgets with backend specific methods
			extend(MPLSelectionWidget.prototype, MPLMethods);
			extend(MPLScrubberWidget.prototype, MPLMethods);

			window.HoloViews.MPLSelectionWidget = MPLSelectionWidget
			window.HoloViews.MPLScrubberWidget = MPLScrubberWidget
			</script>
			<script type="text/javascript">
				function JupyterCommManager() {
				}

				JupyterCommManager.prototype.register_target = function(plot_id, comm_id, msg_handler) {
				  if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
					var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
					comm_manager.register_target(comm_id, function(comm) {
					  comm.on_msg(msg_handler);
					});
				  } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
					window.PyViz.kernels[plot_id].registerCommTarget(comm_id, function(comm) {
					  comm.onMsg = msg_handler;
					});
				  }
				}

				JupyterCommManager.prototype.get_client_comm = function(plot_id, comm_id, msg_handler) {
				  if (comm_id in window.PyViz.comms) {
					return window.PyViz.comms[comm_id];
				  } else if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
					var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
					var comm = comm_manager.new_comm(comm_id, {}, {}, {}, comm_id);
					if (msg_handler) {
					  comm.on_msg(msg_handler);
					}
				  } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
					var comm = window.PyViz.kernels[plot_id].connectToComm(comm_id);
					comm.open();
					if (msg_handler) {
					  comm.onMsg = msg_handler;
					}
				  }

				  window.PyViz.comms[comm_id] = comm;
				  return comm;
				}

				window.PyViz.comm_manager = new JupyterCommManager();
				</script>

			<link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-1.2.0.min.css">
			<link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-widgets-1.2.0.min.css">
			<link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-tables-1.2.0.min.css">
			<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
			<link rel="stylesheet" href="https://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
			<style>div.bk-hbox {
				display: flex;
				justify-content: center;
			}

			div.bk-hbox div.bk-plot {
				padding: 8px;
			}

			div.bk-hbox div.bk-data-table {
				padding: 20px;
			}

			div.hololayout {
			  display: flex;
			  align-items: center;
			  margin: 0;
			}

			div.holoframe {
			  width: 75%;
			}

			div.holowell {
			  display: flex;
			  align-items: center;
			}

			form.holoform {
			  background-color: #fafafa;
			  border-radius: 5px;
			  overflow: hidden;
			  padding-left: 0.8em;
			  padding-right: 0.8em;
			  padding-top: 0.4em;
			  padding-bottom: 0.4em;
			  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
			  margin-bottom: 20px;
			  border: 1px solid #e3e3e3;
			}

			div.holowidgets {
			  padding-right: 0;
			  width: 25%;
			}

			div.holoslider {
			  min-height: 0 !important;
			  height: 0.8em;
			  width: 100%;
			}

			div.holoformgroup {
			  padding-top: 0.5em;
			  margin-bottom: 0.5em;
			}

			div.hologroup {
			  padding-left: 0;
			  padding-right: 0.8em;
			  width: 100%;
			}

			.holoselect {
			  width: 92%;
			  margin-left: 0;
			  margin-right: 0;
			}

			.holotext {
			  padding-left:  0.5em;
			  padding-right: 0;
			  width: 100%;
			}

			.holowidgets .ui-resizable-se {
			  visibility: hidden
			}

			.holoframe > .ui-resizable-se {
			  visibility: hidden
			}

			.holowidgets .ui-resizable-s {
			  visibility: hidden
			}


			/* CSS rules for noUISlider based slider used by JupyterLab extension  */

			.noUi-handle {
			  width: 20px !important;
			  height: 20px !important;
			  left: -5px !important;
			  top: -5px !important;
			}

			.noUi-handle:before, .noUi-handle:after {
			  visibility: hidden;
			  height: 0px;
			}

			.noUi-target {
			  margin-left: 0.5em;
			  margin-right: 0.5em;
			}
			</style><div style='display: table; margin: 0 auto;'>






			  <div class="bk-root" id="90140fa2-e8cd-4a0c-b92f-77c83265b82e" data-root-id="10365"></div>

			<script type="text/javascript">
			  (function(root) {
			  function embed_document(root) {

			  var docs_json = {"018d500a-5f87-4f1b-95fe-1c4e2b3855ee":{"roots":{"references":[{"attributes":{"below":[{"id":"10374","type":"LinearAxis"}],"center":[{"id":"10378","type":"Grid"},{"id":"10383","type":"Grid"}],"left":[{"id":"10379","type":"LinearAxis"}],"margin":null,"min_border_bottom":10,"min_border_left":10,"min_border_right":10,"min_border_top":10,"plot_height":250,"plot_width":750,"renderers":[{"id":"10402","type":"GlyphRenderer"}],"sizing_mode":"fixed","title":{"id":"10366","type":"Title"},"toolbar":{"id":"10389","type":"Toolbar"},"x_range":{"id":"10362","type":"Range1d"},"x_scale":{"id":"10370","type":"LinearScale"},"y_range":{"id":"10363","type":"Range1d"},"y_scale":{"id":"10372","type":"LinearScale"}},"id":"10365","subtype":"Figure","type":"Plot"},{"attributes":{},"id":"10375","type":"BasicTicker"},{"attributes":{},"id":"10370","type":"LinearScale"},{"attributes":{"axis_label":"Beer per Brewery","bounds":"auto","formatter":{"id":"10405","type":"BasicTickFormatter"},"major_label_orientation":"horizontal","ticker":{"id":"10375","type":"BasicTicker"}},"id":"10374","type":"LinearAxis"},{"attributes":{},"id":"10405","type":"BasicTickFormatter"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_multi":null,"active_scroll":"auto","active_tap":"auto","tools":[{"id":"10364","type":"HoverTool"},{"id":"10384","type":"SaveTool"},{"id":"10385","type":"PanTool"},{"id":"10386","type":"WheelZoomTool"},{"id":"10387","type":"BoxZoomTool"},{"id":"10388","type":"ResetTool"}]},"id":"10389","type":"Toolbar"},{"attributes":{},"id":"10372","type":"LinearScale"},{"attributes":{"callback":null,"data":{"Frequency":[1621,280,306,75,64,80,23,39,12,15,18,3,11,8,1,11,2,6,2,6],"left":{"__ndarray__":"AAAAAAAA8D8zMzMzMzMDQGZmZmZmZg5AzMzMzMzMFEBmZmZmZmYaQAAAAAAAACBAzMzMzMzMIkCZmZmZmZklQGZmZmZmZihAMzMzMzMzK0AAAAAAAAAuQGZmZmZmZjBAzMzMzMzMMUAzMzMzMzMzQJmZmZmZmTRAAAAAAAAANkBmZmZmZmY3QMzMzMzMzDhAMzMzMzMzOkCZmZmZmZk7QA==","dtype":"float64","shape":[20]},"right":{"__ndarray__":"MzMzMzMzA0BmZmZmZmYOQMzMzMzMzBRAZmZmZmZmGkAAAAAAAAAgQMzMzMzMzCJAmZmZmZmZJUBmZmZmZmYoQDMzMzMzMytAAAAAAAAALkBmZmZmZmYwQMzMzMzMzDFAMzMzMzMzM0CZmZmZmZk0QAAAAAAAADZAZmZmZmZmN0DMzMzMzMw4QDMzMzMzMzpAmZmZmZmZO0AAAAAAAAA9QA==","dtype":"float64","shape":[20]},"top":[1621,280,306,75,64,80,23,39,12,15,18,3,11,8,1,11,2,6,2,6],"x":{"__ndarray__":"MzMzMzMz+z/MzMzMzMwIQAAAAAAAABJAmZmZmZmZF0AzMzMzMzMdQGZmZmZmZiFAMjMzMzMzJEAAAAAAAAAnQMzMzMzMzClAmpmZmZmZLEBmZmZmZmYvQJmZmZmZGTFAAAAAAACAMkBmZmZmZuYzQMzMzMzMTDVAMzMzMzOzNkCZmZmZmRk4QAAAAAAAgDlAZmZmZmbmOkDMzMzMzEw8QA==","dtype":"float64","shape":[20]}},"selected":{"id":"10397","type":"Selection"},"selection_policy":{"id":"10414","type":"UnionRenderers"}},"id":"10396","type":"ColumnDataSource"},{"attributes":{"dimension":1,"grid_line_color":null,"ticker":{"id":"10380","type":"BasicTicker"}},"id":"10383","type":"Grid"},{"attributes":{"bottom_units":"screen","fill_alpha":{"value":0.5},"fill_color":{"value":"lightgrey"},"left_units":"screen","level":"overlay","line_alpha":{"value":1.0},"line_color":{"value":"black"},"line_dash":[4,4],"line_width":{"value":2},"render_mode":"css","right_units":"screen","top_units":"screen"},"id":"10415","type":"BoxAnnotation"},{"attributes":{"bottom":{"value":0},"fill_color":{"value":"#30a2da"},"left":{"field":"left"},"right":{"field":"right"},"top":{"field":"top"}},"id":"10399","type":"Quad"},{"attributes":{},"id":"10397","type":"Selection"},{"attributes":{"callback":null,"end":29.0,"reset_end":29.0,"reset_start":1.0,"start":1.0,"tags":[[["x","x",null]]]},"id":"10362","type":"Range1d"},{"attributes":{"bottom":{"value":0},"fill_alpha":{"value":0.2},"fill_color":{"value":"#30a2da"},"left":{"field":"left"},"line_alpha":{"value":0.2},"line_color":{"value":"black"},"right":{"field":"right"},"top":{"field":"top"}},"id":"10401","type":"Quad"},{"attributes":{},"id":"10384","type":"SaveTool"},{"attributes":{},"id":"10407","type":"BasicTickFormatter"},{"attributes":{},"id":"10414","type":"UnionRenderers"},{"attributes":{"data_source":{"id":"10396","type":"ColumnDataSource"},"glyph":{"id":"10399","type":"Quad"},"hover_glyph":null,"muted_glyph":{"id":"10401","type":"Quad"},"nonselection_glyph":{"id":"10400","type":"Quad"},"selection_glyph":null,"view":{"id":"10403","type":"CDSView"}},"id":"10402","type":"GlyphRenderer"},{"attributes":{"bottom":{"value":0},"fill_alpha":{"value":0.1},"fill_color":{"value":"#30a2da"},"left":{"field":"left"},"line_alpha":{"value":0.1},"line_color":{"value":"black"},"right":{"field":"right"},"top":{"field":"top"}},"id":"10400","type":"Quad"},{"attributes":{"grid_line_color":null,"ticker":{"id":"10375","type":"BasicTicker"}},"id":"10378","type":"Grid"},{"attributes":{"callback":null,"end":1621.0,"reset_end":1621.0,"reset_start":0.0,"tags":[[["Frequency","Frequency",null]]]},"id":"10363","type":"Range1d"},{"attributes":{},"id":"10386","type":"WheelZoomTool"},{"attributes":{"text":"Beers per Brewery","text_color":{"value":"black"},"text_font_size":{"value":"12pt"}},"id":"10366","type":"Title"},{"attributes":{},"id":"10388","type":"ResetTool"},{"attributes":{"axis_label":"Freq","bounds":"auto","formatter":{"id":"10407","type":"BasicTickFormatter"},"major_label_orientation":"horizontal","ticker":{"id":"10380","type":"BasicTicker"}},"id":"10379","type":"LinearAxis"},{"attributes":{"source":{"id":"10396","type":"ColumnDataSource"}},"id":"10403","type":"CDSView"},{"attributes":{"overlay":{"id":"10415","type":"BoxAnnotation"}},"id":"10387","type":"BoxZoomTool"},{"attributes":{},"id":"10380","type":"BasicTicker"},{"attributes":{},"id":"10385","type":"PanTool"},{"attributes":{"callback":null,"renderers":[{"id":"10402","type":"GlyphRenderer"}],"tags":["hv_created"],"tooltips":[["x","@{x}"],["Frequency","@{Frequency}"]]},"id":"10364","type":"HoverTool"}],"root_ids":["10365"]},"title":"Bokeh Application","version":"1.2.0"}};
			  var render_items = [{"docid":"018d500a-5f87-4f1b-95fe-1c4e2b3855ee","roots":{"10365":"90140fa2-e8cd-4a0c-b92f-77c83265b82e"}}];
			  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);

			  }
			  if (root.Bokeh !== undefined) {
				embed_document(root);
			  } else {
				var attempts = 0;
				var timer = setInterval(function(root) {
				  if (root.Bokeh !== undefined) {
					embed_document(root);
					clearInterval(timer);
				  }
				  attempts++;
				  if (attempts > 100) {
					console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
					clearInterval(timer);
				  }
				}, 10, root)
			  }
			})(window);
			</script>
			</div>
	</div>

	<p>
		Before getting to the clustering and predictive models, I'll spend a bit of time
		describing the data I collected. Let's start by taking a look the beers. There are 9248
		beers from 2604 breweries. The most represented brewery is
		<a href="https://www.beeradvocate.com/beer/profile/30654/">Trillium Brewing Company</a> with 83
		beers. However, this is an incredible outlier. The mean number of beers per brewery is only ~4.
	</p>

	<!-- Beers per Style Histogram -->
	<div>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-widgets-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-tables-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-gl-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://code.jquery.com/jquery-2.1.4.min.js" type="text/javascript"></script>
			<script src="https://code.jquery.com/ui/1.10.4/jquery-ui.min.js" type="text/javascript"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.20/require.min.js" type="text/javascript"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js" type="text/javascript"></script>
			<script type="text/javascript">function HoloViewsWidget() {
			}

			HoloViewsWidget.prototype.init_slider = function(init_val){
			  if(this.load_json) {
				this.from_json()
			  } else {
				this.update_cache();
			  }
			}

			HoloViewsWidget.prototype.populate_cache = function(idx){
			  this.cache[idx].innerHTML = this.frames[idx];
			  if (this.embed) {
				delete this.frames[idx];
			  }
			}

			HoloViewsWidget.prototype.process_error = function(msg){
			}

			HoloViewsWidget.prototype.from_json = function() {
			  var data_url = this.json_path + this.id + '.json';
			  $.getJSON(data_url, $.proxy(function(json_data) {
				this.frames = json_data;
				this.update_cache();
				this.update(0);
			  }, this));
			}

			HoloViewsWidget.prototype.dynamic_update = function(current){
			  if (current === undefined) {
				return
			  }
			  this.current = current;
			  if (this.comm) {
				var msg = {comm_id: this.id+'_client', content: current}
				this.comm.send(msg);
			  }
			}

			HoloViewsWidget.prototype.update_cache = function(force){
			  var frame_len = Object.keys(this.frames).length;
			  for (var i=0; i<frame_len; i++) {
				if(!this.load_json || this.dynamic)  {
				  var frame = Object.keys(this.frames)[i];
				} else {
				  var frame = i;
				}
				if(!(frame in this.cache) || force) {
				  if ((frame in this.cache) && force) { this.cache[frame].remove() }
				  var div = document.createElement("div");
				  var parent = document.getElementById("_anim_img"+this.id);
				  div.style.display = "none";
				  parent.appendChild(div)
				  this.cache[frame] = div;
				  var cache_id = "_anim_img"+this.id+"_"+frame;
				  this.populate_cache(frame);
				}
			  }
			}

			HoloViewsWidget.prototype.update = function(current){
			  if(current in this.cache) {
				for (var index in this.cache) {
				  this.cache[index].style.display = "none";
				}
				this.cache[current].style.display = "";
				this.wait = false;
			  }
			}

			HoloViewsWidget.prototype.init_comms = function() {
			  var that = this
			  HoloViews.comm_manager.register_target(this.plot_id, this.id, function (msg) { that.msg_handler(msg) })
			  if (!this.cached || this.dynamic) {
				function ack_callback(msg) {
				  var msg = msg.metadata;
				  var comm_id = msg.comm_id;
				  var comm_status = HoloViews.comm_status[comm_id];
				  if (that.queue.length > 0) {
					that.time = Date.now();
					that.dynamic_update(that.queue[that.queue.length-1]);
					that.queue = [];
				  } else {
					that.wait = false;
				  }
				  if ((msg.msg_type == "Ready") && msg.content) {
					console.log("Python callback returned following output:", msg.content);
				  } else if (msg.msg_type == "Error") {
					console.log("Python failed with the following traceback:", msg.traceback)
				  }
				}
				var comm = HoloViews.comm_manager.get_client_comm(this.plot_id, this.id+'_client', ack_callback);
				return comm
			  }
			}

			HoloViewsWidget.prototype.msg_handler = function(msg) {
			  var metadata = msg.metadata;
			  if ((metadata.msg_type == "Ready")) {
				if (metadata.content) {
				  console.log("Python callback returned following output:", metadata.content);
				}
			  return;
			  } else if (metadata.msg_type == "Error") {
				console.log("Python failed with the following traceback:", metadata.traceback)
				return
			  }
			  this.process_msg(msg)
			}

			HoloViewsWidget.prototype.process_msg = function(msg) {
			}

			function SelectionWidget(frames, id, slider_ids, keyMap, dim_vals, notFound, load_json, mode, cached, json_path, dynamic, plot_id){
			  this.frames = frames;
			  this.id = id;
			  this.plot_id = plot_id;
			  this.slider_ids = slider_ids;
			  this.keyMap = keyMap
			  this.current_frame = 0;
			  this.current_vals = dim_vals;
			  this.load_json = load_json;
			  this.mode = mode;
			  this.notFound = notFound;
			  this.cached = cached;
			  this.dynamic = dynamic;
			  this.cache = {};
			  this.json_path = json_path;
			  this.init_slider(this.current_vals[0]);
			  this.queue = [];
			  this.wait = false;
			  if (!this.cached || this.dynamic) {
				this.comm = this.init_comms();
			  }
			}

			SelectionWidget.prototype = new HoloViewsWidget;


			SelectionWidget.prototype.get_key = function(current_vals) {
			  var key = "(";
			  for (var i=0; i<this.slider_ids.length; i++)
			  {
				var val = this.current_vals[i];
				if (!(typeof val === 'string')) {
				  if (val % 1 === 0) { val = val.toFixed(1); }
				  else { val = val.toFixed(10); val = val.slice(0, val.length-1);}
				}
				key += "'" + val + "'";
				if(i != this.slider_ids.length-1) { key += ', ';}
				else if(this.slider_ids.length == 1) { key += ',';}
			  }
			  key += ")";
			  return this.keyMap[key];
			}

			SelectionWidget.prototype.set_frame = function(dim_val, dim_idx){
			  this.current_vals[dim_idx] = dim_val;
			  var key = this.current_vals;
			  if (!this.dynamic) {
				key = this.get_key(key)
			  }
			  if (this.dynamic || !this.cached) {
				if ((this.time !== undefined) && ((this.wait) && ((this.time + 10000) > Date.now()))) {
				  this.queue.push(key);
				  return
				}
				this.queue = [];
				this.time = Date.now();
				this.current_frame = key;
				this.wait = true;
				this.dynamic_update(key)
			  } else if (key !== undefined) {
				this.update(key)
			  }
			}


			/* Define the ScrubberWidget class */
			function ScrubberWidget(frames, num_frames, id, interval, load_json, mode, cached, json_path, dynamic, plot_id){
			  this.slider_id = "_anim_slider" + id;
			  this.loop_select_id = "_anim_loop_select" + id;
			  this.id = id;
			  this.plot_id = plot_id;
			  this.interval = interval;
			  this.current_frame = 0;
			  this.direction = 0;
			  this.dynamic = dynamic;
			  this.timer = null;
			  this.load_json = load_json;
			  this.mode = mode;
			  this.cached = cached;
			  this.frames = frames;
			  this.cache = {};
			  this.length = num_frames;
			  this.json_path = json_path;
			  document.getElementById(this.slider_id).max = this.length - 1;
			  this.init_slider(0);
			  this.wait = false;
			  this.queue = [];
			  if (!this.cached || this.dynamic) {
				this.comm = this.init_comms()
			  }
			}

			ScrubberWidget.prototype = new HoloViewsWidget;

			ScrubberWidget.prototype.set_frame = function(frame){
			  this.current_frame = frame;
			  var widget = document.getElementById(this.slider_id);
			  if (widget === null) {
				this.pause_animation();
				return
			  }
			  widget.value = this.current_frame;
			  if (this.dynamic || !this.cached) {
				if ((this.time !== undefined) && ((this.wait) && ((this.time + 10000) > Date.now()))) {
				  this.queue.push(frame);
				  return
				}
				this.queue = [];
				this.time = Date.now();
				this.wait = true;
				this.dynamic_update(frame)
			  } else {
				this.update(frame)
			  }
			}

			ScrubberWidget.prototype.get_loop_state = function(){
			  var button_group = document[this.loop_select_id].state;
			  for (var i = 0; i < button_group.length; i++) {
				var button = button_group[i];
				if (button.checked) {
				  return button.value;
				}
			  }
			  return undefined;
			}


			ScrubberWidget.prototype.next_frame = function() {
			  this.set_frame(Math.min(this.length - 1, this.current_frame + 1));
			}

			ScrubberWidget.prototype.previous_frame = function() {
			  this.set_frame(Math.max(0, this.current_frame - 1));
			}

			ScrubberWidget.prototype.first_frame = function() {
			  this.set_frame(0);
			}

			ScrubberWidget.prototype.last_frame = function() {
			  this.set_frame(this.length - 1);
			}

			ScrubberWidget.prototype.slower = function() {
			  this.interval /= 0.7;
			  if(this.direction > 0){this.play_animation();}
			  else if(this.direction < 0){this.reverse_animation();}
			}

			ScrubberWidget.prototype.faster = function() {
			  this.interval *= 0.7;
			  if(this.direction > 0){this.play_animation();}
			  else if(this.direction < 0){this.reverse_animation();}
			}

			ScrubberWidget.prototype.anim_step_forward = function() {
			  if(this.current_frame < this.length - 1){
				this.next_frame();
			  }else{
				var loop_state = this.get_loop_state();
				if(loop_state == "loop"){
				  this.first_frame();
				}else if(loop_state == "reflect"){
				  this.last_frame();
				  this.reverse_animation();
				}else{
				  this.pause_animation();
				  this.last_frame();
				}
			  }
			}

			ScrubberWidget.prototype.anim_step_reverse = function() {
			  if(this.current_frame > 0){
				this.previous_frame();
			  } else {
				var loop_state = this.get_loop_state();
				if(loop_state == "loop"){
				  this.last_frame();
				}else if(loop_state == "reflect"){
				  this.first_frame();
				  this.play_animation();
				}else{
				  this.pause_animation();
				  this.first_frame();
				}
			  }
			}

			ScrubberWidget.prototype.pause_animation = function() {
			  this.direction = 0;
			  if (this.timer){
				clearInterval(this.timer);
				this.timer = null;
			  }
			}

			ScrubberWidget.prototype.play_animation = function() {
			  this.pause_animation();
			  this.direction = 1;
			  var t = this;
			  if (!this.timer) this.timer = setInterval(function(){t.anim_step_forward();}, this.interval);
			}

			ScrubberWidget.prototype.reverse_animation = function() {
			  this.pause_animation();
			  this.direction = -1;
			  var t = this;
			  if (!this.timer) this.timer = setInterval(function(){t.anim_step_reverse();}, this.interval);
			}

			function extend(destination, source) {
			  for (var k in source) {
				if (source.hasOwnProperty(k)) {
				  destination[k] = source[k];
				}
			  }
			  return destination;
			}

			function update_widget(widget, values) {
			  if (widget.hasClass("ui-slider")) {
				widget.slider('option', {
				  min: 0,
				  max: values.length-1,
				  dim_vals: values,
				  value: 0,
				  dim_labels: values
				})
				widget.slider('option', 'slide').call(widget, event, {value: 0})
			  } else {
				widget.empty();
				for (var i=0; i<values.length; i++){
				  widget.append($("<option>", {
					value: i,
					text: values[i]
				  }))
				};
				widget.data('values', values);
				widget.data('value', 0);
				widget.trigger("change");
			  };
			}

			function init_slider(id, plot_id, dim, values, next_vals, labels, dynamic, step, value, next_dim,
								dim_idx, delay, jQueryUI_CDN, UNDERSCORE_CDN) {
			  // Slider JS Block START
			  function loadcssfile(filename){
				var fileref=document.createElement("link")
				fileref.setAttribute("rel", "stylesheet")
				fileref.setAttribute("type", "text/css")
				fileref.setAttribute("href", filename)
				document.getElementsByTagName("head")[0].appendChild(fileref)
			  }
			  loadcssfile("https://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css");
			  /* Check if jQuery and jQueryUI have been loaded
				otherwise load with require.js */
			  var jQuery = window.jQuery,
				// check for old versions of jQuery
				oldjQuery = jQuery && !!jQuery.fn.jquery.match(/^1\.[0-4](\.|$)/),
				jquery_path = '',
				paths = {},
				noConflict;
			  var jQueryUI = jQuery.ui;
			  // check for jQuery
			  if (!jQuery || oldjQuery) {
				// load if it's not available or doesn't meet min standards
				paths.jQuery = jQuery;
				noConflict = !!oldjQuery;
			  } else {
				// register the current jQuery
				define('jquery', [], function() { return jQuery; });
			  }
			  if (!jQueryUI) {
				paths.jQueryUI = jQueryUI_CDN.slice(null, -3);
			  } else {
				define('jQueryUI', [], function() { return jQuery.ui; });
			  }
			  paths.underscore = UNDERSCORE_CDN.slice(null, -3);
			  var jquery_require = {
				paths: paths,
				shim: {
				  "jQueryUI": {
					exports:"$",
					deps: ['jquery']
				  },
				  "underscore": {
					exports: '_'
				  }
				}
			  }
			  require.config(jquery_require);
			  require(["jQueryUI", "underscore"], function(jUI, _){
				if (noConflict) $.noConflict(true);
				var vals = values;
				if (dynamic && vals.constructor === Array) {
				  var default_value = parseFloat(value);
				  var min = parseFloat(vals[0]);
				  var max = parseFloat(vals[vals.length-1]);
				  var wstep = step;
				  var wlabels = [default_value];
				  var init_label = default_value;
				} else {
				  var min = 0;
				  if (dynamic) {
					var max = Object.keys(vals).length - 1;
					var init_label = labels[value];
					var default_value = values[value];
				  } else {
					var max = vals.length - 1;
					var init_label = labels[value];
					var default_value = value;
				  }
				  var wstep = 1;
				  var wlabels = labels;
				}
				function adjustFontSize(text) {
				  var width_ratio = (text.parent().width()/8)/text.val().length;
				  var size = Math.min(0.9, Math.max(0.6, width_ratio))+'em';
				  text.css('font-size', size);
				}
				var slider = $('#_anim_widget'+id+'_'+dim);
				slider.slider({
				  animate: "fast",
				  min: min,
				  max: max,
				  step: wstep,
				  value: default_value,
				  dim_vals: vals,
				  dim_labels: wlabels,
				  next_vals: next_vals,
				  slide: function(event, ui) {
					var vals = slider.slider("option", "dim_vals");
					var next_vals = slider.slider("option", "next_vals");
					var dlabels = slider.slider("option", "dim_labels");
					if (dynamic) {
					  var dim_val = ui.value;
					  if (vals.constructor === Array) {
						var label = ui.value;
					  } else {
						var label = dlabels[ui.value];
					  }
					} else {
					  var dim_val = vals[ui.value];
					  var label = dlabels[ui.value];
					}
					var text = $('#textInput'+id+'_'+dim);
					text.val(label);
					adjustFontSize(text);
					HoloViews.index[plot_id].set_frame(dim_val, dim_idx);
					if (Object.keys(next_vals).length > 0) {
					  var new_vals = next_vals[dim_val];
					  var next_widget = $('#_anim_widget'+id+'_'+next_dim);
					  update_widget(next_widget, new_vals);
					}
				  }
				});
				slider.keypress(function(event) {
				  if (event.which == 80 || event.which == 112) {
					var start = slider.slider("option", "value");
					var stop =  slider.slider("option", "max");
					for (var i=start; i<=stop; i++) {
					  var delay = i*delay;
					  $.proxy(function doSetTimeout(i) { setTimeout($.proxy(function() {
						var val = {value:i};
						slider.slider('value',i);
						slider.slider("option", "slide")(null, val);
					  }, slider), delay);}, slider)(i);
					}
				  }
				  if (event.which == 82 || event.which == 114) {
					var start = slider.slider("option", "value");
					var stop =  slider.slider("option", "min");
					var count = 0;
					for (var i=start; i>=stop; i--) {
					  var delay = count*delay;
					  count = count + 1;
					  $.proxy(function doSetTimeout(i) { setTimeout($.proxy(function() {
						var val = {value:i};
						slider.slider('value',i);
						slider.slider("option", "slide")(null, val);
					  }, slider), delay);}, slider)(i);
					}
				  }
				});
				var textInput = $('#textInput'+id+'_'+dim)
				textInput.val(init_label);
				adjustFontSize(textInput);
			  });
			}

			function init_dropdown(id, plot_id, dim, vals, value, next_vals, labels, next_dim, dim_idx, dynamic) {
			  var widget = $("#_anim_widget"+id+'_'+dim);
			  widget.data('values', vals)
			  for (var i=0; i<vals.length; i++){
				if (dynamic) {
				  var val = vals[i];
				} else {
				  var val = i;
				}
				widget.append($("<option>", {
				  value: val,
				  text: labels[i]
				}));
			  };
			  widget.data("next_vals", next_vals);
			  widget.val(value);
			  widget.on('change', function(event, ui) {
				if (dynamic) {
				  var dim_val = parseInt(this.value);
				} else {
				  var dim_val = $.data(this, 'values')[this.value];
				}
				var next_vals = $.data(this, "next_vals");
				if (Object.keys(next_vals).length > 0) {
				  var new_vals = next_vals[dim_val];
				  var next_widget = $('#_anim_widget'+id+'_'+next_dim);
				  update_widget(next_widget, new_vals);
				}
				var widgets = HoloViews.index[plot_id]
				if (widgets) {
				  widgets.set_frame(dim_val, dim_idx);
				}
			  });
			}


			if (window.HoloViews === undefined) {
			  window.HoloViews = {}
			  window.PyViz = window.HoloViews
			} else if (window.PyViz === undefined) {
			  window.PyViz = window.HoloViews
			}


			var _namespace = {
			  init_slider: init_slider,
			  init_dropdown: init_dropdown,
			  comms: {},
			  comm_status: {},
			  index: {},
			  plot_index: {},
			  kernels: {},
			  receivers: {}
			}

			for (var k in _namespace) {
			  if (!(k in window.HoloViews)) {
				window.HoloViews[k] = _namespace[k];
			  }
			}

			// Define Bokeh specific subclasses
			function BokehSelectionWidget() {
			  SelectionWidget.apply(this, arguments);
			}

			function BokehScrubberWidget() {
			  ScrubberWidget.apply(this, arguments);
			}

			// Let them inherit from the baseclasses
			BokehSelectionWidget.prototype = Object.create(SelectionWidget.prototype);
			BokehScrubberWidget.prototype = Object.create(ScrubberWidget.prototype);

			// Define methods to override on widgets
			var BokehMethods = {
			  update_cache : function(){
				for (var index in this.frames) {
				  this.frames[index] = JSON.parse(this.frames[index]);
				}
			  },
			  update : function(current){
				if (current === undefined) {
				  return;
				}
				var data = this.frames[current];
				if (data !== undefined) {
				  if (data.root in HoloViews.plot_index) {
					var doc = HoloViews.plot_index[data.root].model.document;
				  } else {
					var doc = Bokeh.index[data.root].model.document;
				  }
				  doc.apply_json_patch(data.content);
				}
			  },
			  init_comms: function() {
				if (Bokeh.protocol !== undefined) {
				  this.receiver = new Bokeh.protocol.Receiver()
				} else {
				  this.receiver = null;
				}
				return HoloViewsWidget.prototype.init_comms.call(this);
			  },
			  process_msg : function(msg) {
				if (this.plot_id in HoloViews.plot_index) {
				  var doc = HoloViews.plot_index[this.plot_id].model.document;
				} else {
				  var doc = Bokeh.index[this.plot_id].model.document;
				}
				if (this.receiver === null) { return }
				var receiver = this.receiver;
				if (msg.buffers.length > 0) {
				  receiver.consume(msg.buffers[0].buffer)
				} else {
				  receiver.consume(msg.content.data)
				}
				const comm_msg = receiver.message;
				if ((comm_msg != null) && (doc != null)) {
				  doc.apply_json_patch(comm_msg.content, comm_msg.buffers)
				}
			  }
			}

			// Extend Bokeh widgets with backend specific methods
			extend(BokehSelectionWidget.prototype, BokehMethods);
			extend(BokehScrubberWidget.prototype, BokehMethods);

			window.HoloViews.BokehSelectionWidget = BokehSelectionWidget
			window.HoloViews.BokehScrubberWidget = BokehScrubberWidget

			// Define MPL specific subclasses
			function MPLSelectionWidget() {
			  SelectionWidget.apply(this, arguments);
			}

			function MPLScrubberWidget() {
			  ScrubberWidget.apply(this, arguments);
			}

			// Let them inherit from the baseclasses
			MPLSelectionWidget.prototype = Object.create(SelectionWidget.prototype);
			MPLScrubberWidget.prototype = Object.create(ScrubberWidget.prototype);

			// Define methods to override on widgets
			var MPLMethods = {
			  init_slider : function(init_val){
				if(this.load_json) {
				  this.from_json()
				} else {
				  this.update_cache();
				}
				if (this.dynamic | !this.cached | (this.current_vals === undefined)) {
				  this.update(0)
				} else {
				  this.set_frame(this.current_vals[0], 0)
				}
			  },
			  process_msg : function(msg) {
				var data = msg.content.data;
				this.frames[this.current] = data;
				this.update_cache(true);
				this.update(this.current);
			  }
			}
			// Extend MPL widgets with backend specific methods
			extend(MPLSelectionWidget.prototype, MPLMethods);
			extend(MPLScrubberWidget.prototype, MPLMethods);

			window.HoloViews.MPLSelectionWidget = MPLSelectionWidget
			window.HoloViews.MPLScrubberWidget = MPLScrubberWidget
			</script>
			<script type="text/javascript">
				function JupyterCommManager() {
				}

				JupyterCommManager.prototype.register_target = function(plot_id, comm_id, msg_handler) {
				  if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
					var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
					comm_manager.register_target(comm_id, function(comm) {
					  comm.on_msg(msg_handler);
					});
				  } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
					window.PyViz.kernels[plot_id].registerCommTarget(comm_id, function(comm) {
					  comm.onMsg = msg_handler;
					});
				  }
				}

				JupyterCommManager.prototype.get_client_comm = function(plot_id, comm_id, msg_handler) {
				  if (comm_id in window.PyViz.comms) {
					return window.PyViz.comms[comm_id];
				  } else if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
					var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
					var comm = comm_manager.new_comm(comm_id, {}, {}, {}, comm_id);
					if (msg_handler) {
					  comm.on_msg(msg_handler);
					}
				  } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
					var comm = window.PyViz.kernels[plot_id].connectToComm(comm_id);
					comm.open();
					if (msg_handler) {
					  comm.onMsg = msg_handler;
					}
				  }

				  window.PyViz.comms[comm_id] = comm;
				  return comm;
				}

				window.PyViz.comm_manager = new JupyterCommManager();
				</script>

			<link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-1.2.0.min.css">
			<link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-widgets-1.2.0.min.css">
			<link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-tables-1.2.0.min.css">
			<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
			<link rel="stylesheet" href="https://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
			<style>div.bk-hbox {
				display: flex;
				justify-content: center;
			}

			div.bk-hbox div.bk-plot {
				padding: 8px;
			}

			div.bk-hbox div.bk-data-table {
				padding: 20px;
			}

			div.hololayout {
			  display: flex;
			  align-items: center;
			  margin: 0;
			}

			div.holoframe {
			  width: 75%;
			}

			div.holowell {
			  display: flex;
			  align-items: center;
			}

			form.holoform {
			  background-color: #fafafa;
			  border-radius: 5px;
			  overflow: hidden;
			  padding-left: 0.8em;
			  padding-right: 0.8em;
			  padding-top: 0.4em;
			  padding-bottom: 0.4em;
			  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
			  margin-bottom: 20px;
			  border: 1px solid #e3e3e3;
			}

			div.holowidgets {
			  padding-right: 0;
			  width: 25%;
			}

			div.holoslider {
			  min-height: 0 !important;
			  height: 0.8em;
			  width: 100%;
			}

			div.holoformgroup {
			  padding-top: 0.5em;
			  margin-bottom: 0.5em;
			}

			div.hologroup {
			  padding-left: 0;
			  padding-right: 0.8em;
			  width: 100%;
			}

			.holoselect {
			  width: 92%;
			  margin-left: 0;
			  margin-right: 0;
			}

			.holotext {
			  padding-left:  0.5em;
			  padding-right: 0;
			  width: 100%;
			}

			.holowidgets .ui-resizable-se {
			  visibility: hidden
			}

			.holoframe > .ui-resizable-se {
			  visibility: hidden
			}

			.holowidgets .ui-resizable-s {
			  visibility: hidden
			}


			/* CSS rules for noUISlider based slider used by JupyterLab extension  */

			.noUi-handle {
			  width: 20px !important;
			  height: 20px !important;
			  left: -5px !important;
			  top: -5px !important;
			}

			.noUi-handle:before, .noUi-handle:after {
			  visibility: hidden;
			  height: 0px;
			}

			.noUi-target {
			  margin-left: 0.5em;
			  margin-right: 0.5em;
			}
			</style><div style='display: table; margin: 0 auto;'>






			  <div class="bk-root" id="d7e14466-e23d-4b72-9597-f31ca31543bb" data-root-id="9045"></div>

			<script type="text/javascript">
			  (function(root) {
			  function embed_document(root) {

			  var docs_json = {"adf3c18c-20f4-41b6-9810-18649c990346":{"roots":{"references":[{"attributes":{"below":[{"id":"9054","type":"LinearAxis"}],"center":[{"id":"9058","type":"Grid"},{"id":"9063","type":"Grid"}],"left":[{"id":"9059","type":"LinearAxis"}],"margin":null,"min_border_bottom":10,"min_border_left":10,"min_border_right":10,"min_border_top":10,"plot_height":250,"plot_width":750,"renderers":[{"id":"9082","type":"GlyphRenderer"}],"sizing_mode":"fixed","title":{"id":"9046","type":"Title"},"toolbar":{"id":"9069","type":"Toolbar"},"x_range":{"id":"9042","type":"Range1d"},"x_scale":{"id":"9050","type":"LinearScale"},"y_range":{"id":"9043","type":"Range1d"},"y_scale":{"id":"9052","type":"LinearScale"}},"id":"9045","subtype":"Figure","type":"Plot"},{"attributes":{"bottom_units":"screen","fill_alpha":{"value":0.5},"fill_color":{"value":"lightgrey"},"left_units":"screen","level":"overlay","line_alpha":{"value":1.0},"line_color":{"value":"black"},"line_dash":[4,4],"line_width":{"value":2},"render_mode":"css","right_units":"screen","top_units":"screen"},"id":"9095","type":"BoxAnnotation"},{"attributes":{},"id":"9052","type":"LinearScale"},{"attributes":{"callback":null,"data":{"Frequency":[1,0,2,1,2,2,0,0,0,2,1,2,1,1,0,1,1,1,0,0,2,0,0,1,0,0,1,1,0,1,0,2,0,2,2,5,10,9,8,49],"left":{"__ndarray__":"AAAAAAAAIECamZmZmZkkQDMzMzMzMylAzMzMzMzMLUAzMzMzMzMxQAAAAAAAgDNAzMzMzMzMNUCZmZmZmRk4QGZmZmZmZjpAMzMzMzOzPEAAAAAAAAA/QGZmZmZmpkBAzMzMzMzMQUAzMzMzM/NCQJmZmZmZGURAAAAAAABARUBmZmZmZmZGQMzMzMzMjEdAMzMzMzOzSECZmZmZmdlJQAAAAAAAAEtAZmZmZmYmTEDMzMzMzExNQDMzMzMzc05AmZmZmZmZT0AAAAAAAGBQQDMzMzMz81BAZmZmZmaGUUCZmZmZmRlSQMzMzMzMrFJAAAAAAABAU0AzMzMzM9NTQGZmZmZmZlRAmZmZmZn5VEDMzMzMzIxVQAAAAAAAIFZAMzMzMzOzVkBmZmZmZkZXQJmZmZmZ2VdAzMzMzMxsWEA=","dtype":"float64","shape":[40]},"right":{"__ndarray__":"mpmZmZmZJEAzMzMzMzMpQMzMzMzMzC1AMzMzMzMzMUAAAAAAAIAzQMzMzMzMzDVAmZmZmZkZOEBmZmZmZmY6QDMzMzMzszxAAAAAAAAAP0BmZmZmZqZAQMzMzMzMzEFAMzMzMzPzQkCZmZmZmRlEQAAAAAAAQEVAZmZmZmZmRkDMzMzMzIxHQDMzMzMzs0hAmZmZmZnZSUAAAAAAAABLQGZmZmZmJkxAzMzMzMxMTUAzMzMzM3NOQJmZmZmZmU9AAAAAAABgUEAzMzMzM/NQQGZmZmZmhlFAmZmZmZkZUkDMzMzMzKxSQAAAAAAAQFNAMzMzMzPTU0BmZmZmZmZUQJmZmZmZ+VRAzMzMzMyMVUAAAAAAACBWQDMzMzMzs1ZAZmZmZmZGV0CZmZmZmdlXQMzMzMzMbFhAAAAAAAAAWUA=","dtype":"float64","shape":[40]},"top":[1,0,2,1,2,2,0,0,0,2,1,2,1,1,0,1,1,1,0,0,2,0,0,1,0,0,1,1,0,1,0,2,0,2,2,5,10,9,8,49],"x":{"__ndarray__":"zczMzMxMIkBmZmZmZuYmQAAAAAAAgCtAzMzMzMwMMECamZmZmVkyQGZmZmZmpjRAMjMzMzPzNkAAAAAAAEA5QMzMzMzMjDtAmpmZmZnZPUAzMzMzMxNAQJmZmZmZOUFAAAAAAABgQkBmZmZmZoZDQMzMzMzMrERAMzMzMzPTRUCZmZmZmflGQAAAAAAAIEhAZmZmZmZGSUDMzMzMzGxKQDMzMzMzk0tAmZmZmZm5TEAAAAAAAOBNQGZmZmZmBk9AZmZmZmYWUECamZmZmalQQMzMzMzMPFFAAAAAAADQUUAyMzMzM2NSQGZmZmZm9lJAmpmZmZmJU0DMzMzMzBxUQAAAAAAAsFRAMjMzMzNDVUBmZmZmZtZVQJqZmZmZaVZAzMzMzMz8VkAAAAAAAJBXQDIzMzMzI1hAZmZmZma2WEA=","dtype":"float64","shape":[40]}},"selected":{"id":"9077","type":"Selection"},"selection_policy":{"id":"9094","type":"UnionRenderers"}},"id":"9076","type":"ColumnDataSource"},{"attributes":{},"id":"9064","type":"SaveTool"},{"attributes":{"dimension":1,"grid_line_color":null,"ticker":{"id":"9060","type":"BasicTicker"}},"id":"9063","type":"Grid"},{"attributes":{"text":"Beers per Style","text_color":{"value":"black"},"text_font_size":{"value":"12pt"}},"id":"9046","type":"Title"},{"attributes":{},"id":"9065","type":"PanTool"},{"attributes":{},"id":"9068","type":"ResetTool"},{"attributes":{"axis_label":"Freq","bounds":"auto","formatter":{"id":"9087","type":"BasicTickFormatter"},"major_label_orientation":"horizontal","ticker":{"id":"9060","type":"BasicTicker"}},"id":"9059","type":"LinearAxis"},{"attributes":{"callback":null,"end":100.0,"reset_end":100.0,"reset_start":8.0,"start":8.0,"tags":[[["x","x",null]]]},"id":"9042","type":"Range1d"},{"attributes":{"source":{"id":"9076","type":"ColumnDataSource"}},"id":"9083","type":"CDSView"},{"attributes":{},"id":"9060","type":"BasicTicker"},{"attributes":{},"id":"9050","type":"LinearScale"},{"attributes":{},"id":"9066","type":"WheelZoomTool"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_multi":null,"active_scroll":"auto","active_tap":"auto","tools":[{"id":"9044","type":"HoverTool"},{"id":"9064","type":"SaveTool"},{"id":"9065","type":"PanTool"},{"id":"9066","type":"WheelZoomTool"},{"id":"9067","type":"BoxZoomTool"},{"id":"9068","type":"ResetTool"}]},"id":"9069","type":"Toolbar"},{"attributes":{"bottom":{"value":0},"fill_alpha":{"value":0.2},"fill_color":{"value":"#30a2da"},"left":{"field":"left"},"line_alpha":{"value":0.2},"line_color":{"value":"black"},"right":{"field":"right"},"top":{"field":"top"}},"id":"9081","type":"Quad"},{"attributes":{},"id":"9077","type":"Selection"},{"attributes":{"callback":null,"end":49.0,"reset_end":49.0,"reset_start":0.0,"tags":[[["Frequency","Frequency",null]]]},"id":"9043","type":"Range1d"},{"attributes":{},"id":"9055","type":"BasicTicker"},{"attributes":{"bottom":{"value":0},"fill_alpha":{"value":0.1},"fill_color":{"value":"#30a2da"},"left":{"field":"left"},"line_alpha":{"value":0.1},"line_color":{"value":"black"},"right":{"field":"right"},"top":{"field":"top"}},"id":"9080","type":"Quad"},{"attributes":{"bottom":{"value":0},"fill_color":{"value":"#30a2da"},"left":{"field":"left"},"right":{"field":"right"},"top":{"field":"top"}},"id":"9079","type":"Quad"},{"attributes":{"axis_label":"Beer in Style","bounds":"auto","formatter":{"id":"9085","type":"BasicTickFormatter"},"major_label_orientation":"horizontal","ticker":{"id":"9055","type":"BasicTicker"}},"id":"9054","type":"LinearAxis"},{"attributes":{},"id":"9085","type":"BasicTickFormatter"},{"attributes":{},"id":"9087","type":"BasicTickFormatter"},{"attributes":{"grid_line_color":null,"ticker":{"id":"9055","type":"BasicTicker"}},"id":"9058","type":"Grid"},{"attributes":{},"id":"9094","type":"UnionRenderers"},{"attributes":{"data_source":{"id":"9076","type":"ColumnDataSource"},"glyph":{"id":"9079","type":"Quad"},"hover_glyph":null,"muted_glyph":{"id":"9081","type":"Quad"},"nonselection_glyph":{"id":"9080","type":"Quad"},"selection_glyph":null,"view":{"id":"9083","type":"CDSView"}},"id":"9082","type":"GlyphRenderer"},{"attributes":{"callback":null,"renderers":[{"id":"9082","type":"GlyphRenderer"}],"tags":["hv_created"],"tooltips":[["x","@{x}"],["Frequency","@{Frequency}"]]},"id":"9044","type":"HoverTool"},{"attributes":{"overlay":{"id":"9095","type":"BoxAnnotation"}},"id":"9067","type":"BoxZoomTool"}],"root_ids":["9045"]},"title":"Bokeh Application","version":"1.2.0"}};
			  var render_items = [{"docid":"adf3c18c-20f4-41b6-9810-18649c990346","roots":{"9045":"d7e14466-e23d-4b72-9597-f31ca31543bb"}}];
			  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);

			  }
			  if (root.Bokeh !== undefined) {
				embed_document(root);
			  } else {
				var attempts = 0;
				var timer = setInterval(function(root) {
				  if (root.Bokeh !== undefined) {
					embed_document(root);
					clearInterval(timer);
				  }
				  attempts++;
				  if (attempts > 100) {
					console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
					clearInterval(timer);
				  }
				}, 10, root)
			  }
			})(window);
			</script>
			</div>
	</div>


	<p>
		As you can see, for the majority of styles I have around 100 beers. There are
		111 beer styles represented in the data. On the low end of representation, we have styles like
		<a href="https://www.beeradvocate.com/beer/styles/15/">Belgian Faro</a>
		and <a href="https://www.beeradvocate.com/beer/styles/168/">Japanese Happoshu</a>. On the high end,
		we have styles you might expect to be well represented like
		<a href="https://www.beeradvocate.com/beer/styles/128/">American Amber / Red Ale</a>,
		and <a href="https://www.beeradvocate.com/beer/styles/155/">American Lager</a>.
	</p>

	<!-- Scatter Plot -->
	<div>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-widgets-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-tables-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-gl-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://code.jquery.com/jquery-2.1.4.min.js" type="text/javascript"></script>
			<script src="https://code.jquery.com/ui/1.10.4/jquery-ui.min.js" type="text/javascript"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.20/require.min.js" type="text/javascript"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js" type="text/javascript"></script>
			<script type="text/javascript">function HoloViewsWidget() {
			}

			HoloViewsWidget.prototype.init_slider = function(init_val){
			  if(this.load_json) {
				this.from_json()
			  } else {
				this.update_cache();
			  }
			}

			HoloViewsWidget.prototype.populate_cache = function(idx){
			  this.cache[idx].innerHTML = this.frames[idx];
			  if (this.embed) {
				delete this.frames[idx];
			  }
			}

			HoloViewsWidget.prototype.process_error = function(msg){
			}

			HoloViewsWidget.prototype.from_json = function() {
			  var data_url = this.json_path + this.id + '.json';
			  $.getJSON(data_url, $.proxy(function(json_data) {
				this.frames = json_data;
				this.update_cache();
				this.update(0);
			  }, this));
			}

			HoloViewsWidget.prototype.dynamic_update = function(current){
			  if (current === undefined) {
				return
			  }
			  this.current = current;
			  if (this.comm) {
				var msg = {comm_id: this.id+'_client', content: current}
				this.comm.send(msg);
			  }
			}

			HoloViewsWidget.prototype.update_cache = function(force){
			  var frame_len = Object.keys(this.frames).length;
			  for (var i=0; i<frame_len; i++) {
				if(!this.load_json || this.dynamic)  {
				  var frame = Object.keys(this.frames)[i];
				} else {
				  var frame = i;
				}
				if(!(frame in this.cache) || force) {
				  if ((frame in this.cache) && force) { this.cache[frame].remove() }
				  var div = document.createElement("div");
				  var parent = document.getElementById("_anim_img"+this.id);
				  div.style.display = "none";
				  parent.appendChild(div)
				  this.cache[frame] = div;
				  var cache_id = "_anim_img"+this.id+"_"+frame;
				  this.populate_cache(frame);
				}
			  }
			}

			HoloViewsWidget.prototype.update = function(current){
			  if(current in this.cache) {
				for (var index in this.cache) {
				  this.cache[index].style.display = "none";
				}
				this.cache[current].style.display = "";
				this.wait = false;
			  }
			}

			HoloViewsWidget.prototype.init_comms = function() {
			  var that = this
			  HoloViews.comm_manager.register_target(this.plot_id, this.id, function (msg) { that.msg_handler(msg) })
			  if (!this.cached || this.dynamic) {
				function ack_callback(msg) {
				  var msg = msg.metadata;
				  var comm_id = msg.comm_id;
				  var comm_status = HoloViews.comm_status[comm_id];
				  if (that.queue.length > 0) {
					that.time = Date.now();
					that.dynamic_update(that.queue[that.queue.length-1]);
					that.queue = [];
				  } else {
					that.wait = false;
				  }
				  if ((msg.msg_type == "Ready") && msg.content) {
					console.log("Python callback returned following output:", msg.content);
				  } else if (msg.msg_type == "Error") {
					console.log("Python failed with the following traceback:", msg.traceback)
				  }
				}
				var comm = HoloViews.comm_manager.get_client_comm(this.plot_id, this.id+'_client', ack_callback);
				return comm
			  }
			}

			HoloViewsWidget.prototype.msg_handler = function(msg) {
			  var metadata = msg.metadata;
			  if ((metadata.msg_type == "Ready")) {
				if (metadata.content) {
				  console.log("Python callback returned following output:", metadata.content);
				}
			  return;
			  } else if (metadata.msg_type == "Error") {
				console.log("Python failed with the following traceback:", metadata.traceback)
				return
			  }
			  this.process_msg(msg)
			}

			HoloViewsWidget.prototype.process_msg = function(msg) {
			}

			function SelectionWidget(frames, id, slider_ids, keyMap, dim_vals, notFound, load_json, mode, cached, json_path, dynamic, plot_id){
			  this.frames = frames;
			  this.id = id;
			  this.plot_id = plot_id;
			  this.slider_ids = slider_ids;
			  this.keyMap = keyMap
			  this.current_frame = 0;
			  this.current_vals = dim_vals;
			  this.load_json = load_json;
			  this.mode = mode;
			  this.notFound = notFound;
			  this.cached = cached;
			  this.dynamic = dynamic;
			  this.cache = {};
			  this.json_path = json_path;
			  this.init_slider(this.current_vals[0]);
			  this.queue = [];
			  this.wait = false;
			  if (!this.cached || this.dynamic) {
				this.comm = this.init_comms();
			  }
			}

			SelectionWidget.prototype = new HoloViewsWidget;


			SelectionWidget.prototype.get_key = function(current_vals) {
			  var key = "(";
			  for (var i=0; i<this.slider_ids.length; i++)
			  {
				var val = this.current_vals[i];
				if (!(typeof val === 'string')) {
				  if (val % 1 === 0) { val = val.toFixed(1); }
				  else { val = val.toFixed(10); val = val.slice(0, val.length-1);}
				}
				key += "'" + val + "'";
				if(i != this.slider_ids.length-1) { key += ', ';}
				else if(this.slider_ids.length == 1) { key += ',';}
			  }
			  key += ")";
			  return this.keyMap[key];
			}

			SelectionWidget.prototype.set_frame = function(dim_val, dim_idx){
			  this.current_vals[dim_idx] = dim_val;
			  var key = this.current_vals;
			  if (!this.dynamic) {
				key = this.get_key(key)
			  }
			  if (this.dynamic || !this.cached) {
				if ((this.time !== undefined) && ((this.wait) && ((this.time + 10000) > Date.now()))) {
				  this.queue.push(key);
				  return
				}
				this.queue = [];
				this.time = Date.now();
				this.current_frame = key;
				this.wait = true;
				this.dynamic_update(key)
			  } else if (key !== undefined) {
				this.update(key)
			  }
			}


			/* Define the ScrubberWidget class */
			function ScrubberWidget(frames, num_frames, id, interval, load_json, mode, cached, json_path, dynamic, plot_id){
			  this.slider_id = "_anim_slider" + id;
			  this.loop_select_id = "_anim_loop_select" + id;
			  this.id = id;
			  this.plot_id = plot_id;
			  this.interval = interval;
			  this.current_frame = 0;
			  this.direction = 0;
			  this.dynamic = dynamic;
			  this.timer = null;
			  this.load_json = load_json;
			  this.mode = mode;
			  this.cached = cached;
			  this.frames = frames;
			  this.cache = {};
			  this.length = num_frames;
			  this.json_path = json_path;
			  document.getElementById(this.slider_id).max = this.length - 1;
			  this.init_slider(0);
			  this.wait = false;
			  this.queue = [];
			  if (!this.cached || this.dynamic) {
				this.comm = this.init_comms()
			  }
			}

			ScrubberWidget.prototype = new HoloViewsWidget;

			ScrubberWidget.prototype.set_frame = function(frame){
			  this.current_frame = frame;
			  var widget = document.getElementById(this.slider_id);
			  if (widget === null) {
				this.pause_animation();
				return
			  }
			  widget.value = this.current_frame;
			  if (this.dynamic || !this.cached) {
				if ((this.time !== undefined) && ((this.wait) && ((this.time + 10000) > Date.now()))) {
				  this.queue.push(frame);
				  return
				}
				this.queue = [];
				this.time = Date.now();
				this.wait = true;
				this.dynamic_update(frame)
			  } else {
				this.update(frame)
			  }
			}

			ScrubberWidget.prototype.get_loop_state = function(){
			  var button_group = document[this.loop_select_id].state;
			  for (var i = 0; i < button_group.length; i++) {
				var button = button_group[i];
				if (button.checked) {
				  return button.value;
				}
			  }
			  return undefined;
			}


			ScrubberWidget.prototype.next_frame = function() {
			  this.set_frame(Math.min(this.length - 1, this.current_frame + 1));
			}

			ScrubberWidget.prototype.previous_frame = function() {
			  this.set_frame(Math.max(0, this.current_frame - 1));
			}

			ScrubberWidget.prototype.first_frame = function() {
			  this.set_frame(0);
			}

			ScrubberWidget.prototype.last_frame = function() {
			  this.set_frame(this.length - 1);
			}

			ScrubberWidget.prototype.slower = function() {
			  this.interval /= 0.7;
			  if(this.direction > 0){this.play_animation();}
			  else if(this.direction < 0){this.reverse_animation();}
			}

			ScrubberWidget.prototype.faster = function() {
			  this.interval *= 0.7;
			  if(this.direction > 0){this.play_animation();}
			  else if(this.direction < 0){this.reverse_animation();}
			}

			ScrubberWidget.prototype.anim_step_forward = function() {
			  if(this.current_frame < this.length - 1){
				this.next_frame();
			  }else{
				var loop_state = this.get_loop_state();
				if(loop_state == "loop"){
				  this.first_frame();
				}else if(loop_state == "reflect"){
				  this.last_frame();
				  this.reverse_animation();
				}else{
				  this.pause_animation();
				  this.last_frame();
				}
			  }
			}

			ScrubberWidget.prototype.anim_step_reverse = function() {
			  if(this.current_frame > 0){
				this.previous_frame();
			  } else {
				var loop_state = this.get_loop_state();
				if(loop_state == "loop"){
				  this.last_frame();
				}else if(loop_state == "reflect"){
				  this.first_frame();
				  this.play_animation();
				}else{
				  this.pause_animation();
				  this.first_frame();
				}
			  }
			}

			ScrubberWidget.prototype.pause_animation = function() {
			  this.direction = 0;
			  if (this.timer){
				clearInterval(this.timer);
				this.timer = null;
			  }
			}

			ScrubberWidget.prototype.play_animation = function() {
			  this.pause_animation();
			  this.direction = 1;
			  var t = this;
			  if (!this.timer) this.timer = setInterval(function(){t.anim_step_forward();}, this.interval);
			}

			ScrubberWidget.prototype.reverse_animation = function() {
			  this.pause_animation();
			  this.direction = -1;
			  var t = this;
			  if (!this.timer) this.timer = setInterval(function(){t.anim_step_reverse();}, this.interval);
			}

			function extend(destination, source) {
			  for (var k in source) {
				if (source.hasOwnProperty(k)) {
				  destination[k] = source[k];
				}
			  }
			  return destination;
			}

			function update_widget(widget, values) {
			  if (widget.hasClass("ui-slider")) {
				widget.slider('option', {
				  min: 0,
				  max: values.length-1,
				  dim_vals: values,
				  value: 0,
				  dim_labels: values
				})
				widget.slider('option', 'slide').call(widget, event, {value: 0})
			  } else {
				widget.empty();
				for (var i=0; i<values.length; i++){
				  widget.append($("<option>", {
					value: i,
					text: values[i]
				  }))
				};
				widget.data('values', values);
				widget.data('value', 0);
				widget.trigger("change");
			  };
			}

			function init_slider(id, plot_id, dim, values, next_vals, labels, dynamic, step, value, next_dim,
								dim_idx, delay, jQueryUI_CDN, UNDERSCORE_CDN) {
			  // Slider JS Block START
			  function loadcssfile(filename){
				var fileref=document.createElement("link")
				fileref.setAttribute("rel", "stylesheet")
				fileref.setAttribute("type", "text/css")
				fileref.setAttribute("href", filename)
				document.getElementsByTagName("head")[0].appendChild(fileref)
			  }
			  loadcssfile("https://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css");
			  /* Check if jQuery and jQueryUI have been loaded
				otherwise load with require.js */
			  var jQuery = window.jQuery,
				// check for old versions of jQuery
				oldjQuery = jQuery && !!jQuery.fn.jquery.match(/^1\.[0-4](\.|$)/),
				jquery_path = '',
				paths = {},
				noConflict;
			  var jQueryUI = jQuery.ui;
			  // check for jQuery
			  if (!jQuery || oldjQuery) {
				// load if it's not available or doesn't meet min standards
				paths.jQuery = jQuery;
				noConflict = !!oldjQuery;
			  } else {
				// register the current jQuery
				define('jquery', [], function() { return jQuery; });
			  }
			  if (!jQueryUI) {
				paths.jQueryUI = jQueryUI_CDN.slice(null, -3);
			  } else {
				define('jQueryUI', [], function() { return jQuery.ui; });
			  }
			  paths.underscore = UNDERSCORE_CDN.slice(null, -3);
			  var jquery_require = {
				paths: paths,
				shim: {
				  "jQueryUI": {
					exports:"$",
					deps: ['jquery']
				  },
				  "underscore": {
					exports: '_'
				  }
				}
			  }
			  require.config(jquery_require);
			  require(["jQueryUI", "underscore"], function(jUI, _){
				if (noConflict) $.noConflict(true);
				var vals = values;
				if (dynamic && vals.constructor === Array) {
				  var default_value = parseFloat(value);
				  var min = parseFloat(vals[0]);
				  var max = parseFloat(vals[vals.length-1]);
				  var wstep = step;
				  var wlabels = [default_value];
				  var init_label = default_value;
				} else {
				  var min = 0;
				  if (dynamic) {
					var max = Object.keys(vals).length - 1;
					var init_label = labels[value];
					var default_value = values[value];
				  } else {
					var max = vals.length - 1;
					var init_label = labels[value];
					var default_value = value;
				  }
				  var wstep = 1;
				  var wlabels = labels;
				}
				function adjustFontSize(text) {
				  var width_ratio = (text.parent().width()/8)/text.val().length;
				  var size = Math.min(0.9, Math.max(0.6, width_ratio))+'em';
				  text.css('font-size', size);
				}
				var slider = $('#_anim_widget'+id+'_'+dim);
				slider.slider({
				  animate: "fast",
				  min: min,
				  max: max,
				  step: wstep,
				  value: default_value,
				  dim_vals: vals,
				  dim_labels: wlabels,
				  next_vals: next_vals,
				  slide: function(event, ui) {
					var vals = slider.slider("option", "dim_vals");
					var next_vals = slider.slider("option", "next_vals");
					var dlabels = slider.slider("option", "dim_labels");
					if (dynamic) {
					  var dim_val = ui.value;
					  if (vals.constructor === Array) {
						var label = ui.value;
					  } else {
						var label = dlabels[ui.value];
					  }
					} else {
					  var dim_val = vals[ui.value];
					  var label = dlabels[ui.value];
					}
					var text = $('#textInput'+id+'_'+dim);
					text.val(label);
					adjustFontSize(text);
					HoloViews.index[plot_id].set_frame(dim_val, dim_idx);
					if (Object.keys(next_vals).length > 0) {
					  var new_vals = next_vals[dim_val];
					  var next_widget = $('#_anim_widget'+id+'_'+next_dim);
					  update_widget(next_widget, new_vals);
					}
				  }
				});
				slider.keypress(function(event) {
				  if (event.which == 80 || event.which == 112) {
					var start = slider.slider("option", "value");
					var stop =  slider.slider("option", "max");
					for (var i=start; i<=stop; i++) {
					  var delay = i*delay;
					  $.proxy(function doSetTimeout(i) { setTimeout($.proxy(function() {
						var val = {value:i};
						slider.slider('value',i);
						slider.slider("option", "slide")(null, val);
					  }, slider), delay);}, slider)(i);
					}
				  }
				  if (event.which == 82 || event.which == 114) {
					var start = slider.slider("option", "value");
					var stop =  slider.slider("option", "min");
					var count = 0;
					for (var i=start; i>=stop; i--) {
					  var delay = count*delay;
					  count = count + 1;
					  $.proxy(function doSetTimeout(i) { setTimeout($.proxy(function() {
						var val = {value:i};
						slider.slider('value',i);
						slider.slider("option", "slide")(null, val);
					  }, slider), delay);}, slider)(i);
					}
				  }
				});
				var textInput = $('#textInput'+id+'_'+dim)
				textInput.val(init_label);
				adjustFontSize(textInput);
			  });
			}

			function init_dropdown(id, plot_id, dim, vals, value, next_vals, labels, next_dim, dim_idx, dynamic) {
			  var widget = $("#_anim_widget"+id+'_'+dim);
			  widget.data('values', vals)
			  for (var i=0; i<vals.length; i++){
				if (dynamic) {
				  var val = vals[i];
				} else {
				  var val = i;
				}
				widget.append($("<option>", {
				  value: val,
				  text: labels[i]
				}));
			  };
			  widget.data("next_vals", next_vals);
			  widget.val(value);
			  widget.on('change', function(event, ui) {
				if (dynamic) {
				  var dim_val = parseInt(this.value);
				} else {
				  var dim_val = $.data(this, 'values')[this.value];
				}
				var next_vals = $.data(this, "next_vals");
				if (Object.keys(next_vals).length > 0) {
				  var new_vals = next_vals[dim_val];
				  var next_widget = $('#_anim_widget'+id+'_'+next_dim);
				  update_widget(next_widget, new_vals);
				}
				var widgets = HoloViews.index[plot_id]
				if (widgets) {
				  widgets.set_frame(dim_val, dim_idx);
				}
			  });
			}


			if (window.HoloViews === undefined) {
			  window.HoloViews = {}
			  window.PyViz = window.HoloViews
			} else if (window.PyViz === undefined) {
			  window.PyViz = window.HoloViews
			}


			var _namespace = {
			  init_slider: init_slider,
			  init_dropdown: init_dropdown,
			  comms: {},
			  comm_status: {},
			  index: {},
			  plot_index: {},
			  kernels: {},
			  receivers: {}
			}

			for (var k in _namespace) {
			  if (!(k in window.HoloViews)) {
				window.HoloViews[k] = _namespace[k];
			  }
			}

			// Define Bokeh specific subclasses
			function BokehSelectionWidget() {
			  SelectionWidget.apply(this, arguments);
			}

			function BokehScrubberWidget() {
			  ScrubberWidget.apply(this, arguments);
			}

			// Let them inherit from the baseclasses
			BokehSelectionWidget.prototype = Object.create(SelectionWidget.prototype);
			BokehScrubberWidget.prototype = Object.create(ScrubberWidget.prototype);

			// Define methods to override on widgets
			var BokehMethods = {
			  update_cache : function(){
				for (var index in this.frames) {
				  this.frames[index] = JSON.parse(this.frames[index]);
				}
			  },
			  update : function(current){
				if (current === undefined) {
				  return;
				}
				var data = this.frames[current];
				if (data !== undefined) {
				  if (data.root in HoloViews.plot_index) {
					var doc = HoloViews.plot_index[data.root].model.document;
				  } else {
					var doc = Bokeh.index[data.root].model.document;
				  }
				  doc.apply_json_patch(data.content);
				}
			  },
			  init_comms: function() {
				if (Bokeh.protocol !== undefined) {
				  this.receiver = new Bokeh.protocol.Receiver()
				} else {
				  this.receiver = null;
				}
				return HoloViewsWidget.prototype.init_comms.call(this);
			  },
			  process_msg : function(msg) {
				if (this.plot_id in HoloViews.plot_index) {
				  var doc = HoloViews.plot_index[this.plot_id].model.document;
				} else {
				  var doc = Bokeh.index[this.plot_id].model.document;
				}
				if (this.receiver === null) { return }
				var receiver = this.receiver;
				if (msg.buffers.length > 0) {
				  receiver.consume(msg.buffers[0].buffer)
				} else {
				  receiver.consume(msg.content.data)
				}
				const comm_msg = receiver.message;
				if ((comm_msg != null) && (doc != null)) {
				  doc.apply_json_patch(comm_msg.content, comm_msg.buffers)
				}
			  }
			}

			// Extend Bokeh widgets with backend specific methods
			extend(BokehSelectionWidget.prototype, BokehMethods);
			extend(BokehScrubberWidget.prototype, BokehMethods);

			window.HoloViews.BokehSelectionWidget = BokehSelectionWidget
			window.HoloViews.BokehScrubberWidget = BokehScrubberWidget

			// Define MPL specific subclasses
			function MPLSelectionWidget() {
			  SelectionWidget.apply(this, arguments);
			}

			function MPLScrubberWidget() {
			  ScrubberWidget.apply(this, arguments);
			}

			// Let them inherit from the baseclasses
			MPLSelectionWidget.prototype = Object.create(SelectionWidget.prototype);
			MPLScrubberWidget.prototype = Object.create(ScrubberWidget.prototype);

			// Define methods to override on widgets
			var MPLMethods = {
			  init_slider : function(init_val){
				if(this.load_json) {
				  this.from_json()
				} else {
				  this.update_cache();
				}
				if (this.dynamic | !this.cached | (this.current_vals === undefined)) {
				  this.update(0)
				} else {
				  this.set_frame(this.current_vals[0], 0)
				}
			  },
			  process_msg : function(msg) {
				var data = msg.content.data;
				this.frames[this.current] = data;
				this.update_cache(true);
				this.update(this.current);
			  }
			}
			// Extend MPL widgets with backend specific methods
			extend(MPLSelectionWidget.prototype, MPLMethods);
			extend(MPLScrubberWidget.prototype, MPLMethods);

			window.HoloViews.MPLSelectionWidget = MPLSelectionWidget
			window.HoloViews.MPLScrubberWidget = MPLScrubberWidget
			</script>
			<script type="text/javascript">
				function JupyterCommManager() {
				}

				JupyterCommManager.prototype.register_target = function(plot_id, comm_id, msg_handler) {
				  if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
					var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
					comm_manager.register_target(comm_id, function(comm) {
					  comm.on_msg(msg_handler);
					});
				  } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
					window.PyViz.kernels[plot_id].registerCommTarget(comm_id, function(comm) {
					  comm.onMsg = msg_handler;
					});
				  }
				}

				JupyterCommManager.prototype.get_client_comm = function(plot_id, comm_id, msg_handler) {
				  if (comm_id in window.PyViz.comms) {
					return window.PyViz.comms[comm_id];
				  } else if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
					var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
					var comm = comm_manager.new_comm(comm_id, {}, {}, {}, comm_id);
					if (msg_handler) {
					  comm.on_msg(msg_handler);
					}
				  } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
					var comm = window.PyViz.kernels[plot_id].connectToComm(comm_id);
					comm.open();
					if (msg_handler) {
					  comm.onMsg = msg_handler;
					}
				  }

				  window.PyViz.comms[comm_id] = comm;
				  return comm;
				}

				window.PyViz.comm_manager = new JupyterCommManager();
				</script>

			<link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-1.2.0.min.css">
			<link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-widgets-1.2.0.min.css">
			<link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-tables-1.2.0.min.css">
			<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
			<link rel="stylesheet" href="https://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
			<style>div.bk-hbox {
				display: flex;
				justify-content: center;
			}

			div.bk-hbox div.bk-plot {
				padding: 8px;
			}

			div.bk-hbox div.bk-data-table {
				padding: 20px;
			}

			div.hololayout {
			  display: flex;
			  align-items: center;
			  margin: 0;
			}

			div.holoframe {
			  width: 75%;
			}

			div.holowell {
			  display: flex;
			  align-items: center;
			}

			form.holoform {
			  background-color: #fafafa;
			  border-radius: 5px;
			  overflow: hidden;
			  padding-left: 0.8em;
			  padding-right: 0.8em;
			  padding-top: 0.4em;
			  padding-bottom: 0.4em;
			  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
			  margin-bottom: 20px;
			  border: 1px solid #e3e3e3;
			}

			div.holowidgets {
			  padding-right: 0;
			  width: 25%;
			}

			div.holoslider {
			  min-height: 0 !important;
			  height: 0.8em;
			  width: 100%;
			}

			div.holoformgroup {
			  padding-top: 0.5em;
			  margin-bottom: 0.5em;
			}

			div.hologroup {
			  padding-left: 0;
			  padding-right: 0.8em;
			  width: 100%;
			}

			.holoselect {
			  width: 92%;
			  margin-left: 0;
			  margin-right: 0;
			}

			.holotext {
			  padding-left:  0.5em;
			  padding-right: 0;
			  width: 100%;
			}

			.holowidgets .ui-resizable-se {
			  visibility: hidden
			}

			.holoframe > .ui-resizable-se {
			  visibility: hidden
			}

			.holowidgets .ui-resizable-s {
			  visibility: hidden
			}


			/* CSS rules for noUISlider based slider used by JupyterLab extension  */

			.noUi-handle {
			  width: 20px !important;
			  height: 20px !important;
			  left: -5px !important;
			  top: -5px !important;
			}

			.noUi-handle:before, .noUi-handle:after {
			  visibility: hidden;
			  height: 0px;
			}

			.noUi-target {
			  margin-left: 0.5em;
			  margin-right: 0.5em;
			}
			</style><div style='display: table; margin: 0 auto;'>






			  <div class="bk-root" id="a635d9b5-464f-42f2-8c2f-216f410262bf" data-root-id="3600"></div>

			<script type="text/javascript">
			  (function(root) {
			  function embed_document(root) {

			  var docs_json = {"4fd95e3a-ac38-4041-831f-ef117b2dd8af":{"roots":{"references":[{"attributes":{"below":[{"id":"3609","type":"CategoricalAxis"}],"center":[{"id":"3612","type":"Grid"},{"id":"3617","type":"Grid"}],"left":[{"id":"3613","type":"LinearAxis"}],"margin":null,"min_border_bottom":10,"min_border_left":10,"min_border_right":10,"min_border_top":10,"plot_height":750,"plot_width":1000,"renderers":[{"id":"3636","type":"GlyphRenderer"}],"sizing_mode":"fixed","title":{"id":"3601","type":"Title"},"toolbar":{"id":"3623","type":"Toolbar"},"x_range":{"id":"3597","type":"FactorRange"},"x_scale":{"id":"3605","type":"CategoricalScale"},"y_range":{"id":"3598","type":"Range1d"},"y_scale":{"id":"3607","type":"LinearScale"}},"id":"3600","subtype":"Figure","type":"Plot"},{"attributes":{"text":"Mean Rating per Style","text_color":{"value":"black"},"text_font_size":{"value":"12pt"}},"id":"3601","type":"Title"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_multi":null,"active_scroll":"auto","active_tap":"auto","tools":[{"id":"3599","type":"HoverTool"},{"id":"3618","type":"SaveTool"},{"id":"3619","type":"PanTool"},{"id":"3620","type":"WheelZoomTool"},{"id":"3621","type":"BoxZoomTool"},{"id":"3622","type":"ResetTool"}]},"id":"3623","type":"Toolbar"},{"attributes":{},"id":"3605","type":"CategoricalScale"},{"attributes":{},"id":"3639","type":"CategoricalTickFormatter"},{"attributes":{"callback":null,"renderers":[{"id":"3636","type":"GlyphRenderer"}],"tags":["hv_created"],"tooltips":[["style","@{style}"],["rating","@{rating}"]]},"id":"3599","type":"HoverTool"},{"attributes":{},"id":"3607","type":"LinearScale"},{"attributes":{"fill_color":{"value":"#30a2da"},"line_color":{"value":"#30a2da"},"size":{"units":"screen","value":5},"x":{"field":"style"},"y":{"field":"rating"}},"id":"3633","type":"Scatter"},{"attributes":{},"id":"3641","type":"BasicTickFormatter"},{"attributes":{"axis_label":"style","bounds":"auto","formatter":{"id":"3639","type":"CategoricalTickFormatter"},"major_label_orientation":1.5707963267948966,"ticker":{"id":"3610","type":"CategoricalTicker"}},"id":"3609","type":"CategoricalAxis"},{"attributes":{},"id":"3610","type":"CategoricalTicker"},{"attributes":{"source":{"id":"3630","type":"ColumnDataSource"}},"id":"3637","type":"CDSView"},{"attributes":{"callback":null,"data":{"rating":{"__ndarray__":"ecCvfzUAC0DPRNjw9AoQQDs8vVKWIQ1AIyh+jLnrEEAmLejhD5QQQEjhehSuxw9AWS1vjGDiD0CS7Xw/NZ4QQP9sDeHnIQ9AsFh47EAhD0Bdj8L1KOwMQDbExZix4RFAFtagQog+DkChkjoBTUQRQDQk5u0MiQ9AarPqc7VVEkCbe/8OTUURQL19HThnxA9ArFPoOoWuCUDRQzg9hNMDQKVL5iIRPhFA89vXgXMGEECV7HcQhMUQQNTHXH3M1RBAFpCtVi7AEECXhpz77EIPQBE2PL1S1hFAJZFp2G6WEEBW8HIKXk4NQPZsVn2uNg5AHYXrUbjeD0BwPQrXo7AMQDZMHqku9hBA+cWSXywpEEBQjh+hlRQQQJHIqJoiJhBAl/+Qfvu6D0BxJcIBzcYQQKfgjArOqBFAkXodqdeREEDNGVHaGzwQQH1RlGCAXxBAfypLccjYD0AjQfFjzB0RQLgXvNkEFQ9AiA9n+HCGD0DNYb9ag1wOQAHuCeCeABFAe/Nq4lnRDECs+pmO2HcMQMcfKEDlfw5ADRRtNXgOD0D7s5w/y/kNQO/bbjnBMg9AzczMzMzsDkDDzm04i6cQQB6g3AHKHRBAiGNd3EaDDkB8xVd8xVcMQLgehetRABBAvMaBe6mtDkAquTovLosNQPigZ7PqcxFAob+T1fLGDECj0pBzn10MQNNm1edqqwtA7OvAOSPKB0DojRFM9HcOQISkKRVnHw9ADlDuAOUOEEAwYTe/hYAPQB7HcRzHcQ9AYDe/hYBREEC2IDsLsrMOQG09CtejMA5ArIBstXIBEEApYTGbnjsOQHgRq0Tedw9Am682w4D3D0CS2DAfiQ0PQJfeyD7jQQ9ADLZgC7ZgDEAblfBlqmcPQKNFtvP9tA5AZnljBBN9D0C2mBd1xwAQQNbHP/JMKw5AgJChssPUDUAwTffSdC8PQFtU346Hkg5AvScPC7UmD0BK7YHUHkgPQO0NCfSYYw5AV907JKoIB0DIfuzHfuwHQLa18kqYAxFAtKjnrNIVBkB3gHIHKLcOQIe7wQ1xMRJA3ftjC60gEECHKdZspOoOQD+C4seYuxFALvnFkl8sC0B2j79MTiEQQG9fRsvdahBAR+8MOEiODkCtkypjWNQNQDwK16NwPQ5AekqQpwR5D0D2SQW7FtINQHH7MlruVg9A","dtype":"float64","shape":[111]},"style":["american adjunct lager","american amber / red ale","american amber / red lager","american barleywine","american black ale","american blonde ale","american brett","american brown ale","american brut ipa","american cream ale","american dark wheat ale","american imperial ipa","american imperial pilsner","american imperial porter","american imperial red ale","american imperial stout","american ipa","american lager","american light lager","american malt liquor","american pale ale (apa)","american pale wheat ale","american porter","american stout","american strong ale","american wheatwine ale","american wild ale","baltic porter","belgian blonde ale ","belgian dark ale","belgian dubbel","belgian faro","belgian fruit lambic","belgian gueuze","belgian ipa","belgian lambic","belgian pale ale","belgian quadrupel (quad)","belgian saison","belgian strong dark ale","belgian strong pale ale","belgian tripel","belgian witbier","berliner weisse","bi\u00e8re de champagne / bi\u00e8re brut","bohemian pilsener","braggot","british barleywine","california common / steam beer","chile beer","english bitter","english brown ale","english dark mild ale","english extra special / strong bitter (esb)","english india pale ale (ipa)","english oatmeal stout","english old ale","english pale ale","english pale mild ale","english porter","english stout","english strong ale","english sweet / milk stout","european dark lager","european export / dortmunder","european pale lager","european strong lager","finnish sahti","flanders oud bruin","flanders red ale","foreign / export stout","french bi\u00e8re de garde","fruit and field beer","german altbier","german bock","german doppelbock","german dunkelweizen","german eisbock","german hefeweizen","german helles","german kellerbier / zwickelbier","german kristalweizen","german k\u00f6lsch","german maibock","german m\u00e4rzen / oktoberfest","german pilsner","german rauchbier","german roggenbier","german schwarzbier","german weizenbock","herb and spice beer","irish dry stout","irish red ale","japanese happoshu","japanese rice lager","leipzig gose","low alcohol beer","munich dunkel lager","new england ipa","pumpkin beer","robust porter ","russian imperial stout","russian kvass","rye beer","scotch ale / wee heavy","scottish ale","scottish gruit / ancient herbed ale","smoke beer","smoke porter","vienna lager","winter warmer"]},"selected":{"id":"3631","type":"Selection"},"selection_policy":{"id":"3648","type":"UnionRenderers"}},"id":"3630","type":"ColumnDataSource"},{"attributes":{"grid_line_color":null,"ticker":{"id":"3610","type":"CategoricalTicker"}},"id":"3612","type":"Grid"},{"attributes":{},"id":"3631","type":"Selection"},{"attributes":{"axis_label":"rating","bounds":"auto","formatter":{"id":"3641","type":"BasicTickFormatter"},"major_label_orientation":"horizontal","ticker":{"id":"3614","type":"BasicTicker"}},"id":"3613","type":"LinearAxis"},{"attributes":{},"id":"3614","type":"BasicTicker"},{"attributes":{"data_source":{"id":"3630","type":"ColumnDataSource"},"glyph":{"id":"3633","type":"Scatter"},"hover_glyph":null,"muted_glyph":{"id":"3635","type":"Scatter"},"nonselection_glyph":{"id":"3634","type":"Scatter"},"selection_glyph":null,"view":{"id":"3637","type":"CDSView"}},"id":"3636","type":"GlyphRenderer"},{"attributes":{"dimension":1,"grid_line_color":null,"ticker":{"id":"3614","type":"BasicTicker"}},"id":"3617","type":"Grid"},{"attributes":{"callback":null,"factors":["american adjunct lager","american amber / red ale","american amber / red lager","american barleywine","american black ale","american blonde ale","american brett","american brown ale","american brut ipa","american cream ale","american dark wheat ale","american imperial ipa","american imperial pilsner","american imperial porter","american imperial red ale","american imperial stout","american ipa","american lager","american light lager","american malt liquor","american pale ale (apa)","american pale wheat ale","american porter","american stout","american strong ale","american wheatwine ale","american wild ale","baltic porter","belgian blonde ale ","belgian dark ale","belgian dubbel","belgian faro","belgian fruit lambic","belgian gueuze","belgian ipa","belgian lambic","belgian pale ale","belgian quadrupel (quad)","belgian saison","belgian strong dark ale","belgian strong pale ale","belgian tripel","belgian witbier","berliner weisse","bi\u00e8re de champagne / bi\u00e8re brut","bohemian pilsener","braggot","british barleywine","california common / steam beer","chile beer","english bitter","english brown ale","english dark mild ale","english extra special / strong bitter (esb)","english india pale ale (ipa)","english oatmeal stout","english old ale","english pale ale","english pale mild ale","english porter","english stout","english strong ale","english sweet / milk stout","european dark lager","european export / dortmunder","european pale lager","european strong lager","finnish sahti","flanders oud bruin","flanders red ale","foreign / export stout","french bi\u00e8re de garde","fruit and field beer","german altbier","german bock","german doppelbock","german dunkelweizen","german eisbock","german hefeweizen","german helles","german kellerbier / zwickelbier","german kristalweizen","german k\u00f6lsch","german maibock","german m\u00e4rzen / oktoberfest","german pilsner","german rauchbier","german roggenbier","german schwarzbier","german weizenbock","herb and spice beer","irish dry stout","irish red ale","japanese happoshu","japanese rice lager","leipzig gose","low alcohol beer","munich dunkel lager","new england ipa","pumpkin beer","robust porter ","russian imperial stout","russian kvass","rye beer","scotch ale / wee heavy","scottish ale","scottish gruit / ancient herbed ale","smoke beer","smoke porter","vienna lager","winter warmer"],"tags":[[["style","style",null]]]},"id":"3597","type":"FactorRange"},{"attributes":{"bottom_units":"screen","fill_alpha":{"value":0.5},"fill_color":{"value":"lightgrey"},"left_units":"screen","level":"overlay","line_alpha":{"value":1.0},"line_color":{"value":"black"},"line_dash":[4,4],"line_width":{"value":2},"render_mode":"css","right_units":"screen","top_units":"screen"},"id":"3649","type":"BoxAnnotation"},{"attributes":{"callback":null,"end":5,"reset_end":5,"reset_start":2.5,"start":2.5,"tags":[[["rating","rating",null]]]},"id":"3598","type":"Range1d"},{"attributes":{"overlay":{"id":"3649","type":"BoxAnnotation"}},"id":"3621","type":"BoxZoomTool"},{"attributes":{},"id":"3622","type":"ResetTool"},{"attributes":{},"id":"3648","type":"UnionRenderers"},{"attributes":{},"id":"3619","type":"PanTool"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#30a2da"},"line_alpha":{"value":0.1},"line_color":{"value":"#30a2da"},"size":{"units":"screen","value":5},"x":{"field":"style"},"y":{"field":"rating"}},"id":"3634","type":"Scatter"},{"attributes":{},"id":"3618","type":"SaveTool"},{"attributes":{"fill_alpha":{"value":0.2},"fill_color":{"value":"#30a2da"},"line_alpha":{"value":0.2},"line_color":{"value":"#30a2da"},"size":{"units":"screen","value":5},"x":{"field":"style"},"y":{"field":"rating"}},"id":"3635","type":"Scatter"},{"attributes":{},"id":"3620","type":"WheelZoomTool"}],"root_ids":["3600"]},"title":"Bokeh Application","version":"1.2.0"}};
			  var render_items = [{"docid":"4fd95e3a-ac38-4041-831f-ef117b2dd8af","roots":{"3600":"a635d9b5-464f-42f2-8c2f-216f410262bf"}}];
			  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);

			  }
			  if (root.Bokeh !== undefined) {
				embed_document(root);
			  } else {
				var attempts = 0;
				var timer = setInterval(function(root) {
				  if (root.Bokeh !== undefined) {
					embed_document(root);
					clearInterval(timer);
				  }
				  attempts++;
				  if (attempts > 100) {
					console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
					clearInterval(timer);
				  }
				}, 10, root)
			  }
			})(window);
			</script>
			</div>
	</div>

	<p>
		The average rating of all beers is ~ 3.93/5. The minimum value is ~2.48 and the maximum value is ~4.58.
		The lowest rated style is <a href="https://www.beeradvocate.com/beer/styles/42/">American Malt Liquor</a>.
		The highest rated style is <a href="https://www.beeradvocate.com/beer/styles/157/">American Imperial Stout</a>.
	</p>

	<!-- Reviews per Author-->
	<div>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-widgets-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-tables-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-gl-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://code.jquery.com/jquery-2.1.4.min.js" type="text/javascript"></script>
			<script src="https://code.jquery.com/ui/1.10.4/jquery-ui.min.js" type="text/javascript"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.20/require.min.js" type="text/javascript"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js" type="text/javascript"></script>
			<script type="text/javascript">function HoloViewsWidget() {
			}

			HoloViewsWidget.prototype.init_slider = function(init_val){
			  if(this.load_json) {
				this.from_json()
			  } else {
				this.update_cache();
			  }
			}

			HoloViewsWidget.prototype.populate_cache = function(idx){
			  this.cache[idx].innerHTML = this.frames[idx];
			  if (this.embed) {
				delete this.frames[idx];
			  }
			}

			HoloViewsWidget.prototype.process_error = function(msg){
			}

			HoloViewsWidget.prototype.from_json = function() {
			  var data_url = this.json_path + this.id + '.json';
			  $.getJSON(data_url, $.proxy(function(json_data) {
				this.frames = json_data;
				this.update_cache();
				this.update(0);
			  }, this));
			}

			HoloViewsWidget.prototype.dynamic_update = function(current){
			  if (current === undefined) {
				return
			  }
			  this.current = current;
			  if (this.comm) {
				var msg = {comm_id: this.id+'_client', content: current}
				this.comm.send(msg);
			  }
			}

			HoloViewsWidget.prototype.update_cache = function(force){
			  var frame_len = Object.keys(this.frames).length;
			  for (var i=0; i<frame_len; i++) {
				if(!this.load_json || this.dynamic)  {
				  var frame = Object.keys(this.frames)[i];
				} else {
				  var frame = i;
				}
				if(!(frame in this.cache) || force) {
				  if ((frame in this.cache) && force) { this.cache[frame].remove() }
				  var div = document.createElement("div");
				  var parent = document.getElementById("_anim_img"+this.id);
				  div.style.display = "none";
				  parent.appendChild(div)
				  this.cache[frame] = div;
				  var cache_id = "_anim_img"+this.id+"_"+frame;
				  this.populate_cache(frame);
				}
			  }
			}

			HoloViewsWidget.prototype.update = function(current){
			  if(current in this.cache) {
				for (var index in this.cache) {
				  this.cache[index].style.display = "none";
				}
				this.cache[current].style.display = "";
				this.wait = false;
			  }
			}

			HoloViewsWidget.prototype.init_comms = function() {
			  var that = this
			  HoloViews.comm_manager.register_target(this.plot_id, this.id, function (msg) { that.msg_handler(msg) })
			  if (!this.cached || this.dynamic) {
				function ack_callback(msg) {
				  var msg = msg.metadata;
				  var comm_id = msg.comm_id;
				  var comm_status = HoloViews.comm_status[comm_id];
				  if (that.queue.length > 0) {
					that.time = Date.now();
					that.dynamic_update(that.queue[that.queue.length-1]);
					that.queue = [];
				  } else {
					that.wait = false;
				  }
				  if ((msg.msg_type == "Ready") && msg.content) {
					console.log("Python callback returned following output:", msg.content);
				  } else if (msg.msg_type == "Error") {
					console.log("Python failed with the following traceback:", msg.traceback)
				  }
				}
				var comm = HoloViews.comm_manager.get_client_comm(this.plot_id, this.id+'_client', ack_callback);
				return comm
			  }
			}

			HoloViewsWidget.prototype.msg_handler = function(msg) {
			  var metadata = msg.metadata;
			  if ((metadata.msg_type == "Ready")) {
				if (metadata.content) {
				  console.log("Python callback returned following output:", metadata.content);
				}
				return;
			  } else if (metadata.msg_type == "Error") {
				console.log("Python failed with the following traceback:", metadata.traceback)
				return
			  }
			  this.process_msg(msg)
			}

			HoloViewsWidget.prototype.process_msg = function(msg) {
			}

			function SelectionWidget(frames, id, slider_ids, keyMap, dim_vals, notFound, load_json, mode, cached, json_path, dynamic, plot_id){
			  this.frames = frames;
			  this.id = id;
			  this.plot_id = plot_id;
			  this.slider_ids = slider_ids;
			  this.keyMap = keyMap
			  this.current_frame = 0;
			  this.current_vals = dim_vals;
			  this.load_json = load_json;
			  this.mode = mode;
			  this.notFound = notFound;
			  this.cached = cached;
			  this.dynamic = dynamic;
			  this.cache = {};
			  this.json_path = json_path;
			  this.init_slider(this.current_vals[0]);
			  this.queue = [];
			  this.wait = false;
			  if (!this.cached || this.dynamic) {
				this.comm = this.init_comms();
			  }
			}

			SelectionWidget.prototype = new HoloViewsWidget;


			SelectionWidget.prototype.get_key = function(current_vals) {
			  var key = "(";
			  for (var i=0; i<this.slider_ids.length; i++)
			  {
				var val = this.current_vals[i];
				if (!(typeof val === 'string')) {
				  if (val % 1 === 0) { val = val.toFixed(1); }
				  else { val = val.toFixed(10); val = val.slice(0, val.length-1);}
				}
				key += "'" + val + "'";
				if(i != this.slider_ids.length-1) { key += ', ';}
				else if(this.slider_ids.length == 1) { key += ',';}
			  }
			  key += ")";
			  return this.keyMap[key];
			}

			SelectionWidget.prototype.set_frame = function(dim_val, dim_idx){
			  this.current_vals[dim_idx] = dim_val;
			  var key = this.current_vals;
			  if (!this.dynamic) {
				key = this.get_key(key)
			  }
			  if (this.dynamic || !this.cached) {
				if ((this.time !== undefined) && ((this.wait) && ((this.time + 10000) > Date.now()))) {
				  this.queue.push(key);
				  return
				}
				this.queue = [];
				this.time = Date.now();
				this.current_frame = key;
				this.wait = true;
				this.dynamic_update(key)
			  } else if (key !== undefined) {
				this.update(key)
			  }
			}


			/* Define the ScrubberWidget class */
			function ScrubberWidget(frames, num_frames, id, interval, load_json, mode, cached, json_path, dynamic, plot_id){
			  this.slider_id = "_anim_slider" + id;
			  this.loop_select_id = "_anim_loop_select" + id;
			  this.id = id;
			  this.plot_id = plot_id;
			  this.interval = interval;
			  this.current_frame = 0;
			  this.direction = 0;
			  this.dynamic = dynamic;
			  this.timer = null;
			  this.load_json = load_json;
			  this.mode = mode;
			  this.cached = cached;
			  this.frames = frames;
			  this.cache = {};
			  this.length = num_frames;
			  this.json_path = json_path;
			  document.getElementById(this.slider_id).max = this.length - 1;
			  this.init_slider(0);
			  this.wait = false;
			  this.queue = [];
			  if (!this.cached || this.dynamic) {
				this.comm = this.init_comms()
			  }
			}

			ScrubberWidget.prototype = new HoloViewsWidget;

			ScrubberWidget.prototype.set_frame = function(frame){
			  this.current_frame = frame;
			  var widget = document.getElementById(this.slider_id);
			  if (widget === null) {
				this.pause_animation();
				return
			  }
			  widget.value = this.current_frame;
			  if (this.dynamic || !this.cached) {
				if ((this.time !== undefined) && ((this.wait) && ((this.time + 10000) > Date.now()))) {
				  this.queue.push(frame);
				  return
				}
				this.queue = [];
				this.time = Date.now();
				this.wait = true;
				this.dynamic_update(frame)
			  } else {
				this.update(frame)
			  }
			}

			ScrubberWidget.prototype.get_loop_state = function(){
			  var button_group = document[this.loop_select_id].state;
			  for (var i = 0; i < button_group.length; i++) {
				var button = button_group[i];
				if (button.checked) {
				  return button.value;
				}
			  }
			  return undefined;
			}


			ScrubberWidget.prototype.next_frame = function() {
			  this.set_frame(Math.min(this.length - 1, this.current_frame + 1));
			}

			ScrubberWidget.prototype.previous_frame = function() {
			  this.set_frame(Math.max(0, this.current_frame - 1));
			}

			ScrubberWidget.prototype.first_frame = function() {
			  this.set_frame(0);
			}

			ScrubberWidget.prototype.last_frame = function() {
			  this.set_frame(this.length - 1);
			}

			ScrubberWidget.prototype.slower = function() {
			  this.interval /= 0.7;
			  if(this.direction > 0){this.play_animation();}
			  else if(this.direction < 0){this.reverse_animation();}
			}

			ScrubberWidget.prototype.faster = function() {
			  this.interval *= 0.7;
			  if(this.direction > 0){this.play_animation();}
			  else if(this.direction < 0){this.reverse_animation();}
			}

			ScrubberWidget.prototype.anim_step_forward = function() {
			  if(this.current_frame < this.length - 1){
				this.next_frame();
			  }else{
				var loop_state = this.get_loop_state();
				if(loop_state == "loop"){
				  this.first_frame();
				}else if(loop_state == "reflect"){
				  this.last_frame();
				  this.reverse_animation();
				}else{
				  this.pause_animation();
				  this.last_frame();
				}
			  }
			}

			ScrubberWidget.prototype.anim_step_reverse = function() {
			  if(this.current_frame > 0){
				this.previous_frame();
			  } else {
				var loop_state = this.get_loop_state();
				if(loop_state == "loop"){
				  this.last_frame();
				}else if(loop_state == "reflect"){
				  this.first_frame();
				  this.play_animation();
				}else{
				  this.pause_animation();
				  this.first_frame();
				}
			  }
			}

			ScrubberWidget.prototype.pause_animation = function() {
			  this.direction = 0;
			  if (this.timer){
				clearInterval(this.timer);
				this.timer = null;
			  }
			}

			ScrubberWidget.prototype.play_animation = function() {
			  this.pause_animation();
			  this.direction = 1;
			  var t = this;
			  if (!this.timer) this.timer = setInterval(function(){t.anim_step_forward();}, this.interval);
			}

			ScrubberWidget.prototype.reverse_animation = function() {
			  this.pause_animation();
			  this.direction = -1;
			  var t = this;
			  if (!this.timer) this.timer = setInterval(function(){t.anim_step_reverse();}, this.interval);
			}

			function extend(destination, source) {
			  for (var k in source) {
				if (source.hasOwnProperty(k)) {
				  destination[k] = source[k];
				}
			  }
			  return destination;
			}

			function update_widget(widget, values) {
			  if (widget.hasClass("ui-slider")) {
				widget.slider('option', {
				  min: 0,
				  max: values.length-1,
				  dim_vals: values,
				  value: 0,
				  dim_labels: values
				})
				widget.slider('option', 'slide').call(widget, event, {value: 0})
			  } else {
				widget.empty();
				for (var i=0; i<values.length; i++){
				  widget.append($("<option>", {
					value: i,
					text: values[i]
				  }))
				};
				widget.data('values', values);
				widget.data('value', 0);
				widget.trigger("change");
			  };
			}

			function init_slider(id, plot_id, dim, values, next_vals, labels, dynamic, step, value, next_dim,
								 dim_idx, delay, jQueryUI_CDN, UNDERSCORE_CDN) {
			  // Slider JS Block START
			  function loadcssfile(filename){
				var fileref=document.createElement("link")
				fileref.setAttribute("rel", "stylesheet")
				fileref.setAttribute("type", "text/css")
				fileref.setAttribute("href", filename)
				document.getElementsByTagName("head")[0].appendChild(fileref)
			  }
			  loadcssfile("https://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css");
			  /* Check if jQuery and jQueryUI have been loaded
				 otherwise load with require.js */
			  var jQuery = window.jQuery,
				// check for old versions of jQuery
				oldjQuery = jQuery && !!jQuery.fn.jquery.match(/^1\.[0-4](\.|$)/),
				jquery_path = '',
				paths = {},
				noConflict;
			  var jQueryUI = jQuery.ui;
			  // check for jQuery
			  if (!jQuery || oldjQuery) {
				// load if it's not available or doesn't meet min standards
				paths.jQuery = jQuery;
				noConflict = !!oldjQuery;
			  } else {
				// register the current jQuery
				define('jquery', [], function() { return jQuery; });
			  }
			  if (!jQueryUI) {
				paths.jQueryUI = jQueryUI_CDN.slice(null, -3);
			  } else {
				define('jQueryUI', [], function() { return jQuery.ui; });
			  }
			  paths.underscore = UNDERSCORE_CDN.slice(null, -3);
			  var jquery_require = {
				paths: paths,
				shim: {
				  "jQueryUI": {
					exports:"$",
					deps: ['jquery']
				  },
				  "underscore": {
					exports: '_'
				  }
				}
			  }
			  require.config(jquery_require);
			  require(["jQueryUI", "underscore"], function(jUI, _){
				if (noConflict) $.noConflict(true);
				var vals = values;
				if (dynamic && vals.constructor === Array) {
				  var default_value = parseFloat(value);
				  var min = parseFloat(vals[0]);
				  var max = parseFloat(vals[vals.length-1]);
				  var wstep = step;
				  var wlabels = [default_value];
				  var init_label = default_value;
				} else {
				  var min = 0;
				  if (dynamic) {
					var max = Object.keys(vals).length - 1;
					var init_label = labels[value];
					var default_value = values[value];
				  } else {
					var max = vals.length - 1;
					var init_label = labels[value];
					var default_value = value;
				  }
				  var wstep = 1;
				  var wlabels = labels;
				}
				function adjustFontSize(text) {
				  var width_ratio = (text.parent().width()/8)/text.val().length;
				  var size = Math.min(0.9, Math.max(0.6, width_ratio))+'em';
				  text.css('font-size', size);
				}
				var slider = $('#_anim_widget'+id+'_'+dim);
				slider.slider({
				  animate: "fast",
				  min: min,
				  max: max,
				  step: wstep,
				  value: default_value,
				  dim_vals: vals,
				  dim_labels: wlabels,
				  next_vals: next_vals,
				  slide: function(event, ui) {
					var vals = slider.slider("option", "dim_vals");
					var next_vals = slider.slider("option", "next_vals");
					var dlabels = slider.slider("option", "dim_labels");
					if (dynamic) {
					  var dim_val = ui.value;
					  if (vals.constructor === Array) {
						var label = ui.value;
					  } else {
						var label = dlabels[ui.value];
					  }
					} else {
					  var dim_val = vals[ui.value];
					  var label = dlabels[ui.value];
					}
					var text = $('#textInput'+id+'_'+dim);
					text.val(label);
					adjustFontSize(text);
					HoloViews.index[plot_id].set_frame(dim_val, dim_idx);
					if (Object.keys(next_vals).length > 0) {
					  var new_vals = next_vals[dim_val];
					  var next_widget = $('#_anim_widget'+id+'_'+next_dim);
					  update_widget(next_widget, new_vals);
					}
				  }
				});
				slider.keypress(function(event) {
				  if (event.which == 80 || event.which == 112) {
					var start = slider.slider("option", "value");
					var stop =  slider.slider("option", "max");
					for (var i=start; i<=stop; i++) {
					  var delay = i*delay;
					  $.proxy(function doSetTimeout(i) { setTimeout($.proxy(function() {
						var val = {value:i};
						slider.slider('value',i);
						slider.slider("option", "slide")(null, val);
					  }, slider), delay);}, slider)(i);
					}
				  }
				  if (event.which == 82 || event.which == 114) {
					var start = slider.slider("option", "value");
					var stop =  slider.slider("option", "min");
					var count = 0;
					for (var i=start; i>=stop; i--) {
					  var delay = count*delay;
					  count = count + 1;
					  $.proxy(function doSetTimeout(i) { setTimeout($.proxy(function() {
						var val = {value:i};
						slider.slider('value',i);
						slider.slider("option", "slide")(null, val);
					  }, slider), delay);}, slider)(i);
					}
				  }
				});
				var textInput = $('#textInput'+id+'_'+dim)
				textInput.val(init_label);
				adjustFontSize(textInput);
			  });
			}

			function init_dropdown(id, plot_id, dim, vals, value, next_vals, labels, next_dim, dim_idx, dynamic) {
			  var widget = $("#_anim_widget"+id+'_'+dim);
			  widget.data('values', vals)
			  for (var i=0; i<vals.length; i++){
				if (dynamic) {
				  var val = vals[i];
				} else {
				  var val = i;
				}
				widget.append($("<option>", {
				  value: val,
				  text: labels[i]
				}));
			  };
			  widget.data("next_vals", next_vals);
			  widget.val(value);
			  widget.on('change', function(event, ui) {
				if (dynamic) {
				  var dim_val = parseInt(this.value);
				} else {
				  var dim_val = $.data(this, 'values')[this.value];
				}
				var next_vals = $.data(this, "next_vals");
				if (Object.keys(next_vals).length > 0) {
				  var new_vals = next_vals[dim_val];
				  var next_widget = $('#_anim_widget'+id+'_'+next_dim);
				  update_widget(next_widget, new_vals);
				}
				var widgets = HoloViews.index[plot_id]
				if (widgets) {
				  widgets.set_frame(dim_val, dim_idx);
				}
			  });
			}


			if (window.HoloViews === undefined) {
			  window.HoloViews = {}
			  window.PyViz = window.HoloViews
			} else if (window.PyViz === undefined) {
			  window.PyViz = window.HoloViews
			}


			var _namespace = {
			  init_slider: init_slider,
			  init_dropdown: init_dropdown,
			  comms: {},
			  comm_status: {},
			  index: {},
			  plot_index: {},
			  kernels: {},
			  receivers: {}
			}

			for (var k in _namespace) {
			  if (!(k in window.HoloViews)) {
				window.HoloViews[k] = _namespace[k];
			  }
			}

			// Define Bokeh specific subclasses
			function BokehSelectionWidget() {
			  SelectionWidget.apply(this, arguments);
			}

			function BokehScrubberWidget() {
			  ScrubberWidget.apply(this, arguments);
			}

			// Let them inherit from the baseclasses
			BokehSelectionWidget.prototype = Object.create(SelectionWidget.prototype);
			BokehScrubberWidget.prototype = Object.create(ScrubberWidget.prototype);

			// Define methods to override on widgets
			var BokehMethods = {
			  update_cache : function(){
				for (var index in this.frames) {
				  this.frames[index] = JSON.parse(this.frames[index]);
				}
			  },
			  update : function(current){
				if (current === undefined) {
				  return;
				}
				var data = this.frames[current];
				if (data !== undefined) {
				  if (data.root in HoloViews.plot_index) {
					var doc = HoloViews.plot_index[data.root].model.document;
				  } else {
					var doc = Bokeh.index[data.root].model.document;
				  }
				  doc.apply_json_patch(data.content);
				}
			  },
			  init_comms: function() {
				if (Bokeh.protocol !== undefined) {
				  this.receiver = new Bokeh.protocol.Receiver()
				} else {
				  this.receiver = null;
				}
				return HoloViewsWidget.prototype.init_comms.call(this);
			  },
			  process_msg : function(msg) {
				if (this.plot_id in HoloViews.plot_index) {
				  var doc = HoloViews.plot_index[this.plot_id].model.document;
				} else {
				  var doc = Bokeh.index[this.plot_id].model.document;
				}
				if (this.receiver === null) { return }
				var receiver = this.receiver;
				if (msg.buffers.length > 0) {
				  receiver.consume(msg.buffers[0].buffer)
				} else {
				  receiver.consume(msg.content.data)
				}
				const comm_msg = receiver.message;
				if ((comm_msg != null) && (doc != null)) {
				  doc.apply_json_patch(comm_msg.content, comm_msg.buffers)
				}
			  }
			}

			// Extend Bokeh widgets with backend specific methods
			extend(BokehSelectionWidget.prototype, BokehMethods);
			extend(BokehScrubberWidget.prototype, BokehMethods);

			window.HoloViews.BokehSelectionWidget = BokehSelectionWidget
			window.HoloViews.BokehScrubberWidget = BokehScrubberWidget

			// Define MPL specific subclasses
			function MPLSelectionWidget() {
			  SelectionWidget.apply(this, arguments);
			}

			function MPLScrubberWidget() {
			  ScrubberWidget.apply(this, arguments);
			}

			// Let them inherit from the baseclasses
			MPLSelectionWidget.prototype = Object.create(SelectionWidget.prototype);
			MPLScrubberWidget.prototype = Object.create(ScrubberWidget.prototype);

			// Define methods to override on widgets
			var MPLMethods = {
			  init_slider : function(init_val){
				if(this.load_json) {
				  this.from_json()
				} else {
				  this.update_cache();
				}
				if (this.dynamic | !this.cached | (this.current_vals === undefined)) {
				  this.update(0)
				} else {
				  this.set_frame(this.current_vals[0], 0)
				}
			  },
			  process_msg : function(msg) {
				var data = msg.content.data;
				this.frames[this.current] = data;
				this.update_cache(true);
				this.update(this.current);
			  }
			}
			// Extend MPL widgets with backend specific methods
			extend(MPLSelectionWidget.prototype, MPLMethods);
			extend(MPLScrubberWidget.prototype, MPLMethods);

			window.HoloViews.MPLSelectionWidget = MPLSelectionWidget
			window.HoloViews.MPLScrubberWidget = MPLScrubberWidget
			</script>
			<script type="text/javascript">
				function JupyterCommManager() {
				}

				JupyterCommManager.prototype.register_target = function(plot_id, comm_id, msg_handler) {
				  if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
					var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
					comm_manager.register_target(comm_id, function(comm) {
					  comm.on_msg(msg_handler);
					});
				  } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
					window.PyViz.kernels[plot_id].registerCommTarget(comm_id, function(comm) {
					  comm.onMsg = msg_handler;
					});
				  }
				}

				JupyterCommManager.prototype.get_client_comm = function(plot_id, comm_id, msg_handler) {
				  if (comm_id in window.PyViz.comms) {
					return window.PyViz.comms[comm_id];
				  } else if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
					var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
					var comm = comm_manager.new_comm(comm_id, {}, {}, {}, comm_id);
					if (msg_handler) {
					  comm.on_msg(msg_handler);
					}
				  } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
					var comm = window.PyViz.kernels[plot_id].connectToComm(comm_id);
					comm.open();
					if (msg_handler) {
					  comm.onMsg = msg_handler;
					}
				  }

				  window.PyViz.comms[comm_id] = comm;
				  return comm;
				}

				window.PyViz.comm_manager = new JupyterCommManager();
				</script>

			<link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-1.2.0.min.css">
			<link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-widgets-1.2.0.min.css">
			<link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-tables-1.2.0.min.css">
			<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
			<link rel="stylesheet" href="https://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
			<style>div.bk-hbox {
				display: flex;
				justify-content: center;
			}

			div.bk-hbox div.bk-plot {
				padding: 8px;
			}

			div.bk-hbox div.bk-data-table {
				padding: 20px;
			}

			div.hololayout {
			  display: flex;
			  align-items: center;
			  margin: 0;
			}

			div.holoframe {
			  width: 75%;
			}

			div.holowell {
			  display: flex;
			  align-items: center;
			}

			form.holoform {
			  background-color: #fafafa;
			  border-radius: 5px;
			  overflow: hidden;
			  padding-left: 0.8em;
			  padding-right: 0.8em;
			  padding-top: 0.4em;
			  padding-bottom: 0.4em;
			  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
			  margin-bottom: 20px;
			  border: 1px solid #e3e3e3;
			}

			div.holowidgets {
			  padding-right: 0;
			  width: 25%;
			}

			div.holoslider {
			  min-height: 0 !important;
			  height: 0.8em;
			  width: 100%;
			}

			div.holoformgroup {
			  padding-top: 0.5em;
			  margin-bottom: 0.5em;
			}

			div.hologroup {
			  padding-left: 0;
			  padding-right: 0.8em;
			  width: 100%;
			}

			.holoselect {
			  width: 92%;
			  margin-left: 0;
			  margin-right: 0;
			}

			.holotext {
			  padding-left:  0.5em;
			  padding-right: 0;
			  width: 100%;
			}

			.holowidgets .ui-resizable-se {
			  visibility: hidden
			}

			.holoframe > .ui-resizable-se {
			  visibility: hidden
			}

			.holowidgets .ui-resizable-s {
			  visibility: hidden
			}


			/* CSS rules for noUISlider based slider used by JupyterLab extension  */

			.noUi-handle {
			  width: 20px !important;
			  height: 20px !important;
			  left: -5px !important;
			  top: -5px !important;
			}

			.noUi-handle:before, .noUi-handle:after {
			  visibility: hidden;
			  height: 0px;
			}

			.noUi-target {
			  margin-left: 0.5em;
			  margin-right: 0.5em;
			}
			</style><div style='display: table; margin: 0 auto;'>






			  <div class="bk-root" id="312f2c25-fbe4-4d90-9f45-b7fda97d0fde" data-root-id="10805"></div>

			<script type="text/javascript">
			  (function(root) {
			  function embed_document(root) {

			  var docs_json = {"9bd2b868-ef36-46cc-9c04-9f95df751a9f":{"roots":{"references":[{"attributes":{"below":[{"id":"10814","type":"LinearAxis"}],"center":[{"id":"10818","type":"Grid"},{"id":"10823","type":"Grid"}],"left":[{"id":"10819","type":"LinearAxis"}],"margin":null,"min_border_bottom":10,"min_border_left":10,"min_border_right":10,"min_border_top":10,"plot_height":250,"plot_width":750,"renderers":[{"id":"10842","type":"GlyphRenderer"}],"sizing_mode":"fixed","title":{"id":"10806","type":"Title"},"toolbar":{"id":"10829","type":"Toolbar"},"x_range":{"id":"10802","type":"Range1d"},"x_scale":{"id":"10810","type":"LinearScale"},"y_range":{"id":"10803","type":"Range1d"},"y_scale":{"id":"10812","type":"LinearScale"}},"id":"10805","subtype":"Figure","type":"Plot"},{"attributes":{"overlay":{"id":"10855","type":"BoxAnnotation"}},"id":"10827","type":"BoxZoomTool"},{"attributes":{},"id":"10854","type":"UnionRenderers"},{"attributes":{},"id":"10847","type":"BasicTickFormatter"},{"attributes":{"bottom":{"value":0},"fill_color":{"value":"#30a2da"},"left":{"field":"left"},"right":{"field":"right"},"top":{"field":"top"}},"id":"10839","type":"Quad"},{"attributes":{"grid_line_color":null,"ticker":{"id":"10815","type":"BasicTicker"}},"id":"10818","type":"Grid"},{"attributes":{},"id":"10820","type":"BasicTicker"},{"attributes":{"bottom_units":"screen","fill_alpha":{"value":0.5},"fill_color":{"value":"lightgrey"},"left_units":"screen","level":"overlay","line_alpha":{"value":1.0},"line_color":{"value":"black"},"line_dash":[4,4],"line_width":{"value":2},"render_mode":"css","right_units":"screen","top_units":"screen"},"id":"10855","type":"BoxAnnotation"},{"attributes":{},"id":"10812","type":"LinearScale"},{"attributes":{"callback":null,"end":16860.0,"reset_end":16860.0,"reset_start":0.0,"tags":[[["Frequency","Frequency",null]]]},"id":"10803","type":"Range1d"},{"attributes":{},"id":"10828","type":"ResetTool"},{"attributes":{"axis_label":"Freq","bounds":"auto","formatter":{"id":"10847","type":"BasicTickFormatter"},"major_label_orientation":"horizontal","ticker":{"id":"10820","type":"BasicTicker"}},"id":"10819","type":"LinearAxis"},{"attributes":{},"id":"10826","type":"WheelZoomTool"},{"attributes":{"bottom":{"value":0},"fill_alpha":{"value":0.2},"fill_color":{"value":"#30a2da"},"left":{"field":"left"},"line_alpha":{"value":0.2},"line_color":{"value":"black"},"right":{"field":"right"},"top":{"field":"top"}},"id":"10841","type":"Quad"},{"attributes":{"dimension":1,"grid_line_color":null,"ticker":{"id":"10820","type":"BasicTicker"}},"id":"10823","type":"Grid"},{"attributes":{"source":{"id":"10836","type":"ColumnDataSource"}},"id":"10843","type":"CDSView"},{"attributes":{},"id":"10845","type":"BasicTickFormatter"},{"attributes":{"data_source":{"id":"10836","type":"ColumnDataSource"},"glyph":{"id":"10839","type":"Quad"},"hover_glyph":null,"muted_glyph":{"id":"10841","type":"Quad"},"nonselection_glyph":{"id":"10840","type":"Quad"},"selection_glyph":null,"view":{"id":"10843","type":"CDSView"}},"id":"10842","type":"GlyphRenderer"},{"attributes":{"callback":null,"renderers":[{"id":"10842","type":"GlyphRenderer"}],"tags":["hv_created"],"tooltips":[["x","@{x}"],["Frequency","@{Frequency}"]]},"id":"10804","type":"HoverTool"},{"attributes":{},"id":"10825","type":"PanTool"},{"attributes":{"bottom":{"value":0},"fill_alpha":{"value":0.1},"fill_color":{"value":"#30a2da"},"left":{"field":"left"},"line_alpha":{"value":0.1},"line_color":{"value":"black"},"right":{"field":"right"},"top":{"field":"top"}},"id":"10840","type":"Quad"},{"attributes":{},"id":"10824","type":"SaveTool"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_multi":null,"active_scroll":"auto","active_tap":"auto","tools":[{"id":"10804","type":"HoverTool"},{"id":"10824","type":"SaveTool"},{"id":"10825","type":"PanTool"},{"id":"10826","type":"WheelZoomTool"},{"id":"10827","type":"BoxZoomTool"},{"id":"10828","type":"ResetTool"}]},"id":"10829","type":"Toolbar"},{"attributes":{},"id":"10810","type":"LinearScale"},{"attributes":{},"id":"10837","type":"Selection"},{"attributes":{"callback":null,"end":49.0,"reset_end":49.0,"reset_start":1.0,"start":1.0,"tags":[[["x","x",null]]]},"id":"10802","type":"Range1d"},{"attributes":{"axis_label":"Reviews per Author","bounds":"auto","formatter":{"id":"10845","type":"BasicTickFormatter"},"major_label_orientation":"horizontal","ticker":{"id":"10815","type":"BasicTicker"}},"id":"10814","type":"LinearAxis"},{"attributes":{"text":"Reviews per Author","text_color":{"value":"black"},"text_font_size":{"value":"12pt"}},"id":"10806","type":"Title"},{"attributes":{"callback":null,"data":{"Frequency":[16860,5883,3015,1983,1398,1072,846,712,605,486,405,349,363,291,283,239,214,195,206,173,149,135,146,142,0,127,131,120,103,121,92,107,91,93,75,88,81,76,77,65,60,65,70,55,66,53,65,53,52,56],"left":{"__ndarray__":"AAAAAAAA8D9cj8L1KFz/P1yPwvUoXAdACtejcD0KD0Bcj8L1KFwTQDMzMzMzMxdACtejcD0KG0DhehSuR+EeQFyPwvUoXCFASOF6FK5HI0AzMzMzMzMlQB6F61G4HidACtejcD0KKUD2KFyPwvUqQOF6FK5H4SxAzMzMzMzMLkBcj8L1KFwwQFK4HoXrUTFASOF6FK5HMkA9CtejcD0zQDMzMzMzMzRAKVyPwvUoNUAehetRuB42QBSuR+F6FDdACtejcD0KOEAAAAAAAAA5QPYoXI/C9TlA61G4HoXrOkDhehSuR+E7QNejcD0K1zxAzMzMzMzMPUDC9Shcj8I+QLgehetRuD9A16NwPQpXQEBSuB6F69FAQM3MzMzMTEFASOF6FK7HQUDC9Shcj0JCQD0K16NwvUJAuB6F61E4Q0AzMzMzM7NDQK5H4XoULkRAKVyPwvWoRECkcD0K1yNFQB6F61G4nkVAmZmZmZkZRkAUrkfhepRGQI/C9ShcD0dACtejcD2KR0CF61G4HgVIQA==","dtype":"float64","shape":[50]},"right":{"__ndarray__":"XI/C9Shc/z9cj8L1KFwHQArXo3A9Cg9AXI/C9ShcE0AzMzMzMzMXQArXo3A9ChtA4XoUrkfhHkBcj8L1KFwhQEjhehSuRyNAMzMzMzMzJUAehetRuB4nQArXo3A9CilA9ihcj8L1KkDhehSuR+EsQMzMzMzMzC5AXI/C9ShcMEBSuB6F61ExQEjhehSuRzJAPQrXo3A9M0AzMzMzMzM0QClcj8L1KDVAHoXrUbgeNkAUrkfhehQ3QArXo3A9CjhAAAAAAAAAOUD2KFyPwvU5QOtRuB6F6zpA4XoUrkfhO0DXo3A9Ctc8QMzMzMzMzD1AwvUoXI/CPkC4HoXrUbg/QNejcD0KV0BAUrgehevRQEDNzMzMzExBQEjhehSux0FAwvUoXI9CQkA9CtejcL1CQLgehetROENAMzMzMzOzQ0CuR+F6FC5EQClcj8L1qERApHA9CtcjRUAehetRuJ5FQJmZmZmZGUZAFK5H4XqURkCPwvUoXA9HQArXo3A9ikdAhetRuB4FSEAAAAAAAIBIQA==","dtype":"float64","shape":[50]},"top":[16860,5883,3015,1983,1398,1072,846,712,605,486,405,349,363,291,283,239,214,195,206,173,149,135,146,142,0,127,131,120,103,121,92,107,91,93,75,88,81,76,77,65,60,65,70,55,66,53,65,53,52,56],"x":{"__ndarray__":"rkfhehSu9z+F61G4HoUDQDMzMzMzMwtAcD0K16NwEUBI4XoUrkcVQB6F61G4HhlA9ihcj8L1HEBmZmZmZmYgQFK4HoXrUSJAPgrXo3A9JEAoXI/C9SgmQBSuR+F6FChAAAAAAAAAKkDsUbgehesrQNajcD0K1y1AwvUoXI/CL0DXo3A9CtcwQM3MzMzMzDFAwvUoXI/CMkC4HoXrUbgzQK5H4XoUrjRApHA9CtejNUCZmZmZmZk2QI/C9ShcjzdAhetRuB6FOEB7FK5H4Xo5QHA9CtejcDpAZmZmZmZmO0Bcj8L1KFw8QFK4HoXrUT1AR+F6FK5HPkA9CtejcD0/QJqZmZmZGUBAFK5H4XqUQECQwvUoXA9BQArXo3A9ikFAhetRuB4FQkAAAAAAAIBCQHoUrkfh+kJA9ihcj8J1Q0BwPQrXo/BDQOxRuB6Fa0RAZmZmZmbmREDhehSuR2FFQFyPwvUo3EVA1qNwPQpXRkBSuB6F69FGQMzMzMzMTEdASOF6FK7HR0DC9Shcj0JIQA==","dtype":"float64","shape":[50]}},"selected":{"id":"10837","type":"Selection"},"selection_policy":{"id":"10854","type":"UnionRenderers"}},"id":"10836","type":"ColumnDataSource"},{"attributes":{},"id":"10815","type":"BasicTicker"}],"root_ids":["10805"]},"title":"Bokeh Application","version":"1.2.0"}};
			  var render_items = [{"docid":"9bd2b868-ef36-46cc-9c04-9f95df751a9f","roots":{"10805":"312f2c25-fbe4-4d90-9f45-b7fda97d0fde"}}];
			  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);

			  }
			  if (root.Bokeh !== undefined) {
				embed_document(root);
			  } else {
				var attempts = 0;
				var timer = setInterval(function(root) {
				  if (root.Bokeh !== undefined) {
					embed_document(root);
					clearInterval(timer);
				  }
				  attempts++;
				  if (attempts > 100) {
					console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
					clearInterval(timer);
				  }
				}, 10, root)
			  }
			})(window);
			</script>
			</div>
	</div>

	<p>
		The data also comprises 790,216 written reviews. Further, there are 41,580 authors associated with these reviews.
		The mean number of reviews writter per author is 19, but again this value has been pulled upward by the right skew
		of the values. The author, <a href="https://www.beeradvocate.com/community/members/stonedtrippin.601042/">StonedTrippin</a>
		has written a massive 2008 reviews in this dataset.
	</p>

	<!-- Reviews per Beer Histogram -->
	<div>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-widgets-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-tables-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-gl-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://code.jquery.com/jquery-2.1.4.min.js" type="text/javascript"></script>
			<script src="https://code.jquery.com/ui/1.10.4/jquery-ui.min.js" type="text/javascript"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.20/require.min.js" type="text/javascript"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js" type="text/javascript"></script>
			<script type="text/javascript">function HoloViewsWidget() {
			}

			HoloViewsWidget.prototype.init_slider = function(init_val){
			  if(this.load_json) {
				this.from_json()
			  } else {
				this.update_cache();
			  }
			}

			HoloViewsWidget.prototype.populate_cache = function(idx){
			  this.cache[idx].innerHTML = this.frames[idx];
			  if (this.embed) {
				delete this.frames[idx];
			  }
			}

			HoloViewsWidget.prototype.process_error = function(msg){
			}

			HoloViewsWidget.prototype.from_json = function() {
			  var data_url = this.json_path + this.id + '.json';
			  $.getJSON(data_url, $.proxy(function(json_data) {
				this.frames = json_data;
				this.update_cache();
				this.update(0);
			  }, this));
			}

			HoloViewsWidget.prototype.dynamic_update = function(current){
			  if (current === undefined) {
				return
			  }
			  this.current = current;
			  if (this.comm) {
				var msg = {comm_id: this.id+'_client', content: current}
				this.comm.send(msg);
			  }
			}

			HoloViewsWidget.prototype.update_cache = function(force){
			  var frame_len = Object.keys(this.frames).length;
			  for (var i=0; i<frame_len; i++) {
				if(!this.load_json || this.dynamic)  {
				  var frame = Object.keys(this.frames)[i];
				} else {
				  var frame = i;
				}
				if(!(frame in this.cache) || force) {
				  if ((frame in this.cache) && force) { this.cache[frame].remove() }
				  var div = document.createElement("div");
				  var parent = document.getElementById("_anim_img"+this.id);
				  div.style.display = "none";
				  parent.appendChild(div)
				  this.cache[frame] = div;
				  var cache_id = "_anim_img"+this.id+"_"+frame;
				  this.populate_cache(frame);
				}
			  }
			}

			HoloViewsWidget.prototype.update = function(current){
			  if(current in this.cache) {
				for (var index in this.cache) {
				  this.cache[index].style.display = "none";
				}
				this.cache[current].style.display = "";
				this.wait = false;
			  }
			}

			HoloViewsWidget.prototype.init_comms = function() {
			  var that = this
			  HoloViews.comm_manager.register_target(this.plot_id, this.id, function (msg) { that.msg_handler(msg) })
			  if (!this.cached || this.dynamic) {
				function ack_callback(msg) {
				  var msg = msg.metadata;
				  var comm_id = msg.comm_id;
				  var comm_status = HoloViews.comm_status[comm_id];
				  if (that.queue.length > 0) {
					that.time = Date.now();
					that.dynamic_update(that.queue[that.queue.length-1]);
					that.queue = [];
				  } else {
					that.wait = false;
				  }
				  if ((msg.msg_type == "Ready") && msg.content) {
					console.log("Python callback returned following output:", msg.content);
				  } else if (msg.msg_type == "Error") {
					console.log("Python failed with the following traceback:", msg.traceback)
				  }
				}
				var comm = HoloViews.comm_manager.get_client_comm(this.plot_id, this.id+'_client', ack_callback);
				return comm
			  }
			}

			HoloViewsWidget.prototype.msg_handler = function(msg) {
			  var metadata = msg.metadata;
			  if ((metadata.msg_type == "Ready")) {
				if (metadata.content) {
				  console.log("Python callback returned following output:", metadata.content);
				}
			  return;
			  } else if (metadata.msg_type == "Error") {
				console.log("Python failed with the following traceback:", metadata.traceback)
				return
			  }
			  this.process_msg(msg)
			}

			HoloViewsWidget.prototype.process_msg = function(msg) {
			}

			function SelectionWidget(frames, id, slider_ids, keyMap, dim_vals, notFound, load_json, mode, cached, json_path, dynamic, plot_id){
			  this.frames = frames;
			  this.id = id;
			  this.plot_id = plot_id;
			  this.slider_ids = slider_ids;
			  this.keyMap = keyMap
			  this.current_frame = 0;
			  this.current_vals = dim_vals;
			  this.load_json = load_json;
			  this.mode = mode;
			  this.notFound = notFound;
			  this.cached = cached;
			  this.dynamic = dynamic;
			  this.cache = {};
			  this.json_path = json_path;
			  this.init_slider(this.current_vals[0]);
			  this.queue = [];
			  this.wait = false;
			  if (!this.cached || this.dynamic) {
				this.comm = this.init_comms();
			  }
			}

			SelectionWidget.prototype = new HoloViewsWidget;


			SelectionWidget.prototype.get_key = function(current_vals) {
			  var key = "(";
			  for (var i=0; i<this.slider_ids.length; i++)
			  {
				var val = this.current_vals[i];
				if (!(typeof val === 'string')) {
				  if (val % 1 === 0) { val = val.toFixed(1); }
				  else { val = val.toFixed(10); val = val.slice(0, val.length-1);}
				}
				key += "'" + val + "'";
				if(i != this.slider_ids.length-1) { key += ', ';}
				else if(this.slider_ids.length == 1) { key += ',';}
			  }
			  key += ")";
			  return this.keyMap[key];
			}

			SelectionWidget.prototype.set_frame = function(dim_val, dim_idx){
			  this.current_vals[dim_idx] = dim_val;
			  var key = this.current_vals;
			  if (!this.dynamic) {
				key = this.get_key(key)
			  }
			  if (this.dynamic || !this.cached) {
				if ((this.time !== undefined) && ((this.wait) && ((this.time + 10000) > Date.now()))) {
				  this.queue.push(key);
				  return
				}
				this.queue = [];
				this.time = Date.now();
				this.current_frame = key;
				this.wait = true;
				this.dynamic_update(key)
			  } else if (key !== undefined) {
				this.update(key)
			  }
			}


			/* Define the ScrubberWidget class */
			function ScrubberWidget(frames, num_frames, id, interval, load_json, mode, cached, json_path, dynamic, plot_id){
			  this.slider_id = "_anim_slider" + id;
			  this.loop_select_id = "_anim_loop_select" + id;
			  this.id = id;
			  this.plot_id = plot_id;
			  this.interval = interval;
			  this.current_frame = 0;
			  this.direction = 0;
			  this.dynamic = dynamic;
			  this.timer = null;
			  this.load_json = load_json;
			  this.mode = mode;
			  this.cached = cached;
			  this.frames = frames;
			  this.cache = {};
			  this.length = num_frames;
			  this.json_path = json_path;
			  document.getElementById(this.slider_id).max = this.length - 1;
			  this.init_slider(0);
			  this.wait = false;
			  this.queue = [];
			  if (!this.cached || this.dynamic) {
				this.comm = this.init_comms()
			  }
			}

			ScrubberWidget.prototype = new HoloViewsWidget;

			ScrubberWidget.prototype.set_frame = function(frame){
			  this.current_frame = frame;
			  var widget = document.getElementById(this.slider_id);
			  if (widget === null) {
				this.pause_animation();
				return
			  }
			  widget.value = this.current_frame;
			  if (this.dynamic || !this.cached) {
				if ((this.time !== undefined) && ((this.wait) && ((this.time + 10000) > Date.now()))) {
				  this.queue.push(frame);
				  return
				}
				this.queue = [];
				this.time = Date.now();
				this.wait = true;
				this.dynamic_update(frame)
			  } else {
				this.update(frame)
			  }
			}

			ScrubberWidget.prototype.get_loop_state = function(){
			  var button_group = document[this.loop_select_id].state;
			  for (var i = 0; i < button_group.length; i++) {
				var button = button_group[i];
				if (button.checked) {
				  return button.value;
				}
			  }
			  return undefined;
			}


			ScrubberWidget.prototype.next_frame = function() {
			  this.set_frame(Math.min(this.length - 1, this.current_frame + 1));
			}

			ScrubberWidget.prototype.previous_frame = function() {
			  this.set_frame(Math.max(0, this.current_frame - 1));
			}

			ScrubberWidget.prototype.first_frame = function() {
			  this.set_frame(0);
			}

			ScrubberWidget.prototype.last_frame = function() {
			  this.set_frame(this.length - 1);
			}

			ScrubberWidget.prototype.slower = function() {
			  this.interval /= 0.7;
			  if(this.direction > 0){this.play_animation();}
			  else if(this.direction < 0){this.reverse_animation();}
			}

			ScrubberWidget.prototype.faster = function() {
			  this.interval *= 0.7;
			  if(this.direction > 0){this.play_animation();}
			  else if(this.direction < 0){this.reverse_animation();}
			}

			ScrubberWidget.prototype.anim_step_forward = function() {
			  if(this.current_frame < this.length - 1){
				this.next_frame();
			  }else{
				var loop_state = this.get_loop_state();
				if(loop_state == "loop"){
				  this.first_frame();
				}else if(loop_state == "reflect"){
				  this.last_frame();
				  this.reverse_animation();
				}else{
				  this.pause_animation();
				  this.last_frame();
				}
			  }
			}

			ScrubberWidget.prototype.anim_step_reverse = function() {
			  if(this.current_frame > 0){
				this.previous_frame();
			  } else {
				var loop_state = this.get_loop_state();
				if(loop_state == "loop"){
				  this.last_frame();
				}else if(loop_state == "reflect"){
				  this.first_frame();
				  this.play_animation();
				}else{
				  this.pause_animation();
				  this.first_frame();
				}
			  }
			}

			ScrubberWidget.prototype.pause_animation = function() {
			  this.direction = 0;
			  if (this.timer){
				clearInterval(this.timer);
				this.timer = null;
			  }
			}

			ScrubberWidget.prototype.play_animation = function() {
			  this.pause_animation();
			  this.direction = 1;
			  var t = this;
			  if (!this.timer) this.timer = setInterval(function(){t.anim_step_forward();}, this.interval);
			}

			ScrubberWidget.prototype.reverse_animation = function() {
			  this.pause_animation();
			  this.direction = -1;
			  var t = this;
			  if (!this.timer) this.timer = setInterval(function(){t.anim_step_reverse();}, this.interval);
			}

			function extend(destination, source) {
			  for (var k in source) {
				if (source.hasOwnProperty(k)) {
				  destination[k] = source[k];
				}
			  }
			  return destination;
			}

			function update_widget(widget, values) {
			  if (widget.hasClass("ui-slider")) {
				widget.slider('option', {
				  min: 0,
				  max: values.length-1,
				  dim_vals: values,
				  value: 0,
				  dim_labels: values
				})
				widget.slider('option', 'slide').call(widget, event, {value: 0})
			  } else {
				widget.empty();
				for (var i=0; i<values.length; i++){
				  widget.append($("<option>", {
					value: i,
					text: values[i]
				  }))
				};
				widget.data('values', values);
				widget.data('value', 0);
				widget.trigger("change");
			  };
			}

			function init_slider(id, plot_id, dim, values, next_vals, labels, dynamic, step, value, next_dim,
								dim_idx, delay, jQueryUI_CDN, UNDERSCORE_CDN) {
			  // Slider JS Block START
			  function loadcssfile(filename){
				var fileref=document.createElement("link")
				fileref.setAttribute("rel", "stylesheet")
				fileref.setAttribute("type", "text/css")
				fileref.setAttribute("href", filename)
				document.getElementsByTagName("head")[0].appendChild(fileref)
			  }
			  loadcssfile("https://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css");
			  /* Check if jQuery and jQueryUI have been loaded
				otherwise load with require.js */
			  var jQuery = window.jQuery,
				// check for old versions of jQuery
				oldjQuery = jQuery && !!jQuery.fn.jquery.match(/^1\.[0-4](\.|$)/),
				jquery_path = '',
				paths = {},
				noConflict;
			  var jQueryUI = jQuery.ui;
			  // check for jQuery
			  if (!jQuery || oldjQuery) {
				// load if it's not available or doesn't meet min standards
				paths.jQuery = jQuery;
				noConflict = !!oldjQuery;
			  } else {
				// register the current jQuery
				define('jquery', [], function() { return jQuery; });
			  }
			  if (!jQueryUI) {
				paths.jQueryUI = jQueryUI_CDN.slice(null, -3);
			  } else {
				define('jQueryUI', [], function() { return jQuery.ui; });
			  }
			  paths.underscore = UNDERSCORE_CDN.slice(null, -3);
			  var jquery_require = {
				paths: paths,
				shim: {
				  "jQueryUI": {
					exports:"$",
					deps: ['jquery']
				  },
				  "underscore": {
					exports: '_'
				  }
				}
			  }
			  require.config(jquery_require);
			  require(["jQueryUI", "underscore"], function(jUI, _){
				if (noConflict) $.noConflict(true);
				var vals = values;
				if (dynamic && vals.constructor === Array) {
				  var default_value = parseFloat(value);
				  var min = parseFloat(vals[0]);
				  var max = parseFloat(vals[vals.length-1]);
				  var wstep = step;
				  var wlabels = [default_value];
				  var init_label = default_value;
				} else {
				  var min = 0;
				  if (dynamic) {
					var max = Object.keys(vals).length - 1;
					var init_label = labels[value];
					var default_value = values[value];
				  } else {
					var max = vals.length - 1;
					var init_label = labels[value];
					var default_value = value;
				  }
				  var wstep = 1;
				  var wlabels = labels;
				}
				function adjustFontSize(text) {
				  var width_ratio = (text.parent().width()/8)/text.val().length;
				  var size = Math.min(0.9, Math.max(0.6, width_ratio))+'em';
				  text.css('font-size', size);
				}
				var slider = $('#_anim_widget'+id+'_'+dim);
				slider.slider({
				  animate: "fast",
				  min: min,
				  max: max,
				  step: wstep,
				  value: default_value,
				  dim_vals: vals,
				  dim_labels: wlabels,
				  next_vals: next_vals,
				  slide: function(event, ui) {
					var vals = slider.slider("option", "dim_vals");
					var next_vals = slider.slider("option", "next_vals");
					var dlabels = slider.slider("option", "dim_labels");
					if (dynamic) {
					  var dim_val = ui.value;
					  if (vals.constructor === Array) {
						var label = ui.value;
					  } else {
						var label = dlabels[ui.value];
					  }
					} else {
					  var dim_val = vals[ui.value];
					  var label = dlabels[ui.value];
					}
					var text = $('#textInput'+id+'_'+dim);
					text.val(label);
					adjustFontSize(text);
					HoloViews.index[plot_id].set_frame(dim_val, dim_idx);
					if (Object.keys(next_vals).length > 0) {
					  var new_vals = next_vals[dim_val];
					  var next_widget = $('#_anim_widget'+id+'_'+next_dim);
					  update_widget(next_widget, new_vals);
					}
				  }
				});
				slider.keypress(function(event) {
				  if (event.which == 80 || event.which == 112) {
					var start = slider.slider("option", "value");
					var stop =  slider.slider("option", "max");
					for (var i=start; i<=stop; i++) {
					  var delay = i*delay;
					  $.proxy(function doSetTimeout(i) { setTimeout($.proxy(function() {
						var val = {value:i};
						slider.slider('value',i);
						slider.slider("option", "slide")(null, val);
					  }, slider), delay);}, slider)(i);
					}
				  }
				  if (event.which == 82 || event.which == 114) {
					var start = slider.slider("option", "value");
					var stop =  slider.slider("option", "min");
					var count = 0;
					for (var i=start; i>=stop; i--) {
					  var delay = count*delay;
					  count = count + 1;
					  $.proxy(function doSetTimeout(i) { setTimeout($.proxy(function() {
						var val = {value:i};
						slider.slider('value',i);
						slider.slider("option", "slide")(null, val);
					  }, slider), delay);}, slider)(i);
					}
				  }
				});
				var textInput = $('#textInput'+id+'_'+dim)
				textInput.val(init_label);
				adjustFontSize(textInput);
			  });
			}

			function init_dropdown(id, plot_id, dim, vals, value, next_vals, labels, next_dim, dim_idx, dynamic) {
			  var widget = $("#_anim_widget"+id+'_'+dim);
			  widget.data('values', vals)
			  for (var i=0; i<vals.length; i++){
				if (dynamic) {
				  var val = vals[i];
				} else {
				  var val = i;
				}
				widget.append($("<option>", {
				  value: val,
				  text: labels[i]
				}));
			  };
			  widget.data("next_vals", next_vals);
			  widget.val(value);
			  widget.on('change', function(event, ui) {
				if (dynamic) {
				  var dim_val = parseInt(this.value);
				} else {
				  var dim_val = $.data(this, 'values')[this.value];
				}
				var next_vals = $.data(this, "next_vals");
				if (Object.keys(next_vals).length > 0) {
				  var new_vals = next_vals[dim_val];
				  var next_widget = $('#_anim_widget'+id+'_'+next_dim);
				  update_widget(next_widget, new_vals);
				}
				var widgets = HoloViews.index[plot_id]
				if (widgets) {
				  widgets.set_frame(dim_val, dim_idx);
				}
			  });
			}


			if (window.HoloViews === undefined) {
			  window.HoloViews = {}
			  window.PyViz = window.HoloViews
			} else if (window.PyViz === undefined) {
			  window.PyViz = window.HoloViews
			}


			var _namespace = {
			  init_slider: init_slider,
			  init_dropdown: init_dropdown,
			  comms: {},
			  comm_status: {},
			  index: {},
			  plot_index: {},
			  kernels: {},
			  receivers: {}
			}

			for (var k in _namespace) {
			  if (!(k in window.HoloViews)) {
				window.HoloViews[k] = _namespace[k];
			  }
			}

			// Define Bokeh specific subclasses
			function BokehSelectionWidget() {
			  SelectionWidget.apply(this, arguments);
			}

			function BokehScrubberWidget() {
			  ScrubberWidget.apply(this, arguments);
			}

			// Let them inherit from the baseclasses
			BokehSelectionWidget.prototype = Object.create(SelectionWidget.prototype);
			BokehScrubberWidget.prototype = Object.create(ScrubberWidget.prototype);

			// Define methods to override on widgets
			var BokehMethods = {
			  update_cache : function(){
				for (var index in this.frames) {
				  this.frames[index] = JSON.parse(this.frames[index]);
				}
			  },
			  update : function(current){
				if (current === undefined) {
				  return;
				}
				var data = this.frames[current];
				if (data !== undefined) {
				  if (data.root in HoloViews.plot_index) {
					var doc = HoloViews.plot_index[data.root].model.document;
				  } else {
					var doc = Bokeh.index[data.root].model.document;
				  }
				  doc.apply_json_patch(data.content);
				}
			  },
			  init_comms: function() {
				if (Bokeh.protocol !== undefined) {
				  this.receiver = new Bokeh.protocol.Receiver()
				} else {
				  this.receiver = null;
				}
				return HoloViewsWidget.prototype.init_comms.call(this);
			  },
			  process_msg : function(msg) {
				if (this.plot_id in HoloViews.plot_index) {
				  var doc = HoloViews.plot_index[this.plot_id].model.document;
				} else {
				  var doc = Bokeh.index[this.plot_id].model.document;
				}
				if (this.receiver === null) { return }
				var receiver = this.receiver;
				if (msg.buffers.length > 0) {
				  receiver.consume(msg.buffers[0].buffer)
				} else {
				  receiver.consume(msg.content.data)
				}
				const comm_msg = receiver.message;
				if ((comm_msg != null) && (doc != null)) {
				  doc.apply_json_patch(comm_msg.content, comm_msg.buffers)
				}
			  }
			}

			// Extend Bokeh widgets with backend specific methods
			extend(BokehSelectionWidget.prototype, BokehMethods);
			extend(BokehScrubberWidget.prototype, BokehMethods);

			window.HoloViews.BokehSelectionWidget = BokehSelectionWidget
			window.HoloViews.BokehScrubberWidget = BokehScrubberWidget

			// Define MPL specific subclasses
			function MPLSelectionWidget() {
			  SelectionWidget.apply(this, arguments);
			}

			function MPLScrubberWidget() {
			  ScrubberWidget.apply(this, arguments);
			}

			// Let them inherit from the baseclasses
			MPLSelectionWidget.prototype = Object.create(SelectionWidget.prototype);
			MPLScrubberWidget.prototype = Object.create(ScrubberWidget.prototype);

			// Define methods to override on widgets
			var MPLMethods = {
			  init_slider : function(init_val){
				if(this.load_json) {
				  this.from_json()
				} else {
				  this.update_cache();
				}
				if (this.dynamic | !this.cached | (this.current_vals === undefined)) {
				  this.update(0)
				} else {
				  this.set_frame(this.current_vals[0], 0)
				}
			  },
			  process_msg : function(msg) {
				var data = msg.content.data;
				this.frames[this.current] = data;
				this.update_cache(true);
				this.update(this.current);
			  }
			}
			// Extend MPL widgets with backend specific methods
			extend(MPLSelectionWidget.prototype, MPLMethods);
			extend(MPLScrubberWidget.prototype, MPLMethods);

			window.HoloViews.MPLSelectionWidget = MPLSelectionWidget
			window.HoloViews.MPLScrubberWidget = MPLScrubberWidget
			</script>
			<script type="text/javascript">
				function JupyterCommManager() {
				}

				JupyterCommManager.prototype.register_target = function(plot_id, comm_id, msg_handler) {
				  if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
					var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
					comm_manager.register_target(comm_id, function(comm) {
					  comm.on_msg(msg_handler);
					});
				  } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
					window.PyViz.kernels[plot_id].registerCommTarget(comm_id, function(comm) {
					  comm.onMsg = msg_handler;
					});
				  }
				}

				JupyterCommManager.prototype.get_client_comm = function(plot_id, comm_id, msg_handler) {
				  if (comm_id in window.PyViz.comms) {
					return window.PyViz.comms[comm_id];
				  } else if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
					var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
					var comm = comm_manager.new_comm(comm_id, {}, {}, {}, comm_id);
					if (msg_handler) {
					  comm.on_msg(msg_handler);
					}
				  } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
					var comm = window.PyViz.kernels[plot_id].connectToComm(comm_id);
					comm.open();
					if (msg_handler) {
					  comm.onMsg = msg_handler;
					}
				  }

				  window.PyViz.comms[comm_id] = comm;
				  return comm;
				}

				window.PyViz.comm_manager = new JupyterCommManager();
				</script>

			<link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-1.2.0.min.css">
			<link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-widgets-1.2.0.min.css">
			<link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-tables-1.2.0.min.css">
			<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
			<link rel="stylesheet" href="https://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
			<style>div.bk-hbox {
				display: flex;
				justify-content: center;
			}

			div.bk-hbox div.bk-plot {
				padding: 8px;
			}

			div.bk-hbox div.bk-data-table {
				padding: 20px;
			}

			div.hololayout {
			  display: flex;
			  align-items: center;
			  margin: 0;
			}

			div.holoframe {
			  width: 75%;
			}

			div.holowell {
			  display: flex;
			  align-items: center;
			}

			form.holoform {
			  background-color: #fafafa;
			  border-radius: 5px;
			  overflow: hidden;
			  padding-left: 0.8em;
			  padding-right: 0.8em;
			  padding-top: 0.4em;
			  padding-bottom: 0.4em;
			  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
			  margin-bottom: 20px;
			  border: 1px solid #e3e3e3;
			}

			div.holowidgets {
			  padding-right: 0;
			  width: 25%;
			}

			div.holoslider {
			  min-height: 0 !important;
			  height: 0.8em;
			  width: 100%;
			}

			div.holoformgroup {
			  padding-top: 0.5em;
			  margin-bottom: 0.5em;
			}

			div.hologroup {
			  padding-left: 0;
			  padding-right: 0.8em;
			  width: 100%;
			}

			.holoselect {
			  width: 92%;
			  margin-left: 0;
			  margin-right: 0;
			}

			.holotext {
			  padding-left:  0.5em;
			  padding-right: 0;
			  width: 100%;
			}

			.holowidgets .ui-resizable-se {
			  visibility: hidden
			}

			.holoframe > .ui-resizable-se {
			  visibility: hidden
			}

			.holowidgets .ui-resizable-s {
			  visibility: hidden
			}


			/* CSS rules for noUISlider based slider used by JupyterLab extension  */

			.noUi-handle {
			  width: 20px !important;
			  height: 20px !important;
			  left: -5px !important;
			  top: -5px !important;
			}

			.noUi-handle:before, .noUi-handle:after {
			  visibility: hidden;
			  height: 0px;
			}

			.noUi-target {
			  margin-left: 0.5em;
			  margin-right: 0.5em;
			}
			</style><div style='display: table; margin: 0 auto;'>






			  <div class="bk-root" id="3139ac6b-c05a-4f8b-8791-2d573c893d3b" data-root-id="6849"></div>

			<script type="text/javascript">
			  (function(root) {
			  function embed_document(root) {

			  var docs_json = {"907e37c5-0236-402d-bd64-4464254c9dce":{"roots":{"references":[{"attributes":{"below":[{"id":"6858","type":"LinearAxis"}],"center":[{"id":"6862","type":"Grid"},{"id":"6867","type":"Grid"}],"left":[{"id":"6863","type":"LinearAxis"}],"margin":null,"min_border_bottom":10,"min_border_left":10,"min_border_right":10,"min_border_top":10,"plot_height":250,"plot_width":750,"renderers":[{"id":"6886","type":"GlyphRenderer"}],"sizing_mode":"fixed","title":{"id":"6850","type":"Title"},"toolbar":{"id":"6873","type":"Toolbar"},"x_range":{"id":"6846","type":"Range1d"},"x_scale":{"id":"6854","type":"LinearScale"},"y_range":{"id":"6847","type":"Range1d"},"y_scale":{"id":"6856","type":"LinearScale"}},"id":"6849","subtype":"Figure","type":"Plot"},{"attributes":{},"id":"6872","type":"ResetTool"},{"attributes":{},"id":"6859","type":"BasicTicker"},{"attributes":{"source":{"id":"6880","type":"ColumnDataSource"}},"id":"6887","type":"CDSView"},{"attributes":{"axis_label":"Count","bounds":"auto","formatter":{"id":"6891","type":"BasicTickFormatter"},"major_label_orientation":"horizontal","ticker":{"id":"6864","type":"BasicTicker"}},"id":"6863","type":"LinearAxis"},{"attributes":{"axis_label":"Number of Reviews","bounds":"auto","formatter":{"id":"6889","type":"BasicTickFormatter"},"major_label_orientation":"horizontal","ticker":{"id":"6859","type":"BasicTicker"}},"id":"6858","type":"LinearAxis"},{"attributes":{},"id":"6881","type":"Selection"},{"attributes":{},"id":"6864","type":"BasicTicker"},{"attributes":{"callback":null,"end":1088.0,"reset_end":1088.0,"reset_start":0.0,"tags":[[["Frequency","Frequency",null]]]},"id":"6847","type":"Range1d"},{"attributes":{"bottom":{"value":0},"fill_alpha":{"value":0.1},"fill_color":{"value":"#30a2da"},"left":{"field":"left"},"line_alpha":{"value":0.1},"line_color":{"value":"black"},"right":{"field":"right"},"top":{"field":"top"}},"id":"6884","type":"Quad"},{"attributes":{"callback":null,"renderers":[{"id":"6886","type":"GlyphRenderer"}],"tags":["hv_created"],"tooltips":[["x","@{x}"],["Frequency","@{Frequency}"]]},"id":"6848","type":"HoverTool"},{"attributes":{},"id":"6870","type":"WheelZoomTool"},{"attributes":{"callback":null,"end":99.0,"reset_end":99.0,"reset_start":0.0,"tags":[[["x","x",null]]]},"id":"6846","type":"Range1d"},{"attributes":{},"id":"6898","type":"UnionRenderers"},{"attributes":{"bottom":{"value":0},"fill_alpha":{"value":0.2},"fill_color":{"value":"#30a2da"},"left":{"field":"left"},"line_alpha":{"value":0.2},"line_color":{"value":"black"},"right":{"field":"right"},"top":{"field":"top"}},"id":"6885","type":"Quad"},{"attributes":{"overlay":{"id":"6899","type":"BoxAnnotation"}},"id":"6871","type":"BoxZoomTool"},{"attributes":{"bottom_units":"screen","fill_alpha":{"value":0.5},"fill_color":{"value":"lightgrey"},"left_units":"screen","level":"overlay","line_alpha":{"value":1.0},"line_color":{"value":"black"},"line_dash":[4,4],"line_width":{"value":2},"render_mode":"css","right_units":"screen","top_units":"screen"},"id":"6899","type":"BoxAnnotation"},{"attributes":{"callback":null,"data":{"Frequency":[384,1028,1088,883,694,538,360,332,254,198,159,171,129,127,123,105,76,89,77,68,67,75,60,65,55,50,51,36,35,31,47,32,33,32,32,28,29,36,24,25,27,18,24,25,28,18,20,21,23,24],"left":{"__ndarray__":"AAAAAAAAAACuR+F6FK7/P65H4XoUrg9AwvUoXI/CF0CuR+F6FK4fQM3MzMzMzCNAwvUoXI/CJ0C4HoXrUbgrQK5H4XoUri9AUrgehevRMUDNzMzMzMwzQEjhehSuxzVAwvUoXI/CN0A9CtejcL05QLgehetRuDtAMzMzMzOzPUCuR+F6FK4/QBSuR+F61EBAUrgehevRQUCPwvUoXM9CQM3MzMzMzENACtejcD3KREBI4XoUrsdFQIXrUbgexUZAwvUoXI/CR0AAAAAAAMBIQD0K16NwvUlAexSuR+G6SkC4HoXrUbhLQPYoXI/CtUxAMzMzMzOzTUBxPQrXo7BOQK5H4XoUrk9A9ihcj8JVUEAUrkfhetRQQDMzMzMzU1FAUrgehevRUUBxPQrXo1BSQI/C9Shcz1JArkfhehROU0DNzMzMzMxTQOtRuB6FS1RACtejcD3KVEApXI/C9UhVQEjhehSux1VAZmZmZmZGVkCF61G4HsVWQKRwPQrXQ1dAwvUoXI/CV0DhehSuR0FYQA==","dtype":"float64","shape":[50]},"right":{"__ndarray__":"rkfhehSu/z+uR+F6FK4PQML1KFyPwhdArkfhehSuH0DNzMzMzMwjQML1KFyPwidAuB6F61G4K0CuR+F6FK4vQFK4HoXr0TFAzczMzMzMM0BI4XoUrsc1QML1KFyPwjdAPQrXo3C9OUC4HoXrUbg7QDMzMzMzsz1ArkfhehSuP0AUrkfhetRAQFK4HoXr0UFAj8L1KFzPQkDNzMzMzMxDQArXo3A9ykRASOF6FK7HRUCF61G4HsVGQML1KFyPwkdAAAAAAADASEA9CtejcL1JQHsUrkfhukpAuB6F61G4S0D2KFyPwrVMQDMzMzMzs01AcT0K16OwTkCuR+F6FK5PQPYoXI/CVVBAFK5H4XrUUEAzMzMzM1NRQFK4HoXr0VFAcT0K16NQUkCPwvUoXM9SQK5H4XoUTlNAzczMzMzMU0DrUbgehUtUQArXo3A9ylRAKVyPwvVIVUBI4XoUrsdVQGZmZmZmRlZAhetRuB7FVkCkcD0K10NXQML1KFyPwldA4XoUrkdBWEAAAAAAAMBYQA==","dtype":"float64","shape":[50]},"top":[384,1028,1088,883,694,538,360,332,254,198,159,171,129,127,123,105,76,89,77,68,67,75,60,65,55,50,51,36,35,31,47,32,33,32,32,28,29,36,24,25,27,18,24,25,28,18,20,21,23,24],"x":{"__ndarray__":"rkfhehSu7z/C9Shcj8IHQMzMzMzMzBNAuB6F61G4G0BSuB6F69EhQEjhehSuxyVAPQrXo3C9KUAzMzMzM7MtQBSuR+F61DBAkML1KFzPMkAK16NwPco0QIXrUbgexTZAAAAAAADAOEB6FK5H4bo6QPYoXI/CtTxAcD0K16OwPkD2KFyPwlVAQDMzMzMzU0FAcD0K16NQQkCuR+F6FE5DQOxRuB6FS0RAKVyPwvVIRUBmZmZmZkZGQKRwPQrXQ0dA4XoUrkdBSEAehetRuD5JQFyPwvUoPEpAmpmZmZk5S0DXo3A9CjdMQBSuR+F6NE1AUrgehesxTkCQwvUoXC9PQGZmZmZmFlBAhetRuB6VUECkcD0K1xNRQML1KFyPklFA4noUrkcRUkAAAAAAAJBSQB6F61G4DlNAPgrXo3CNU0Bcj8L1KAxUQHoUrkfhilRAmpmZmZkJVUC4HoXrUYhVQNejcD0KB1ZA9ihcj8KFVkAUrkfhegRXQDMzMzMzg1dAUrgehesBWEBwPQrXo4BYQA==","dtype":"float64","shape":[50]}},"selected":{"id":"6881","type":"Selection"},"selection_policy":{"id":"6898","type":"UnionRenderers"}},"id":"6880","type":"ColumnDataSource"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_multi":null,"active_scroll":"auto","active_tap":"auto","tools":[{"id":"6848","type":"HoverTool"},{"id":"6868","type":"SaveTool"},{"id":"6869","type":"PanTool"},{"id":"6870","type":"WheelZoomTool"},{"id":"6871","type":"BoxZoomTool"},{"id":"6872","type":"ResetTool"}]},"id":"6873","type":"Toolbar"},{"attributes":{},"id":"6856","type":"LinearScale"},{"attributes":{"grid_line_color":null,"ticker":{"id":"6859","type":"BasicTicker"}},"id":"6862","type":"Grid"},{"attributes":{},"id":"6891","type":"BasicTickFormatter"},{"attributes":{},"id":"6889","type":"BasicTickFormatter"},{"attributes":{"dimension":1,"grid_line_color":null,"ticker":{"id":"6864","type":"BasicTicker"}},"id":"6867","type":"Grid"},{"attributes":{"data_source":{"id":"6880","type":"ColumnDataSource"},"glyph":{"id":"6883","type":"Quad"},"hover_glyph":null,"muted_glyph":{"id":"6885","type":"Quad"},"nonselection_glyph":{"id":"6884","type":"Quad"},"selection_glyph":null,"view":{"id":"6887","type":"CDSView"}},"id":"6886","type":"GlyphRenderer"},{"attributes":{"bottom":{"value":0},"fill_color":{"value":"#30a2da"},"left":{"field":"left"},"right":{"field":"right"},"top":{"field":"top"}},"id":"6883","type":"Quad"},{"attributes":{},"id":"6868","type":"SaveTool"},{"attributes":{},"id":"6854","type":"LinearScale"},{"attributes":{},"id":"6869","type":"PanTool"},{"attributes":{"text":"Truncated Reviews per Beer","text_color":{"value":"black"},"text_font_size":{"value":"12pt"}},"id":"6850","type":"Title"}],"root_ids":["6849"]},"title":"Bokeh Application","version":"1.2.0"}};
			  var render_items = [{"docid":"907e37c5-0236-402d-bd64-4464254c9dce","roots":{"6849":"3139ac6b-c05a-4f8b-8791-2d573c893d3b"}}];
			  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);

			  }
			  if (root.Bokeh !== undefined) {
				embed_document(root);
			  } else {
				var attempts = 0;
				var timer = setInterval(function(root) {
				  if (root.Bokeh !== undefined) {
					embed_document(root);
					clearInterval(timer);
				  }
				  attempts++;
				  if (attempts > 100) {
					console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
					clearInterval(timer);
				  }
				}, 10, root)
			  }
			})(window);
			</script>
			</div>
	</div>

	<p>
		The average number of reviews per beer is ~81. However, this value has been pulled upward rather significanlty,
		by the rightward skew of the values. The minimum number of reviews is 0 and the maximum values
		is 3996. The most reviewed beer was <a href="https://www.beeradvocate.com/beer/profile/1199/11757/">Breakfast Stout</a>
		by <a href="https://www.beeradvocate.com/beer/profile/1199/">Founders Brewing Company</a>. There were 95 beers
		with 0 reviews.
	</p>

	<!-- Word Count Histogram -->
	<div>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-widgets-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-tables-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://cdn.pydata.org/bokeh/release/bokeh-gl-1.2.0.min.js" type="text/javascript"></script>
			<script src="https://code.jquery.com/jquery-2.1.4.min.js" type="text/javascript"></script>
			<script src="https://code.jquery.com/ui/1.10.4/jquery-ui.min.js" type="text/javascript"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.20/require.min.js" type="text/javascript"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js" type="text/javascript"></script>
			<script type="text/javascript">function HoloViewsWidget() {
			}

			HoloViewsWidget.prototype.init_slider = function(init_val){
			  if(this.load_json) {
				this.from_json()
			  } else {
				this.update_cache();
			  }
			}

			HoloViewsWidget.prototype.populate_cache = function(idx){
			  this.cache[idx].innerHTML = this.frames[idx];
			  if (this.embed) {
				delete this.frames[idx];
			  }
			}

			HoloViewsWidget.prototype.process_error = function(msg){
			}

			HoloViewsWidget.prototype.from_json = function() {
			  var data_url = this.json_path + this.id + '.json';
			  $.getJSON(data_url, $.proxy(function(json_data) {
				this.frames = json_data;
				this.update_cache();
				this.update(0);
			  }, this));
			}

			HoloViewsWidget.prototype.dynamic_update = function(current){
			  if (current === undefined) {
				return
			  }
			  this.current = current;
			  if (this.comm) {
				var msg = {comm_id: this.id+'_client', content: current}
				this.comm.send(msg);
			  }
			}

			HoloViewsWidget.prototype.update_cache = function(force){
			  var frame_len = Object.keys(this.frames).length;
			  for (var i=0; i<frame_len; i++) {
				if(!this.load_json || this.dynamic)  {
				  var frame = Object.keys(this.frames)[i];
				} else {
				  var frame = i;
				}
				if(!(frame in this.cache) || force) {
				  if ((frame in this.cache) && force) { this.cache[frame].remove() }
				  var div = document.createElement("div");
				  var parent = document.getElementById("_anim_img"+this.id);
				  div.style.display = "none";
				  parent.appendChild(div)
				  this.cache[frame] = div;
				  var cache_id = "_anim_img"+this.id+"_"+frame;
				  this.populate_cache(frame);
				}
			  }
			}

			HoloViewsWidget.prototype.update = function(current){
			  if(current in this.cache) {
				for (var index in this.cache) {
				  this.cache[index].style.display = "none";
				}
				this.cache[current].style.display = "";
				this.wait = false;
			  }
			}

			HoloViewsWidget.prototype.init_comms = function() {
			  var that = this
			  HoloViews.comm_manager.register_target(this.plot_id, this.id, function (msg) { that.msg_handler(msg) })
			  if (!this.cached || this.dynamic) {
				function ack_callback(msg) {
				  var msg = msg.metadata;
				  var comm_id = msg.comm_id;
				  var comm_status = HoloViews.comm_status[comm_id];
				  if (that.queue.length > 0) {
					that.time = Date.now();
					that.dynamic_update(that.queue[that.queue.length-1]);
					that.queue = [];
				  } else {
					that.wait = false;
				  }
				  if ((msg.msg_type == "Ready") && msg.content) {
					console.log("Python callback returned following output:", msg.content);
				  } else if (msg.msg_type == "Error") {
					console.log("Python failed with the following traceback:", msg.traceback)
				  }
				}
				var comm = HoloViews.comm_manager.get_client_comm(this.plot_id, this.id+'_client', ack_callback);
				return comm
			  }
			}

			HoloViewsWidget.prototype.msg_handler = function(msg) {
			  var metadata = msg.metadata;
			  if ((metadata.msg_type == "Ready")) {
				if (metadata.content) {
				  console.log("Python callback returned following output:", metadata.content);
				}
			  return;
			  } else if (metadata.msg_type == "Error") {
				console.log("Python failed with the following traceback:", metadata.traceback)
				return
			  }
			  this.process_msg(msg)
			}

			HoloViewsWidget.prototype.process_msg = function(msg) {
			}

			function SelectionWidget(frames, id, slider_ids, keyMap, dim_vals, notFound, load_json, mode, cached, json_path, dynamic, plot_id){
			  this.frames = frames;
			  this.id = id;
			  this.plot_id = plot_id;
			  this.slider_ids = slider_ids;
			  this.keyMap = keyMap
			  this.current_frame = 0;
			  this.current_vals = dim_vals;
			  this.load_json = load_json;
			  this.mode = mode;
			  this.notFound = notFound;
			  this.cached = cached;
			  this.dynamic = dynamic;
			  this.cache = {};
			  this.json_path = json_path;
			  this.init_slider(this.current_vals[0]);
			  this.queue = [];
			  this.wait = false;
			  if (!this.cached || this.dynamic) {
				this.comm = this.init_comms();
			  }
			}

			SelectionWidget.prototype = new HoloViewsWidget;


			SelectionWidget.prototype.get_key = function(current_vals) {
			  var key = "(";
			  for (var i=0; i<this.slider_ids.length; i++)
			  {
				var val = this.current_vals[i];
				if (!(typeof val === 'string')) {
				  if (val % 1 === 0) { val = val.toFixed(1); }
				  else { val = val.toFixed(10); val = val.slice(0, val.length-1);}
				}
				key += "'" + val + "'";
				if(i != this.slider_ids.length-1) { key += ', ';}
				else if(this.slider_ids.length == 1) { key += ',';}
			  }
			  key += ")";
			  return this.keyMap[key];
			}

			SelectionWidget.prototype.set_frame = function(dim_val, dim_idx){
			  this.current_vals[dim_idx] = dim_val;
			  var key = this.current_vals;
			  if (!this.dynamic) {
				key = this.get_key(key)
			  }
			  if (this.dynamic || !this.cached) {
				if ((this.time !== undefined) && ((this.wait) && ((this.time + 10000) > Date.now()))) {
				  this.queue.push(key);
				  return
				}
				this.queue = [];
				this.time = Date.now();
				this.current_frame = key;
				this.wait = true;
				this.dynamic_update(key)
			  } else if (key !== undefined) {
				this.update(key)
			  }
			}


			/* Define the ScrubberWidget class */
			function ScrubberWidget(frames, num_frames, id, interval, load_json, mode, cached, json_path, dynamic, plot_id){
			  this.slider_id = "_anim_slider" + id;
			  this.loop_select_id = "_anim_loop_select" + id;
			  this.id = id;
			  this.plot_id = plot_id;
			  this.interval = interval;
			  this.current_frame = 0;
			  this.direction = 0;
			  this.dynamic = dynamic;
			  this.timer = null;
			  this.load_json = load_json;
			  this.mode = mode;
			  this.cached = cached;
			  this.frames = frames;
			  this.cache = {};
			  this.length = num_frames;
			  this.json_path = json_path;
			  document.getElementById(this.slider_id).max = this.length - 1;
			  this.init_slider(0);
			  this.wait = false;
			  this.queue = [];
			  if (!this.cached || this.dynamic) {
				this.comm = this.init_comms()
			  }
			}

			ScrubberWidget.prototype = new HoloViewsWidget;

			ScrubberWidget.prototype.set_frame = function(frame){
			  this.current_frame = frame;
			  var widget = document.getElementById(this.slider_id);
			  if (widget === null) {
				this.pause_animation();
				return
			  }
			  widget.value = this.current_frame;
			  if (this.dynamic || !this.cached) {
				if ((this.time !== undefined) && ((this.wait) && ((this.time + 10000) > Date.now()))) {
				  this.queue.push(frame);
				  return
				}
				this.queue = [];
				this.time = Date.now();
				this.wait = true;
				this.dynamic_update(frame)
			  } else {
				this.update(frame)
			  }
			}

			ScrubberWidget.prototype.get_loop_state = function(){
			  var button_group = document[this.loop_select_id].state;
			  for (var i = 0; i < button_group.length; i++) {
				var button = button_group[i];
				if (button.checked) {
				  return button.value;
				}
			  }
			  return undefined;
			}


			ScrubberWidget.prototype.next_frame = function() {
			  this.set_frame(Math.min(this.length - 1, this.current_frame + 1));
			}

			ScrubberWidget.prototype.previous_frame = function() {
			  this.set_frame(Math.max(0, this.current_frame - 1));
			}

			ScrubberWidget.prototype.first_frame = function() {
			  this.set_frame(0);
			}

			ScrubberWidget.prototype.last_frame = function() {
			  this.set_frame(this.length - 1);
			}

			ScrubberWidget.prototype.slower = function() {
			  this.interval /= 0.7;
			  if(this.direction > 0){this.play_animation();}
			  else if(this.direction < 0){this.reverse_animation();}
			}

			ScrubberWidget.prototype.faster = function() {
			  this.interval *= 0.7;
			  if(this.direction > 0){this.play_animation();}
			  else if(this.direction < 0){this.reverse_animation();}
			}

			ScrubberWidget.prototype.anim_step_forward = function() {
			  if(this.current_frame < this.length - 1){
				this.next_frame();
			  }else{
				var loop_state = this.get_loop_state();
				if(loop_state == "loop"){
				  this.first_frame();
				}else if(loop_state == "reflect"){
				  this.last_frame();
				  this.reverse_animation();
				}else{
				  this.pause_animation();
				  this.last_frame();
				}
			  }
			}

			ScrubberWidget.prototype.anim_step_reverse = function() {
			  if(this.current_frame > 0){
				this.previous_frame();
			  } else {
				var loop_state = this.get_loop_state();
				if(loop_state == "loop"){
				  this.last_frame();
				}else if(loop_state == "reflect"){
				  this.first_frame();
				  this.play_animation();
				}else{
				  this.pause_animation();
				  this.first_frame();
				}
			  }
			}

			ScrubberWidget.prototype.pause_animation = function() {
			  this.direction = 0;
			  if (this.timer){
				clearInterval(this.timer);
				this.timer = null;
			  }
			}

			ScrubberWidget.prototype.play_animation = function() {
			  this.pause_animation();
			  this.direction = 1;
			  var t = this;
			  if (!this.timer) this.timer = setInterval(function(){t.anim_step_forward();}, this.interval);
			}

			ScrubberWidget.prototype.reverse_animation = function() {
			  this.pause_animation();
			  this.direction = -1;
			  var t = this;
			  if (!this.timer) this.timer = setInterval(function(){t.anim_step_reverse();}, this.interval);
			}

			function extend(destination, source) {
			  for (var k in source) {
				if (source.hasOwnProperty(k)) {
				  destination[k] = source[k];
				}
			  }
			  return destination;
			}

			function update_widget(widget, values) {
			  if (widget.hasClass("ui-slider")) {
				widget.slider('option', {
				  min: 0,
				  max: values.length-1,
				  dim_vals: values,
				  value: 0,
				  dim_labels: values
				})
				widget.slider('option', 'slide').call(widget, event, {value: 0})
			  } else {
				widget.empty();
				for (var i=0; i<values.length; i++){
				  widget.append($("<option>", {
					value: i,
					text: values[i]
				  }))
				};
				widget.data('values', values);
				widget.data('value', 0);
				widget.trigger("change");
			  };
			}

			function init_slider(id, plot_id, dim, values, next_vals, labels, dynamic, step, value, next_dim,
								dim_idx, delay, jQueryUI_CDN, UNDERSCORE_CDN) {
			  // Slider JS Block START
			  function loadcssfile(filename){
				var fileref=document.createElement("link")
				fileref.setAttribute("rel", "stylesheet")
				fileref.setAttribute("type", "text/css")
				fileref.setAttribute("href", filename)
				document.getElementsByTagName("head")[0].appendChild(fileref)
			  }
			  loadcssfile("https://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css");
			  /* Check if jQuery and jQueryUI have been loaded
				otherwise load with require.js */
			  var jQuery = window.jQuery,
				// check for old versions of jQuery
				oldjQuery = jQuery && !!jQuery.fn.jquery.match(/^1\.[0-4](\.|$)/),
				jquery_path = '',
				paths = {},
				noConflict;
			  var jQueryUI = jQuery.ui;
			  // check for jQuery
			  if (!jQuery || oldjQuery) {
				// load if it's not available or doesn't meet min standards
				paths.jQuery = jQuery;
				noConflict = !!oldjQuery;
			  } else {
				// register the current jQuery
				define('jquery', [], function() { return jQuery; });
			  }
			  if (!jQueryUI) {
				paths.jQueryUI = jQueryUI_CDN.slice(null, -3);
			  } else {
				define('jQueryUI', [], function() { return jQuery.ui; });
			  }
			  paths.underscore = UNDERSCORE_CDN.slice(null, -3);
			  var jquery_require = {
				paths: paths,
				shim: {
				  "jQueryUI": {
					exports:"$",
					deps: ['jquery']
				  },
				  "underscore": {
					exports: '_'
				  }
				}
			  }
			  require.config(jquery_require);
			  require(["jQueryUI", "underscore"], function(jUI, _){
				if (noConflict) $.noConflict(true);
				var vals = values;
				if (dynamic && vals.constructor === Array) {
				  var default_value = parseFloat(value);
				  var min = parseFloat(vals[0]);
				  var max = parseFloat(vals[vals.length-1]);
				  var wstep = step;
				  var wlabels = [default_value];
				  var init_label = default_value;
				} else {
				  var min = 0;
				  if (dynamic) {
					var max = Object.keys(vals).length - 1;
					var init_label = labels[value];
					var default_value = values[value];
				  } else {
					var max = vals.length - 1;
					var init_label = labels[value];
					var default_value = value;
				  }
				  var wstep = 1;
				  var wlabels = labels;
				}
				function adjustFontSize(text) {
				  var width_ratio = (text.parent().width()/8)/text.val().length;
				  var size = Math.min(0.9, Math.max(0.6, width_ratio))+'em';
				  text.css('font-size', size);
				}
				var slider = $('#_anim_widget'+id+'_'+dim);
				slider.slider({
				  animate: "fast",
				  min: min,
				  max: max,
				  step: wstep,
				  value: default_value,
				  dim_vals: vals,
				  dim_labels: wlabels,
				  next_vals: next_vals,
				  slide: function(event, ui) {
					var vals = slider.slider("option", "dim_vals");
					var next_vals = slider.slider("option", "next_vals");
					var dlabels = slider.slider("option", "dim_labels");
					if (dynamic) {
					  var dim_val = ui.value;
					  if (vals.constructor === Array) {
						var label = ui.value;
					  } else {
						var label = dlabels[ui.value];
					  }
					} else {
					  var dim_val = vals[ui.value];
					  var label = dlabels[ui.value];
					}
					var text = $('#textInput'+id+'_'+dim);
					text.val(label);
					adjustFontSize(text);
					HoloViews.index[plot_id].set_frame(dim_val, dim_idx);
					if (Object.keys(next_vals).length > 0) {
					  var new_vals = next_vals[dim_val];
					  var next_widget = $('#_anim_widget'+id+'_'+next_dim);
					  update_widget(next_widget, new_vals);
					}
				  }
				});
				slider.keypress(function(event) {
				  if (event.which == 80 || event.which == 112) {
					var start = slider.slider("option", "value");
					var stop =  slider.slider("option", "max");
					for (var i=start; i<=stop; i++) {
					  var delay = i*delay;
					  $.proxy(function doSetTimeout(i) { setTimeout($.proxy(function() {
						var val = {value:i};
						slider.slider('value',i);
						slider.slider("option", "slide")(null, val);
					  }, slider), delay);}, slider)(i);
					}
				  }
				  if (event.which == 82 || event.which == 114) {
					var start = slider.slider("option", "value");
					var stop =  slider.slider("option", "min");
					var count = 0;
					for (var i=start; i>=stop; i--) {
					  var delay = count*delay;
					  count = count + 1;
					  $.proxy(function doSetTimeout(i) { setTimeout($.proxy(function() {
						var val = {value:i};
						slider.slider('value',i);
						slider.slider("option", "slide")(null, val);
					  }, slider), delay);}, slider)(i);
					}
				  }
				});
				var textInput = $('#textInput'+id+'_'+dim)
				textInput.val(init_label);
				adjustFontSize(textInput);
			  });
			}

			function init_dropdown(id, plot_id, dim, vals, value, next_vals, labels, next_dim, dim_idx, dynamic) {
			  var widget = $("#_anim_widget"+id+'_'+dim);
			  widget.data('values', vals)
			  for (var i=0; i<vals.length; i++){
				if (dynamic) {
				  var val = vals[i];
				} else {
				  var val = i;
				}
				widget.append($("<option>", {
				  value: val,
				  text: labels[i]
				}));
			  };
			  widget.data("next_vals", next_vals);
			  widget.val(value);
			  widget.on('change', function(event, ui) {
				if (dynamic) {
				  var dim_val = parseInt(this.value);
				} else {
				  var dim_val = $.data(this, 'values')[this.value];
				}
				var next_vals = $.data(this, "next_vals");
				if (Object.keys(next_vals).length > 0) {
				  var new_vals = next_vals[dim_val];
				  var next_widget = $('#_anim_widget'+id+'_'+next_dim);
				  update_widget(next_widget, new_vals);
				}
				var widgets = HoloViews.index[plot_id]
				if (widgets) {
				  widgets.set_frame(dim_val, dim_idx);
				}
			  });
			}


			if (window.HoloViews === undefined) {
			  window.HoloViews = {}
			  window.PyViz = window.HoloViews
			} else if (window.PyViz === undefined) {
			  window.PyViz = window.HoloViews
			}


			var _namespace = {
			  init_slider: init_slider,
			  init_dropdown: init_dropdown,
			  comms: {},
			  comm_status: {},
			  index: {},
			  plot_index: {},
			  kernels: {},
			  receivers: {}
			}

			for (var k in _namespace) {
			  if (!(k in window.HoloViews)) {
				window.HoloViews[k] = _namespace[k];
			  }
			}

			// Define Bokeh specific subclasses
			function BokehSelectionWidget() {
			  SelectionWidget.apply(this, arguments);
			}

			function BokehScrubberWidget() {
			  ScrubberWidget.apply(this, arguments);
			}

			// Let them inherit from the baseclasses
			BokehSelectionWidget.prototype = Object.create(SelectionWidget.prototype);
			BokehScrubberWidget.prototype = Object.create(ScrubberWidget.prototype);

			// Define methods to override on widgets
			var BokehMethods = {
			  update_cache : function(){
				for (var index in this.frames) {
				  this.frames[index] = JSON.parse(this.frames[index]);
				}
			  },
			  update : function(current){
				if (current === undefined) {
				  return;
				}
				var data = this.frames[current];
				if (data !== undefined) {
				  if (data.root in HoloViews.plot_index) {
					var doc = HoloViews.plot_index[data.root].model.document;
				  } else {
					var doc = Bokeh.index[data.root].model.document;
				  }
				  doc.apply_json_patch(data.content);
				}
			  },
			  init_comms: function() {
				if (Bokeh.protocol !== undefined) {
				  this.receiver = new Bokeh.protocol.Receiver()
				} else {
				  this.receiver = null;
				}
				return HoloViewsWidget.prototype.init_comms.call(this);
			  },
			  process_msg : function(msg) {
				if (this.plot_id in HoloViews.plot_index) {
				  var doc = HoloViews.plot_index[this.plot_id].model.document;
				} else {
				  var doc = Bokeh.index[this.plot_id].model.document;
				}
				if (this.receiver === null) { return }
				var receiver = this.receiver;
				if (msg.buffers.length > 0) {
				  receiver.consume(msg.buffers[0].buffer)
				} else {
				  receiver.consume(msg.content.data)
				}
				const comm_msg = receiver.message;
				if ((comm_msg != null) && (doc != null)) {
				  doc.apply_json_patch(comm_msg.content, comm_msg.buffers)
				}
			  }
			}

			// Extend Bokeh widgets with backend specific methods
			extend(BokehSelectionWidget.prototype, BokehMethods);
			extend(BokehScrubberWidget.prototype, BokehMethods);

			window.HoloViews.BokehSelectionWidget = BokehSelectionWidget
			window.HoloViews.BokehScrubberWidget = BokehScrubberWidget

			// Define MPL specific subclasses
			function MPLSelectionWidget() {
			  SelectionWidget.apply(this, arguments);
			}

			function MPLScrubberWidget() {
			  ScrubberWidget.apply(this, arguments);
			}

			// Let them inherit from the baseclasses
			MPLSelectionWidget.prototype = Object.create(SelectionWidget.prototype);
			MPLScrubberWidget.prototype = Object.create(ScrubberWidget.prototype);

			// Define methods to override on widgets
			var MPLMethods = {
			  init_slider : function(init_val){
				if(this.load_json) {
				  this.from_json()
				} else {
				  this.update_cache();
				}
				if (this.dynamic | !this.cached | (this.current_vals === undefined)) {
				  this.update(0)
				} else {
				  this.set_frame(this.current_vals[0], 0)
				}
			  },
			  process_msg : function(msg) {
				var data = msg.content.data;
				this.frames[this.current] = data;
				this.update_cache(true);
				this.update(this.current);
			  }
			}
			// Extend MPL widgets with backend specific methods
			extend(MPLSelectionWidget.prototype, MPLMethods);
			extend(MPLScrubberWidget.prototype, MPLMethods);

			window.HoloViews.MPLSelectionWidget = MPLSelectionWidget
			window.HoloViews.MPLScrubberWidget = MPLScrubberWidget
			</script>
			<script type="text/javascript">
				function JupyterCommManager() {
				}

				JupyterCommManager.prototype.register_target = function(plot_id, comm_id, msg_handler) {
				  if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
					var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
					comm_manager.register_target(comm_id, function(comm) {
					  comm.on_msg(msg_handler);
					});
				  } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
					window.PyViz.kernels[plot_id].registerCommTarget(comm_id, function(comm) {
					  comm.onMsg = msg_handler;
					});
				  }
				}

				JupyterCommManager.prototype.get_client_comm = function(plot_id, comm_id, msg_handler) {
				  if (comm_id in window.PyViz.comms) {
					return window.PyViz.comms[comm_id];
				  } else if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
					var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
					var comm = comm_manager.new_comm(comm_id, {}, {}, {}, comm_id);
					if (msg_handler) {
					  comm.on_msg(msg_handler);
					}
				  } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
					var comm = window.PyViz.kernels[plot_id].connectToComm(comm_id);
					comm.open();
					if (msg_handler) {
					  comm.onMsg = msg_handler;
					}
				  }

				  window.PyViz.comms[comm_id] = comm;
				  return comm;
				}

				window.PyViz.comm_manager = new JupyterCommManager();
				</script>

			<link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-1.2.0.min.css">
			<link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-widgets-1.2.0.min.css">
			<link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-tables-1.2.0.min.css">
			<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
			<link rel="stylesheet" href="https://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
			<style>div.bk-hbox {
				display: flex;
				justify-content: center;
			}

			div.bk-hbox div.bk-plot {
				padding: 8px;
			}

			div.bk-hbox div.bk-data-table {
				padding: 20px;
			}

			div.hololayout {
			  display: flex;
			  align-items: center;
			  margin: 0;
			}

			div.holoframe {
			  width: 75%;
			}

			div.holowell {
			  display: flex;
			  align-items: center;
			}

			form.holoform {
			  background-color: #fafafa;
			  border-radius: 5px;
			  overflow: hidden;
			  padding-left: 0.8em;
			  padding-right: 0.8em;
			  padding-top: 0.4em;
			  padding-bottom: 0.4em;
			  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
			  margin-bottom: 20px;
			  border: 1px solid #e3e3e3;
			}

			div.holowidgets {
			  padding-right: 0;
			  width: 25%;
			}

			div.holoslider {
			  min-height: 0 !important;
			  height: 0.8em;
			  width: 100%;
			}

			div.holoformgroup {
			  padding-top: 0.5em;
			  margin-bottom: 0.5em;
			}

			div.hologroup {
			  padding-left: 0;
			  padding-right: 0.8em;
			  width: 100%;
			}

			.holoselect {
			  width: 92%;
			  margin-left: 0;
			  margin-right: 0;
			}

			.holotext {
			  padding-left:  0.5em;
			  padding-right: 0;
			  width: 100%;
			}

			.holowidgets .ui-resizable-se {
			  visibility: hidden
			}

			.holoframe > .ui-resizable-se {
			  visibility: hidden
			}

			.holowidgets .ui-resizable-s {
			  visibility: hidden
			}


			/* CSS rules for noUISlider based slider used by JupyterLab extension  */

			.noUi-handle {
			  width: 20px !important;
			  height: 20px !important;
			  left: -5px !important;
			  top: -5px !important;
			}

			.noUi-handle:before, .noUi-handle:after {
			  visibility: hidden;
			  height: 0px;
			}

			.noUi-target {
			  margin-left: 0.5em;
			  margin-right: 0.5em;
			}
			</style><div style='display: table; margin: 0 auto;'>






			  <div class="bk-root" id="e976b9a0-51df-4378-a641-9a84ef4afc37" data-root-id="7949"></div>

			<script type="text/javascript">
			  (function(root) {
			  function embed_document(root) {

			  var docs_json = {"aac46fa4-bc22-4ffd-927d-a918792ded47":{"roots":{"references":[{"attributes":{"below":[{"id":"7958","type":"LinearAxis"}],"center":[{"id":"7962","type":"Grid"},{"id":"7967","type":"Grid"}],"left":[{"id":"7963","type":"LinearAxis"}],"margin":null,"min_border_bottom":10,"min_border_left":10,"min_border_right":10,"min_border_top":10,"plot_height":250,"plot_width":750,"renderers":[{"id":"7986","type":"GlyphRenderer"}],"sizing_mode":"fixed","title":{"id":"7950","type":"Title"},"toolbar":{"id":"7973","type":"Toolbar"},"x_range":{"id":"7946","type":"Range1d"},"x_scale":{"id":"7954","type":"LinearScale"},"y_range":{"id":"7947","type":"Range1d"},"y_scale":{"id":"7956","type":"LinearScale"}},"id":"7949","subtype":"Figure","type":"Plot"},{"attributes":{"callback":null,"end":32258.0,"reset_end":32258.0,"reset_start":0.0,"tags":[[["Frequency","Frequency",null]]]},"id":"7947","type":"Range1d"},{"attributes":{},"id":"7970","type":"WheelZoomTool"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_multi":null,"active_scroll":"auto","active_tap":"auto","tools":[{"id":"7948","type":"HoverTool"},{"id":"7968","type":"SaveTool"},{"id":"7969","type":"PanTool"},{"id":"7970","type":"WheelZoomTool"},{"id":"7971","type":"BoxZoomTool"},{"id":"7972","type":"ResetTool"}]},"id":"7973","type":"Toolbar"},{"attributes":{},"id":"7959","type":"BasicTicker"},{"attributes":{},"id":"7956","type":"LinearScale"},{"attributes":{"text":"Truncated Word Count per Review","text_color":{"value":"black"},"text_font_size":{"value":"12pt"}},"id":"7950","type":"Title"},{"attributes":{"source":{"id":"7980","type":"ColumnDataSource"}},"id":"7987","type":"CDSView"},{"attributes":{},"id":"7954","type":"LinearScale"},{"attributes":{"overlay":{"id":"7999","type":"BoxAnnotation"}},"id":"7971","type":"BoxZoomTool"},{"attributes":{"callback":null,"end":299.0,"reset_end":299.0,"reset_start":0.0,"tags":[[["x","x",null]]]},"id":"7946","type":"Range1d"},{"attributes":{},"id":"7969","type":"PanTool"},{"attributes":{"bottom_units":"screen","fill_alpha":{"value":0.5},"fill_color":{"value":"lightgrey"},"left_units":"screen","level":"overlay","line_alpha":{"value":1.0},"line_color":{"value":"black"},"line_dash":[4,4],"line_width":{"value":2},"render_mode":"css","right_units":"screen","top_units":"screen"},"id":"7999","type":"BoxAnnotation"},{"attributes":{},"id":"7972","type":"ResetTool"},{"attributes":{},"id":"7991","type":"BasicTickFormatter"},{"attributes":{"bottom":{"value":0},"fill_color":{"value":"#30a2da"},"left":{"field":"left"},"right":{"field":"right"},"top":{"field":"top"}},"id":"7983","type":"Quad"},{"attributes":{"data_source":{"id":"7980","type":"ColumnDataSource"},"glyph":{"id":"7983","type":"Quad"},"hover_glyph":null,"muted_glyph":{"id":"7985","type":"Quad"},"nonselection_glyph":{"id":"7984","type":"Quad"},"selection_glyph":null,"view":{"id":"7987","type":"CDSView"}},"id":"7986","type":"GlyphRenderer"},{"attributes":{"bottom":{"value":0},"fill_alpha":{"value":0.2},"fill_color":{"value":"#30a2da"},"left":{"field":"left"},"line_alpha":{"value":0.2},"line_color":{"value":"black"},"right":{"field":"right"},"top":{"field":"top"}},"id":"7985","type":"Quad"},{"attributes":{},"id":"7989","type":"BasicTickFormatter"},{"attributes":{"callback":null,"renderers":[{"id":"7986","type":"GlyphRenderer"}],"tags":["hv_created"],"tooltips":[["x","@{x}"],["Frequency","@{Frequency}"]]},"id":"7948","type":"HoverTool"},{"attributes":{},"id":"7981","type":"Selection"},{"attributes":{},"id":"7968","type":"SaveTool"},{"attributes":{"dimension":1,"grid_line_color":null,"ticker":{"id":"7964","type":"BasicTicker"}},"id":"7967","type":"Grid"},{"attributes":{"callback":null,"data":{"Frequency":[169,1574,174,254,1592,6389,10907,12329,14415,19083,24120,26938,28686,30538,31008,31991,32201,32258,32210,31059,30117,28570,27243,25530,24162,22384,21091,19428,18006,16542,15128,14131,12683,11935,10910,9973,9082,8600,7751,6921,6450,5852,5452,5006,4489,4176,3694,3415,3212,2878,2674,2470,2201,2088,1957,1746,1706,1529,1371,1238,1237,1076,1057,936,880,839,755,777,673,611,572,519,491,466,426,391,390,353,327,293,290,242,256,246,229,227,212,199,174,149,172,148,161,137,134,103,108,125,114,94],"left":{"__ndarray__":"AAAAAAAAAADsUbgehesHQOxRuB6F6xdAcT0K16PwIUDsUbgehesnQGdmZmZm5i1AcT0K16PwMUCuR+F6FO40QOxRuB6F6zdAKlyPwvXoOkBnZmZmZuY9QFK4HoXrcUBAcT0K16PwQUCQwvUoXG9DQK5H4XoU7kRAzczMzMxsRkDsUbgehetHQAvXo3A9aklAKlyPwvXoSkBI4XoUrmdMQGdmZmZm5k1AhutRuB5lT0BSuB6F63FQQOJ6FK5HMVFAcT0K16PwUUAAAAAAALBSQJDC9Shcb1NAH4XrUbguVECuR+F6FO5UQD4K16NwrVVAzczMzMxsVkBdj8L1KCxXQOxRuB6F61dAexSuR+GqWEAL16NwPWpZQJqZmZmZKVpAKlyPwvXoWkC5HoXrUahbQEjhehSuZ1xA2KNwPQonXUBnZmZmZuZdQPYoXI/CpV5AhutRuB5lX0AL16NwPRJgQFK4HoXrcWBAmpmZmZnRYEDiehSuRzFhQClcj8L1kGFAcT0K16PwYUC5HoXrUVBiQAAAAAAAsGJASOF6FK4PY0CQwvUoXG9jQNejcD0Kz2NAH4XrUbguZEBnZmZmZo5kQK5H4XoU7mRA9ihcj8JNZUA+CtejcK1lQIbrUbgeDWZAzczMzMxsZkAVrkfhesxmQF2PwvUoLGdApHA9CteLZ0DsUbgehetnQDQzMzMzS2hAexSuR+GqaEDD9ShcjwppQAvXo3A9amlAUrgehevJaUCamZmZmSlqQOJ6FK5HiWpAKlyPwvXoakBxPQrXo0hrQLkehetRqGtAAQAAAAAIbEBI4XoUrmdsQJDC9Shcx2xA2KNwPQonbUAfhetRuIZtQGdmZmZm5m1Ar0fhehRGbkD2KFyPwqVuQD4K16NwBW9AhutRuB5lb0DNzMzMzMRvQAvXo3A9EnBArkfhehRCcEBSuB6F63FwQPYoXI/CoXBAmpmZmZnRcEA+CtejcAFxQOJ6FK5HMXFAhetRuB5hcUApXI/C9ZBxQM3MzMzMwHFAcT0K16PwcUAVrkfheiByQLkehetRUHJAXY/C9SiAckA=","dtype":"float64","shape":[100]},"right":{"__ndarray__":"7FG4HoXrB0DsUbgehesXQHE9Ctej8CFA7FG4HoXrJ0BnZmZmZuYtQHE9Ctej8DFArkfhehTuNEDsUbgehes3QCpcj8L16DpAZ2ZmZmbmPUBSuB6F63FAQHE9Ctej8EFAkML1KFxvQ0CuR+F6FO5EQM3MzMzMbEZA7FG4HoXrR0AL16NwPWpJQCpcj8L16EpASOF6FK5nTEBnZmZmZuZNQIbrUbgeZU9AUrgehetxUEDiehSuRzFRQHE9Ctej8FFAAAAAAACwUkCQwvUoXG9TQB+F61G4LlRArkfhehTuVEA+CtejcK1VQM3MzMzMbFZAXY/C9SgsV0DsUbgehetXQHsUrkfhqlhAC9ejcD1qWUCamZmZmSlaQCpcj8L16FpAuR6F61GoW0BI4XoUrmdcQNijcD0KJ11AZ2ZmZmbmXUD2KFyPwqVeQIbrUbgeZV9AC9ejcD0SYEBSuB6F63FgQJqZmZmZ0WBA4noUrkcxYUApXI/C9ZBhQHE9Ctej8GFAuR6F61FQYkAAAAAAALBiQEjhehSuD2NAkML1KFxvY0DXo3A9Cs9jQB+F61G4LmRAZ2ZmZmaOZECuR+F6FO5kQPYoXI/CTWVAPgrXo3CtZUCG61G4Hg1mQM3MzMzMbGZAFa5H4XrMZkBdj8L1KCxnQKRwPQrXi2dA7FG4HoXrZ0A0MzMzM0toQHsUrkfhqmhAw/UoXI8KaUAL16NwPWppQFK4HoXryWlAmpmZmZkpakDiehSuR4lqQCpcj8L16GpAcT0K16NIa0C5HoXrUahrQAEAAAAACGxASOF6FK5nbECQwvUoXMdsQNijcD0KJ21AH4XrUbiGbUBnZmZmZuZtQK9H4XoURm5A9ihcj8KlbkA+CtejcAVvQIbrUbgeZW9AzczMzMzEb0AL16NwPRJwQK5H4XoUQnBAUrgehetxcED2KFyPwqFwQJqZmZmZ0XBAPgrXo3ABcUDiehSuRzFxQIXrUbgeYXFAKVyPwvWQcUDNzMzMzMBxQHE9Ctej8HFAFa5H4XogckC5HoXrUVByQF2PwvUogHJAAAAAAACwckA=","dtype":"float64","shape":[100]},"top":[169,1574,174,254,1592,6389,10907,12329,14415,19083,24120,26938,28686,30538,31008,31991,32201,32258,32210,31059,30117,28570,27243,25530,24162,22384,21091,19428,18006,16542,15128,14131,12683,11935,10910,9973,9082,8600,7751,6921,6450,5852,5452,5006,4489,4176,3694,3415,3212,2878,2674,2470,2201,2088,1957,1746,1706,1529,1371,1238,1237,1076,1057,936,880,839,755,777,673,611,572,519,491,466,426,391,390,353,327,293,290,242,256,246,229,227,212,199,174,149,172,148,161,137,134,103,108,125,114,94],"x":{"__ndarray__":"7FG4HoXr9z9xPQrXo/ARQGdmZmZm5h1ArkfhehTuJEAqXI/C9egqQFK4HoXrcTBAkML1KFxvM0DNzMzMzGw2QAvXo3A9ajlASOF6FK5nPECG61G4HmU/QOJ6FK5HMUFAAAAAAACwQkAfhetRuC5EQD4K16NwrUVAXI/C9SgsR0B8FK5H4apIQJqZmZmZKUpAuR6F61GoS0DYo3A9CidNQPYoXI/CpU5ACtejcD0SUECamZmZmdFQQCpcj8L1kFFAuB6F61FQUkBI4XoUrg9TQNijcD0Kz1NAZmZmZmaOVED2KFyPwk1VQIbrUbgeDVZAFa5H4XrMVkCkcD0K14tXQDQzMzMzS1hAw/UoXI8KWUBSuB6F68lZQOJ6FK5HiVpAcj0K16NIW0AAAAAAAAhcQJDC9Shcx1xAIIXrUbiGXUCuR+F6FEZeQD4K16NwBV9AzszMzMzEX0CuR+F6FEJgQPYoXI/CoWBAPgrXo3ABYUCG61G4HmFhQM3MzMzMwGFAFa5H4XogYkBcj8L1KIBiQKRwPQrX32JA7FG4HoU/Y0A0MzMzM59jQHsUrkfh/mNAw/UoXI9eZEAK16NwPb5kQFK4HoXrHWVAmpmZmZl9ZUDiehSuR91lQCpcj8L1PGZAcT0K16OcZkC5HoXrUfxmQAAAAAAAXGdASOF6FK67Z0CQwvUoXBtoQNijcD0Ke2hAH4XrUbjaaEBnZmZmZjppQK5H4XoUmmlA9ihcj8L5aUA+CtejcFlqQIbrUbgeuWpAzszMzMwYa0AVrkfhenhrQF2PwvUo2GtApHA9Ctc3bEDsUbgehZdsQDQzMzMz92xAfBSuR+FWbUDD9Shcj7ZtQAvXo3A9Fm5AUrgehet1bkCamZmZmdVuQOJ6FK5HNW9AKlyPwvWUb0ByPQrXo/RvQFyPwvUoKnBAAAAAAABacECkcD0K14lwQEjhehSuuXBA7FG4HoXpcECQwvUoXBlxQDQzMzMzSXFA16NwPQp5cUB7FK5H4ahxQB+F61G42HFAw/UoXI8IckBnZmZmZjhyQAvXo3A9aHJArkfhehSYckA=","dtype":"float64","shape":[100]}},"selected":{"id":"7981","type":"Selection"},"selection_policy":{"id":"7998","type":"UnionRenderers"}},"id":"7980","type":"ColumnDataSource"},{"attributes":{"grid_line_color":null,"ticker":{"id":"7959","type":"BasicTicker"}},"id":"7962","type":"Grid"},{"attributes":{},"id":"7998","type":"UnionRenderers"},{"attributes":{"axis_label":"Word Count","bounds":"auto","formatter":{"id":"7989","type":"BasicTickFormatter"},"major_label_orientation":"horizontal","ticker":{"id":"7959","type":"BasicTicker"}},"id":"7958","type":"LinearAxis"},{"attributes":{"axis_label":"Reviews","bounds":"auto","formatter":{"id":"7991","type":"BasicTickFormatter"},"major_label_orientation":"horizontal","ticker":{"id":"7964","type":"BasicTicker"}},"id":"7963","type":"LinearAxis"},{"attributes":{},"id":"7964","type":"BasicTicker"},{"attributes":{"bottom":{"value":0},"fill_alpha":{"value":0.1},"fill_color":{"value":"#30a2da"},"left":{"field":"left"},"line_alpha":{"value":0.1},"line_color":{"value":"black"},"right":{"field":"right"},"top":{"field":"top"}},"id":"7984","type":"Quad"}],"root_ids":["7949"]},"title":"Bokeh Application","version":"1.2.0"}};
			  var render_items = [{"docid":"aac46fa4-bc22-4ffd-927d-a918792ded47","roots":{"7949":"e976b9a0-51df-4378-a641-9a84ef4afc37"}}];
			  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);

			  }
			  if (root.Bokeh !== undefined) {
				embed_document(root);
			  } else {
				var attempts = 0;
				var timer = setInterval(function(root) {
				  if (root.Bokeh !== undefined) {
					embed_document(root);
					clearInterval(timer);
				  }
				  attempts++;
				  if (attempts > 100) {
					console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
					clearInterval(timer);
				  }
				}, 10, root)
			  }
			})(window);
			</script>
			</div>
	</div>

	<p>
		The average word count per review is ~71 words. Like the mean number of reviews per beer, this values has beer_style_count
		inflated by the rightward skew of the values. For some reason, 15 of the reviews have not been processed. They have a word
		count of 0. The longest review has contains 840 words (after stemming and stopword removal).
	</p>
</section>
{% endblock %}
